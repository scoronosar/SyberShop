Get Started
This section describes how to use APIs to develop, publish, and share apps on the Platform.



Register as a Developer
Register as a developer, and your registration will be reviewed by a platform admin within three business days.

image

If your app is developed for your own use, we recommend that you also create an account on the business platform for better interconnection. The Platform supports the following business platform:

Taobao Global Distribution Platform



Request an App Type
Select an app type and register your app. A platform admin will review your request within three business days.

Note that you need to request an app type as required by your business to obtain proper API permissions.

Log in and Fill in Information

Submit files to verify your identity. A platform admin will review your files within three business days.



Create an App
Select an App Type:

Select an app type as required by your business to obtain proper API permissions.

Fill in App Information:

Fill in the detailed information about your app, including the callback URL for storing and accessing user information returned by the Platform. This address can be modified later.

Obtain the App Key and App Secret:

Obtain the app key and app secret. They are the unique identifier of your app on the Platform and are required for later API calls.

Request API Permissions:

Request permissions on API calls for your app, so that it can call APIs of the Platform. Your request will be reviewed by a platform admin within three business days.

Configure User Authorization:

Obtain user authorization on the Platform to access data on the platform and perform operations via APIs.

Develop an App:

Learn how to interact with the Platform via APIs. For detailed directions, see the Developer Guide.








Become a Developer
You can register as a developer on the Platform to enable API access and provide apps. First, create a developer account on the Platform as follows.

(1) Visit https://open.taobao.global and click [Register].

(2) Enter your email address and the verification code on the displayed page and click [Send Email].

(3) Click the verification email in your inbox and redirect to the Account Registration page. Note: The verification email may go to the spam folder.

(4) On the Account Registration page, set your password and indicate your consent to the Developer Agreement of the Platform.

(5) Click [Complete].






Register an App
After a developer account is added to the Platform, you can register your app.

Enter the App Creation page.



Request an App Type

After an app type is selected, the system will initialize your app accordingly when it is created. The app type defines app information, including authorization policy, authorization period, API call permissions, and API call restrictions. An app can fall into only one type.



Procedure:

Log in to the Platform and enter the app console.
Click [New] and select an app type.
Click [Request] for the target app type.
Enter your business requirements in the [Reason] column of the app window.
(Optional) Attach a file for your request as needed, which can be a market analysis, business plan, or app design.
Click [OK].
The app type will then enter [Pending] status. Your request will be reviewed by a platform admin within three business days. If the existing app types do not meet your requirements, contact a platform admin.


Create a Developer App

If your app type request is approved, the app type will enter [Valid] status. Then, you can submit detailed information about the request. The procedure is as follows:


Create an app:

In the [Select App Type] step, click [Add App].
Enter the app information, including the app name, callback URL (used for user authorization), and app logo.
Click [Submit].
After the app is successfully added, click [App Overview] in the app list and view app information, including the app name, app secret, type, and status.


Obtain the App Key and App Secret
App key: It is the unique identifier of an app on the Platform and one of the parameters required for an API call.

App secret: It is a secret key allocated to an app by the Platform to ensure the security and reliability of the app source. Keep your app secret confidential and do not share it with a third party.

The app key and app secret will be generated automatically after your app is registered. You can view or reset your app key on the App Preview tab in the app console.



In the app list, click [App Manage] on the row of the target app to enter the App Preview tab.

The app key is displayed directly on this tab.

Click [View] next to [App Secret] to view the app secret.

Click [Reset] to reset it. If [App Secret Expiration Time] is available, select an expiration time (hours) for your app secret.

After the app secret is reset, you must update the app information.

Request API Permissions
On Taobao Global Open Platform (hereinafter called the Platform), an API permission group defines a combination of APIs associated with certain permissions. API calls initiated by an app will be accepted only if an API permission is available.

An app can have multiple API permission groups. For a newly added app, some API permission groups are granted by default, and others need to be requested separately.



An API permission group is in either of the following states:

1.Valid: The API permission group is available as pre-configured or granted as requested.

2.Invalid: The API permission group needs to be requested separately or the request is not approved.

User Authorization
Overview

App development can start after you register your app with the Taobao Global Open Platform. If your app needs to access the business data of a user, you must obtain permissions from the user and guide the user to complete the authorization procedure by using a "Taobao Global account".



The Taobao Global Open Platform uses OAuth 2.0 for user identity authentication and provides different authorization policies for different app types. These policies are pre-defined for the app type to which your app belongs. You can view the authorization policy details of your app on the Authorization Management page. The details include the following content:

Authorization Policy: the overall authorization policy of the app.

[Access Token] period: the validity period of the access token for the app.

[Refresh Token] period: the validity period of the refresh token (for more information, see the OAuth documentation).

Authorization page: specifies whether to display the authorization page (the page is displayed by default).

Authorization protocol: OAuth 2.0.

Users that can perform authorization: the maximum number of users allowed to grant permissions to your app

Note that the following two authorization policies apply to different app types:

Allow bound users to perform authorization: This authorization policy applies to scenarios in which your app is directly connected to an internal app or [Customer Service] scenarios. Only users in the [Authorization User Whitelist] are allowed to grant permissions to your app.

Allow login users to perform authorization: This authorization policy applies to enterprise resource planning (ERP) system-related apps.



Configure the Authorization User Whitelist

If your app is developed for specific users, you can configure a user whitelist on the Taobao Global Open Platform to control the authorization scope, so that only users in the whitelist can authorize your app to access their business data. After your app is published, you need to provide the authorization URL for the users. When the users log in to your app for the first time, the users are prompted to complete the authorization.

Perform the following steps to specify the users who can authorize your app to access their business data:

Go to the [App Console], and choose [App Management] > [Identity Authentication Management].

View the app authorization policy of your app in the [Authorization Information] section.

Enter user accounts in the [Authorization] field of the [Authorization User Whitelist] section. Separate multiple user accounts with the semicolon (;).

Click [Submit].

Note: If you are a third-party developer and your app is open to all users of the Taobao Global Open Platform, you only need to provide the URL of your app for users when your app is published. Then, the users can perform authorization based on the URL. For more information about the authorization procedure, see the "User authorization procedure" section of this topic.



User Authorization Procedure

If your app needs to access the business data, such as commodity and order information, of a user via the Taobao Global Open Platform, you must obtain permission from the user. In other words, you must obtain an access token to access user information. In this case, you need to guide the user to complete the authorization procedure. In the procedure, user identity authentication is performed based on OAuth 2.0.

The Taobao Global Open Platform adopts a [Code for Token] model. Details are as follows:

Server address: https://api.taobao.global/oauth/authorize

Authorization procedure (as shown in the figure below):





Construct the Authorization URL

Follow the rule below to construct the authorization URL and guide users to access the URL.

https://api.taobao.global/oauth/authorize?response_type=code&redirect_uri=${redirect_uri}&force_auth=true&client_id=${appkey}

Note: Replace appkey and redirect_url with your actual app configurations. 

The following table describes the parameters of the authorization URL.

Parameter	Required	Value Description	Description
client_id	Yes	xxx	The app key allocated to your app by the Taobao Global Open Platform.
redirect_url	Yes	The callback URL that is configured when the app is created.	The URL is the code sent to you when the seller completes authorization. The URL must be the same as the callback URL that is specified when you create the app on the Taobao Global Open Platform.
response_type	Yes	code	The authorization type. The value is a code.
force_auth	No	true	Refresh the web browser cookie to obtain a new authorization procedure.
state	No	The value can be customized. Example: 1212	The status of the app, which is the same as that in the request and response.
uuid	No	uuid283118319	The ID allocated to the seller, which can be used to protect the returned authorization code.


Guide sellers to perform authorization

When a user is guided to access the preceding authorization URL in a web browser, an authorization login page appears, as shown in the following figure. The permissions granted to the app by the user are displayed on the left side of the page. The user needs to select a corresponding business platform (not the Taobao Global Open Platform), enter a registered account and password, and then click [Login and Authorize] to complete the authorization.





Obtain the authorization code

After the user completes authorization, the Taobao Global Open Platform returns an authorization code to the callback URL. Your app can obtain an access token based on the authorization code. The callback URL consists of the callback address that you configured and the authorization code.

Example:



Note: The authorization code expires within 30 minutes. Use the authorization code to obtain an access token before its expiration.



Obtain an access token based on the authorization code

Call the operation in the "/auth/token/create" directory to obtain the access token.

Note: The access token is valid within a certain period of time. Before its expiration, there is no need to seek authorization from the user again.



Output parameters (for reference only):

{
  "code": "0",
  "access_token": "50000601c30atpedfgu3LVvik87Ixlsvle3mSoB7701ceb156fPunYZ43GBg",
  "refresh_token": "500016000300bwa2WteaQyfwBMnPxurcA0mXGhQdTt18356663CfcDTYpWoi",
  "account_id": "7063844",
  "user_Id": "1001",
  "account_platform": "seller_center",
  "refresh_expires_in": "60",
  "error_code": "error_code",
  "expires_in": "10",
  "request_id": "0ba2887315178178017221014",
  "seller_Id": "10011",
  "account": "xxx@126.com",
  "short_code": "HK001"
}
The following table lists the token parameters and the token descriptions.

Key		Type	Sample value	Description
access_token	string	50000601c30atpedfgu3LVvik87Ixlsvle3mSoB7701ceb156fPunYZ43GBg	The access token.
refresh_token	string	500016000300bwa2WteaQyfwBMnPxurcA0mXGhQdTt18356663CfcDTYpWoi	The refresh token to be refreshed when the value of "refresh_expires_in" is greater than 0.
expires_in	number	25920 (expires in 25920 seconds)	The validity period of the access token, in days. For an app in the testing state, the validity period is 7 days. For an app in the online state, the validity period is 30 days.
refresh_expires_in	number	25920 (expires in 25920 seconds)	The validity period of the refresh token. For an app in the testing state, the validity period is 30 days. For an app in the online state, the validity period is 180 days.
account_id	string	706388888	The user ID, which can be ignored when "account_platform" is set to "seller_center".
account	string	xxx@126.com	The user account.
account_platform	string	seller_center	The user platform. Multiple platforms are supported.
View the actual validity period:

Note: An app that has not been published (still under test) has a shorter validity period than an online app. Therefore, you must request to publish the app after the development and test, and update the corresponding token strategies. To refresh or extend the validity period of the token, contact the platform admin.

Example (for an app under test):





Token refresh strategy

Call the operation in the"/auth/token/refresh" directory to refresh the access token.



Output parameters (for reference only):

{
  "code": "0",
  "access_token": "50000601c30atpedfgu3LVvik87Ixlsvle3mSoB7701ceb156fPunYZ43GBg",
  "refresh_token": "500016000300bwa2WteaQyfwBMnPxurcA0mXGhQdTt18356663CfcDTYpWoi",
  "account_id": "7063844",
  "user_Id": "1001",
  "account_platform": "seller_center",
  "refresh_expires_in": "60",
  "error_code": "error_code",
  "expires_in": "10",
  "request_id": "0ba2887315178178017221014",
  "seller_Id": "10011",
  "account": "xxx@126.com",
  "short_code": "HK001"
}
The data structure returned by the operation in the "/auth/token/refresh" directory is the same as that returned when an authorization code is used to obtain access permissions. You will obtain a new access token and a new refresh token.

You must save the latest refresh token to obtain a new access token. Note that the validity period of the access token will be reset, but that of the refresh token will not be reset. After the refresh token expires, your app needs to be authorized by users again to obtain a new access token and a new refresh token.



Token validity period

Usage notes:

Before a refresh token expires, there is no need to seek authorization from the user again.

If "refresh_expires_in" is set to 0, the access token cannot be refreshed. You can call the "/auth/token/refresh" operation to refresh the access token only if "refresh_expires_in" is set to a value greater than 0.

We recommend that you refresh the access token one week before its expiration.

If the current validity period of the token has a great impact on the business, contact the platform admin to extend the validity period.

Field	Validity period of an app in the testing state	Validity period of an app in the online state
code	30 minutes	30 minutes
access_token	30 days	30 days
refresh_token	60 days	180 days


API Test Tool
The Taobao Global Open Platform provides an API test tool for you to test APIs on the platform. To start the API test tool, perform the following operations:

Go to the [App Console], find the desired app, and then click [Manage].
On the management page that appears, find and click [API Test Tool] in the left-side navigation pane.
On the API test tool, enter the API name and click [Get Parameters]. The system automatically displays the API parameters.
Note: The API test tool uses real data from the online environment.

The following table describes the parameters.

Parameter	Description	Sample value
API Path	The path of the API to be tested.	/brands/get
HTTP Method	The request method. Most API calls are made by using the GET method, whereas some calls for extra data are made by using the POST method.	GET or POST
App Key	The unique identifier of your app on the Taobao Global Open Platform, which is generated when the app is created.	100126
Access Token	The token that is required when your app attempts to access the sensitive data of the seller.	
Business parameters	The business parameters of the API to be tested.	Different parameter fields are displayed based on the API that you select.
Request	After you specify the parameters, click [Start Test]. Then, the request URL is generated and displayed in the request field.	
Response	The response data of the specified parameters.	

Test an App
No testing environment is available for the moment, and the platform does not allow users to use non-test accounts to access test data. Therefore, if you want to test your app during development, contact the platform admin to borrow a test account. The following example shows you how to borrow a test account of the Taobao Global Distribution Platform:

To do this, provide an authorization URL for the Alibaba customer service representative to perform authorization. Then, use the authorization code that is provided by the representative to generate a token. Subsequently, perform scenario-based tests such as order placement and reverse operations. If you have any questions, contact technical support.



Construct an authorization URL and obtain a code (the test account is authorized by the Alibaba customer service representative)

Follow the rule below to construct the authorization URL (replace appkey and redirect_url with your actual app configurations). Then, send the constructed URL to the Alibaba customer service representative for authorization.

https://api.taobao.global/oauth/authorize?response_type=code&redirect_uri=xxx&force_auth=true&client_id=xxx



List of testable commodities (order placing disallowed in the test for commodities outside the list)

Taobao commodity ID	Commodity ID on the Supply Platform	SKU
673822568257	600126025042468257	4852260841445,4852260841444
672991141190	600126245031041190	5016042822040,5016042822039
669105471437	600124745519971437	4988025539521
666852298083	600123880024398083	4812222941338,4812222941337
666821470073	600129202197070073	4860968496627,4860968496626
{
"error_msg": "[2101144116564048484455584d0793] errorMsg = The test account cannot be used to purchase real commodities."
"data": {},
"success": false,
"error_code": "TEST_ACCOUNT_CAN_NOT_PURCHASE_REAL_PRODUCT",
"code": "0",
"request_id": "2101144116564048484456245"
}



Publish an App
After an app is developed and tested, you can publish the app to a hosting environment.

To publish an app, perform the following operations:

Find the app that you want to publish in the app list and click [Manage]to go to the App Overview page.
Find the [App Status] field in the basic information section on the App Overview page.
Click [Request to Publish].
In the dialog box that appears, enter a description of the app to be published in the [Reason] field.
(Optional) Attach a request file for the app as needed. The file can be an app test report.
Click [OK].
Once the publish request is approved, the app turns into an online state. Then, you can publish the app to the specified hosting environment.


Monitor App Data
After an app is published, you can monitor the statistical data of API calls initiated by the app on the Data Dashboard page.

The statistical data on the page is classified into the following types:

App-specific statistics

Date
Total number of API calls made by the app
Total number of successful calls
Total number of failed calls
Average queries per second (QPS)
User-specific statistics

Date
Seller
Total number of API calls made by the seller
Average queries per second (QPS)
Error code statistics

API name
Error type
Error code
Error message
Total number of occurrences for each error


Make API Calls by Using the Official SDK
An SDK is automatically generated for your app. The SDK provides features such as request combination, signature generation and encryption, response parsing, and information monitoring. It is easy and simple to make API calls by using the SDK. We recommend that you use the official SDK to make API calls.

Environment requirements:

- SDK for Java: Java SE/EE 1.5 or later

- SDK for .NET: .Net framework 2.0 or later (Windows Phone platform not supported)

- SDK for PHP: PHP 5 or later

- SDK for Python: Python 3.0 or later

- SDK for Ruby: not limited



Download the SDK

Before you download the SDK, register a developer account with the Taobao Global Open Platform and log in with the developer account. The downloaded SDK is directly associated with your app.

Perform the following steps to download an SDK for your app:

- Log in to the Taobao Global Open Platform and click App Console.

- In the app list, find the app that you want to manage and click [Manage]to go to the App Overview page.

- On the app management navigation page, click [SDK Download].

- Click [Download] to download the SDK for a specific programming language.



Change the request server

Before you use the SDK, change the request server to https://api.taobao.global/rest.



Sample code




Error Codes
Each API call returns a value. The value indicates the operation status (successful or failed). In addition, results and/or detailed information of a specified API call may also be returned.

When an API call fails, the system returns the request ID and error code. Common API call errors are classified into the following three types:

SYSTEM: API platform error
ISV: business data error
ISP: backend service error


API platform errors (system errors)

API platform errors usually occur because the request from a user does not complete the basic verification. When you encounter such errors, check the authorization, frequency, and other conditions of the apps. Then, check the uploaded parameters for completeness and validity based on the API documentation.

Business data errors (ISV errors)

These errors are the results of a business logic error. Business data errors are likely to occur if you do not follow certain business rules (such as product creation rules and platform policy rules) configured by the Lazada Platform.

When you encounter such errors, read the error message and check whether the corresponding information is uploaded. We recommend that you try again after these errors are corrected. If you continue to receive the error messages after error correction, troubleshoot the causes through Lazada Partner Seller Support.

Backend service errors (ISP errors)

Backend service errors usually occur because the API service is unavailable. Wait for a while, and try again. If the errors still occur, contact the technical support team.









Make API Calls Through HTTP Requests
Call procedure

You can construct API requests in a custom format based on the Taobao Global Open Platform Agreement. This is applicable only if no official SDK in a corresponding programming language is provided. This topic describes how to construct an HTTP request.

To call an API operation, you need to set request parameters for the operation. After the operation is called, response parameters are returned. The following procedure shows you how to generate an HTTP request to make an API call:

	Set parameters.
	Generate a signature based on an encryption algorithm.
	Construct an HTTP request.
	Initiate the HTTP request.
	Obtain an HTTP response.
	Parse the JSON/SML response.
For more information about how to make API calls on the Taobao Global Open Platform, see the API tutorial.



Request URL

The Taobao Global Open Platform provides an online production environment. All materials generated in this environment are authentic and valid. You can call API operations in this environment for a limited number of times. This production environment shares data with the online system. Exercise caution when you call API operations because the operations directly affect the real data online.

Request URL: https://api.taobao.global/rest 



Request and response

APIs on the Taobao Global Open Platform support both the HTTP and HTTPS protocols. For data security, we recommend that you send API requests over the HTTPS protocol. Although most API operations are called by using the GET method, sometimes more data than what can be transmitted in the request parameters is needed. In most cases, extra data is sent to the server through POST requests. The requested data must be in the XML format, and all the data (including parameter names and values) must be UTF-8 encoded.

Each HTTP request URL must contain the path information of the API request. For example, the request URL of the /order/get operation is: https://api.taobao.global/rest/order/get. Common parameters and business information must be included in the request or sent by using the POST method.

Each API call returns a response. The response indicates the operation status (successful or failed). In addition, the response may provide results and/or detailed information of the specified operation. The response is returned in the JSON format.



Request parameters

In addition to application-related parameters, an API request must contain system parameters. Application-specific parameters vary with API operations.

System parameters

Each HTTP request must contain system parameters. The following table describes the system parameters.

Parameter	Type	Required	Description
app_key	String	Yes	The app key allocated to the app.
access_token	String	Conditional	The seller authorization token. This is required for an API request that needs to be authorized by the seller.
timestamp	String	Yes	The time when the request was sent, in the UTC or digit format. Example: 2018-11-11T12:00:00Z or 1517886554000. Note that the difference between the timestamp and the UTC time cannot exceed 7,200 seconds.
sign_method	String	Yes	The encryption algorithm used to generate a signature.
sign	String	Yes	The signature for request verification.


Business-related parameters

In addition to the required system parameters, an API request must contain business-related parameters. For more information about the business-related parameters for each API operation, see the related API documentation.



Signature

The Taobao Global Open Platform performs identity authentication on each API request, and the server also verifies the validity of request parameters. Therefore, each HTTP request must contain signature information. A request without a valid signature will be rejected.

The Taobao Global Open Platform performs identity authentication on each request based on the app key and the secret key that is allocated to an app. The app secret is used to generate a signature string when an HTTP request is sent to the server.

Acquaint yourself with the following signature algorithm if you prefer to write an HTTP request instead of using the official SDK.

The process of signature generation is as follows:

All request parameters are sorted based on the parameter names in the ASCII table. These parameters include system parameters and app-related parameters, but exclude symbols and parameters of the ARRAY type.

Before sort:

foo=1, bar=2, foo_bar=3, foobar=4

After sort:

bar=2, foo=1, foo_bar=3, foobar=4

The sorted parameters and their values are concatenated to form a string. Example:　bar2foo1foo_bar3foobar4

The API name is added to the beginning of the concatenated string. Example of adding the API name of : “/test/api”:/test/apibar2foo1foo_bar3foobar4.

The string is encoded in UTF-8, and hashed based on the HMAC-SHA256 signature algorithm to generate a digest. Example:　hmac_sha256(/test/apibar2foo1foo_bar3foobar4)

The digest is converted into the hexadecimal format. Example:　hex("helloworld".getBytes("utf-8")) = "68656C6C6F776F726C64"

Sample code for Java:

/**
* Sign the API request with body.
*/
public static String signApiRequest(Map<String, String> params, String body, String appSecret, String signMethod, String apiName) throws IOException {
// first: sort all text parameters
String[] keys = params.keySet().toArray(new String[0]);
Arrays.sort(keys);

// second: connect all text parameters with key and value
StringBuilder query = new StringBuilder();
query.append(apiName);
for (String key : keys) {
String value = params.get(key);
if (areNotEmpty(key, value)) {
query.append(key).append(value);
}
}

// third：put the body to the end
if (body != null) {
query.append(body);
}

// next : sign the whole request
byte[] bytes = null;

if(signMethod.equals(Constants.SIGN_METHOD_HMAC)) {
bytes = encryptWithHmac(query.toString(), appSecret);
} else if(signMethod.equals(Constants.SIGN_METHOD_SHA256)) {
bytes = encryptHMACSHA256(query.toString(), appSecret);
}

// finally : transfer sign result from binary to upper hex string
return byte2hex(bytes);
}

private static byte[] encryptHMACSHA256(String data, String secret) throws IOException {
byte[] bytes = null;
try {
SecretKey secretKey = new SecretKeySpec(secret.getBytes(Constants.CHARSET_UTF8), Constants.SIGN_METHOD_HMAC_SHA256);
Mac mac = Mac.getInstance(secretKey.getAlgorithm());
mac.init(secretKey);
bytes = mac.doFinal(data.getBytes(Constants.CHARSET_UTF8));
} catch (GeneralSecurityException gse) {
throw new IOException(gse.toString());
}
return bytes;
}

/**
* Transfer binary array to HEX string.
*/
public static String byte2hex(byte[] bytes) {
StringBuilder sign = new StringBuilder();
for (int i = 0; i < bytes.length; i++) {
String hex = Integer.toHexString(bytes[i] & 0xFF);
if (hex.length() == 1) {
sign.append("0");
}
sign.append(hex.toUpperCase());
}
return sign.toString();
}
Sample code for C#:

public static string SignRequest(IDictionary<string, string> parameters, string body, string appSecret, string signMethod, string apiName)
{
// first : sort all key with asci order
IDictionary<string, string> sortedParams = new SortedDictionary<string, string>(parameters, StringComparer.Ordinal);

// second : contact all params with key order
StringBuilder query = new StringBuilder();
query.Append(apiName);
foreach (KeyValuePair<string, string> kv in sortedParams)
{
if (!string.IsNullOrEmpty(kv.Key) && !string.IsNullOrEmpty(kv.Value))
{
query.Append(kv.Key).Append(kv.Value);
}
}

// third : add body to last
if (!string.IsNullOrEmpty(body))
{
query.Append(body);
}

// next : sign the string
byte[] bytes = null;
if (signMethod.Equals(Constants.SIGN_METHOD_SHA256))
{
HMACSHA256 sha256 = new HMACSHA256(Encoding.UTF8.GetBytes(appSecret));
bytes = sha256.ComputeHash(Encoding.UTF8.GetBytes(query.ToString()));
}

// finally : transfer binary byte to hex string
StringBuilder result = new StringBuilder();
for (int i = 0; i < bytes.Length; i++)
{
result.Append(bytes[i].ToString("X2"));
}

return result.ToString();
}
Sample code for Python:

def sign(secret,api, parameters):
#===========================================================================
# @param secret
# @param parameters
#===========================================================================
sort_dict = sorted(parameters)

parameters_str = "%s%s" % (api,
str().join('%s%s' % (key, parameters[key]) for key in sort_dict))

h = hmac.new(secret.encode(encoding="utf-8"), parameters_str.encode(encoding="utf-8"), digestmod=hashlib.sha256)
return h.hexdigest().upper()
For more information about sample code for signature generation in other programming languages, see the original code of the official SDK.



HTTP 请求样例
以 /product/get接口的API请求为例，组成HTTP请求的步骤如下：

Sample HTTP request

The following example shows how to construct an HTTP request for the /product/get operation:

Step 1: Set basic parameters.

Common parameters:

app_key = “000000”
access_token = “test”
timestamp = “1517820392000”
sign_method = “sha256”
Business parameters:

item_id= “676648141230”


Step 2: Sort all parameters and values based on the parameter names in the ASCII table.

access_token = “test”
app_key = “000000”
item_id = “676648141230”
sign_method = “sha256”
timestamp = “1517820392000”


Step 3: Concatenate the sorted parameters and their values to form a string.

access_tokentestapp_key000000item_id676648141230sign_methodsha256timestamp1517820392000



Step 4: Add the API name to the beginning of the concatenated string.

/product/getaccess_tokentestapp_key000000item_id676648141230sign_methodsha256timestamp1517820392000



Step 5: Use the encryption algorithm to generate a signature.

If AppSecret = helloworld, the generated signature is: 

hex(sha256(/product/getaccess_tokentestapp_key000000item_id676648141230sign_methodsha256timestamp1517820392000))=4190D32361CFB9581350222F345CB77F3B19F0E31D162316848A2C1FFD5FAB4A



Step 6: Construct the HTTP request.

Encode all parameters and values in the UTF-8 format based on the [sign] parameter. The parameters can be arranged in a random order.

http://api.taobao.global/rest/order/get?app_key=000000&access_token=test&timestamp=1517820392000&sign_method=sha256&item_id=676648141230&sign=4190D32361CFB9581350222F345CB77F3B19F0E31D162316848A2C1FFD5FAB4A



Step 7: Obtain a response to the request.

response = {"data":{"quantity":600,"mp_id":"600130437909441230","item_id":676648141230,"item_type":"WITHOUT_MATERIAL","begin_amount":0,"shop_name":"Singor4","title":"printed drawstring shorts","user_nick":" Xingxingxiangxi00","promotion_price":18800,"shop_id":36564296,"price":18800,"sku_list":[{"mp_skuId":4871614981760,"quantity":200,"price":18800,"postFee":800,"sku_id":4859054248495,"pic_url":"https://img.alicdn.com/bao/uploaded/i3/141330460/O1CN010dQVtm1FGix4S9yll_!!141330460.jpg","properties":[{"prop_name":" color","prop_id":1627207,"value_id":28338,"value_name":"blue"},{"prop_name":"size","prop_id":20518,"value_id":27432,"value_name":"1"}],"promotion_price":18800,"status":"active"},{"mp_skuId":4871614981761,"quantity":200,"price":18800,"postFee":800,"sku_id":4859054248496,"pic_url":"https://img.alicdn.com/bao/uploaded/i3/141330460/O1CN010dQVtm1FGix4S9yll_!!141330460.jpg","properties":[{"prop_name":" color","prop_id":1627207,"value_id":28338,"value_name":" blue"},{"prop_name":" size","prop_id":20518,"value_id":22027,"value_name":"2"}],"promotion_price":18800,"status":"active"},{"mp_skuId":4871614981762,"quantity":200,"price":18800,"postFee":800,"sku_id":4859054248497,"pic_url":"https://img.alicdn.com/bao/uploaded/i3/141330460/O1CN010dQVtm1FGix4S9yll_!!141330460.jpg","properties":[{"prop_name":" color","prop_id":1627207,"value_id":28338,"value_name":"blue"},{"prop_name":"size","prop_id":20518,"value_id":27433,"value_name":"3"}],"promotion_price":18800,"status":"active"}],"status":"active"},"success":true,"code":"0","request_id":"2101144116576106138264400"}




Message Service
Message Subscription
The message service is an active push service provided by Taobao Global Open Platform to enhance efficiency. The push content includes messages related to account authorization, commodities, orders, and reverse operations. Based on the push service, an app does not need to pool APIs to retrieve distribution data. When the business data corresponding to the app changes, Taobao Global Open Platform actively pushes business content to the independent service vendor (ISV). The ISV only needs to subscribe to the messages in advance. In addition, the ISV can parse the message content. Note that the order of messages cannot be ensured. Therefore, you need to call query operations provided by OpenAPI for specific messages for data synchronization. Message subscription can effectively reduce the frequency of API calls and system pressure.



Subscription Procedure

Location: App Console on Taobao Global Open Platform-Application Details-Message Service

Procedure: You can configure a callback URL on the Taobao Global Open Platform to receive message requests.

Log in to the Taobao Global Open Platform as a developer.
Click [App Console].
Click [Manage] to the right of the app list.
Click [Message service].
Specify the callback URL, and click [Verify]. If the HTTP 200 status code is returned, the system prompts that the verification is successful.
Select the types of messages to which you want to subscribe from the list.
Click [Save].



Data Format

Sample message template in the JSON format 

{
"seller_id": "2100004250000",
"message_type": 11,
"data": {
"mp_id": "2048212708534489",
"status": "ON"
},
"timestamp": 1686646893,
"site": "taobao_hk"
}
Description of Template Fields

Field

Type

Description

Sample Value

seller_id

String

The account ID of the distributor.

2100004250000

message_type

Number

The message type.

Refer to the list of message categories.

data

String

The specific business message data to be pushed, in the JSON format. For more information about fields in the message data, refer to the descriptions of business messages.

{"key1":" value1"}

timestamp

String

The timestamp for message pushing.

1686646893

site

String

The tenant site. This field can be ignored.

taobao_hk


Mechanisms

Callback URL

Description: You need to specify an address to receive messages pushed through HTTP POST requests.

When you use the message service, you must configure a callback URL to receive messages. Make sure that the following requirements are met:

The callback URL uses the HTTPS protocol.

The certificate is issued by a certificate authority (CA) at the organization validation (OV) or extended validation (EV) level.

When a message is received, the HTTP 200 status code is returned to confirm the reception of the message.



Retry and compensation mechanisms

If the server does not receive the HTTP 200 status code within 200 ms, the server considers that the message push failed.

Half an hour later the failure, the server attempts to push the message again for a maximum of 12 times.

If the system interruption continues after 12 retry attempts, call a corresponding query operation to retrieve data again.



Signature

Description: Data is transmitted in plaintext. For security purposes, Taobao Global Open Platform signs the digest of the request body. The generated signature is included in the Authorization field in the header of the POST request.

# Request signature parameters

Base = "{your_app_key}" + "{message_body_you_receieved}"

Secret = "{your_app_Secret}"

# Signature algorithm

HMAC-SHA256

# Signature generation

Authorization = HEX_ENCODE(HMAC-SHA256(Base, Secret));

Sample code for generating a signature in the Java format:

# Message body
{
"seller_id":" 1234567", # The seller ID.
"message_type":0,
  "data":{
     "order_status":" unpaid", # The order status.
     "trade_order_id":" 260422900198363", # The ID of the main order.
     "trade_order_line_id":" 260422900298363", # The ID of the sub order.
     "status_update_time":1603698638 # The timestamp at which the order status was updated.
  },
  "timestamp":1603766859530, # The timestamp at which the message was pushed.
  "site":" lazada_vn" # The site information.
}
Sample message:

POST /example/uri HTTP/1.1


# The headers of the HTTP request.
Host: www.example.com
Content-Type: application/json
Content-Length: 1238


# Taobao Global Open Platform signs the digest.
Authorization: 34f7b258df045d4ed9341850ca85b866f34828fd7d51862f11137216294a894c


# The body of the HTTP request.
{
"seller_id": "2100004250000", # The ID of the distributor.
"message_type": 18, #The message type.
"data": {
"mp_id": "2048212708534489",The ID of the commodity for distribution.
"action": "BIND" #The operation type. In this case, the operation type is commodity binding.
},
"timestamp": 1686647231, #The timestamp for message pushing.
"site": "taobao_hk" # The site. This field can be ignored.


Usage Notes

After you receive a message, perform signature verification to prevent external attacks. For more information about the signature verification method, see Section 1.3. Do not convert or modify the original message body during signature verification. Otherwise, inconsistency may arise in signature comparison.

The response time of an operation called on the Taobao Global Open Platform cannot exceed 200 ms. After a message is received, the message can be stored in an asynchronous queue for business processing, and the HTTP 200 status code is returned.




Product
Product messages are available only for distributors but not agents.

Legacy messages are no longer maintained and will be deactivated gradually. Subscribe to new product messages.



The order of messages cannot be ensured. Therefore, you need to call the product details API before any further processing.



Product selection and distribution

Message type: message_type=18

Scenario: A distributor or platform operator performs or cancels distribution on Taobao Global Distribution Platform.

Sample message:

{ "seller_id": "2100004250000", "message_type": 18, "data": { "mp_id": "2048212708534489", "action": "BIND" }, "timestamp": 1686647231, "site": "taobao_hk"}

Field description

Field	Type	Description	Sample Value
mp_id	String	The ID of the product on Taobao Global Distribution Platform.	2048196206207634
action	String	Operation type.	"BIND": distribution; "UNBIND": distribution cancellation.


Product status update

Message type: message_type=11

Scenario: A distributed product is listed/delisted/deleted.

Sample message:

{ "seller_id": "2100004250000", "message_type": 11, "data": { "mp_id": "2048212708534489", "status": "ON" }, "timestamp": 1686646893, "site": "taobao_hk"}



Field description

Field	Type	Description	Sample Value
mp_id	String	The ID of the product on Taobao Global Distribution Platform.	2048196206207634
status	String	Product status.	status="ON" listed (salable); status="OFF" delisted (unsalable); status="DELETED" deleted (unsalable).


Product information update

Message type: message_type=13

Scenario: The information of a distributed product is edited or published, including the title, description, and image.

Sample message:

{ "seller_id": "2100004250000", "message_type": 13, "data": { "mp_id": "2048196206207634", "update_fields": [ "ITEM_IMG" ] }, "timestamp": 1686646939, "site": "taobao_hk"}



Field description

Field	Type	Description	Sample Value
mp_id	String	The ID of the product on Taobao Global Distribution Platform.	2048196206207634
update_fields	
String[]	Product update fields. "ITEM_TITLE": product title; "ITEM_DESC": product description; "ITEM_IMG": product image.


Product price update

Message type: message_type=15

Scenario: The price of a distributed product is modified.

Sample message:

{ "seller_id": "2100004250000", "message_type": 15, "data": { "mp_id": "2048195498077245", "distributor_id": "2100004250000" }, "timestamp": 1686646990, "site": "taobao_hk"}



Field description

Field	Type	Description	Sample Value
mp_id	String	The ID of the product on Taobao Global Distribution Platform.	2048196206207634
distributor_id	String	The account ID of the distributor.	2100004250000


Inventory update

Message type: message_type=16

Scenario: The inventory of distributed products is updated.

Sample message:

{ "seller_id": "2100004250000", "message_type": 16, "data": { "mp_id": "2048212708534489", }, "timestamp": 1686647024, "site": "taobao_hk"}

Field description

Field	Type	Description	Sample Value
mp_id	String	The ID of the product on Taobao Global Distribution Platform.	2048196206207634


SKU status update

Message type: message_type=14

Scenario: The SKU of a distributed product is edited/published/added/deleted.

Sample message:

{ "seller_id": "2100004250000", "message_type": 14, "data": { "mp_id": "2048212708534489", "sku_id": "4890015831257", "status": "ADDED" }, "timestamp": 1686647153, "site": "taobao_hk"}



Field description

Field	Type	Description	Sample Value
mp_id	String	The ID of the product on Taobao Global Distribution Platform.	2048212708534489
sku_id	String	The SKU of the product on Taobao Global Distribution Platform.	4890015831257
status	String	Operation status.	"ADDED": added; "DELETED": deleted.


SKU update

Message type: message_type=17

Scenario: The SKU of a distributed product is edited/published, including the SKU image or description.

Sample message:

{ "seller_id": "2100004250000", "message_type": 17, "data": { "mp_id": "2048212708534489", "skus": [ { "sku_id": "4873649155289", "update_fields": [ "SKU_IMG", "SKU_ALIAS" ] }, { "sku_id": "4873649178841", "update_fields": [ "SKU_IMG", "SKU_ALIAS" ] } ] }, "timestamp": 1686647187, "site": "taobao_hk"}



Field description

Field	Type	Description	Sample Value
mp_id	String	The ID of the product on Taobao Global Distribution Platform.	2048212708534489
skus	Object[]	sku_id: the SKU of the product on Taobao Global Distribution Platform.	update_fields: updated fields of the SKU; update_fields: field list; "SKU_IMG": SKU image; "SKU_ALIAS": SKU description.





Order
The order of messages cannot be ensured. Therefore, you need to call the order query API before any further processing.



Order status update

Message type: message_type=3

Scenario: The status of the purchase order on Taobao Global Distribution Platform is updated, which can be Pending Payment, Pending Delivery, Dispatched, or Closed.

Sample message:

{ "seller_id": "2100000927014", "message_type": 3, "data": { "business_time": 1650939687564, "outer_purchase_id": "FY20220426002", "purchase_id": 200002638011, "seller_id": 2100000927014, "sku_list": [ { "item_id": 600123256363335000, "logistic_company_name": "SF Express", "logistic_number": "SF4548527307631", "order_line_no": "1", "sku_id": 4808332513272, "status": "WAIT_BUYER_CONFIRM_GOODS" } ], "status": "WAIT_SELLER_SEND_GOODS" }, "timestamp": 1650939687, "site": "taobao_hk"}



Field description

Field	Type	Description	Sample Value
business_time	Number	Status update time.	1650939687564
outer_purchase_id	String	The purchase order number of the ISV.	FY20220426002
purchase_id	Number	The ID of the purchase order on Taobao Global Distribution Platform.	200002638011
seller_id	Number	Distributor ID.	2100000927014
sku_list	Object[]	"item_id": the ID of the product on Taobao Global Distribution Platform.	"logistic_company_name": logistics company name; "logistic_number": tracking number; "order_line_no": the purchase sub-order number of the ISV; "sku_id": the ID of the product on Taobao Global Distribution Platform; "status": the status of the purchase sub-order; the list of products in the sub-order.
status	String	Purchase order status.	For more information, see the status list below.


Valid values of the purchase order status:

Purchase order status.	Description
BULIDING	Creating
WAIT_BUYER_P	Pending Payment
WAIT_SELLER_SEND_GOODS	Pending Delivery
WAIT_BUYER_CONFIRM_GOODS	Dispatched
TRADE_CLOSED	Closed


Order price modification

Message type: message_type=8

Scenario: After an order is created, the customer contacts the Taobao seller for price modification. After the price is modified successfully, a message will be sent to the distributor.

Note that the price cannot be modified if the payment has been made.

Sample message:

{ "seller_id": "2100000927014", "message_type": 8, "data": { "features": {}, "salesOrderId": "500000-GSP2021031415594", "salesSellerId": 2100000927014, "purchaseMarket": "PANAMA", "purchaseOrderId": 200002372069, "purchaseOrderPriceDTO": { "purchaseCurrency": "CNY", "purchaseTotalFee": 1, "purchaseProductFee": 1, "purchaseShippingFee": 0 }, "purchaseOrderLinePriceChangeMessageDTOList": [ { "features": {}, "salesOrderLineIdList": [ "1" ], "purchaseOrderLineId": 200002372070, "purchaseOrderItemPriceDTO": { "purchaseCurrency": "CNY", "purchaseTotalFee": 1, "purchaseProductFee": 1, "purchaseProductUnitFee": 1, "purchaseShippingFee": 0 }, "bizFeatures": {} } ], "actionTime": 1647306796326, "bizFeatures": { "appKey": "500000", "orderSource": "taobao", "purchase_warehouse_address": "{\"city\":\"Guangzhou\",\"country\":\"China\",\"detailAddress\":\"3 Changxing Industrial Road, Paiya Logistics, Third Economic Cooperative, Changyaoling Village, Zhongluotan Town\",\"district\":\"Baiyun District\",\"divisionId\":\"440111108\",\"mobile\":\"18500176747\",\"name\":\"Li Aozhou\",\"phone\":\"\",\"state\":\"Guangdong Province \"}", "sellerOrderNumber": "-" } }, "timestamp": 1647306796, "site": "taobao_hk"} 



Field description

Field	Type	Description	Sample Value
salesOrderId	String	The purchase order number of the ISV.	500000-GSP2021031415594
salesSellerId	Number	Distributor ID.	2100000927014
purchaseOrderId	Number	The ID of the purchase order on Taobao Global Distribution Platform.	200002372069
purchaseOrderLineId	Number	The ID of the purchase sub-order on Taobao Global Distribution Platform.	200002372070


Notes on price modification:

You can apply for a price modification after creating an order but cannot do so if the payment has been made.

Not all products support price modification.

Some orders on Taobao Global Distribution Platform are closed within a short period of time, for example, 30 minutes. If such an order is not paid before it is closed, a new order will be generated, and you need to apply for price modification for the new order, as the previous order for which the price has been modified is closed. If you have any questions, contact the technical personnel.



Refund
The order of messages cannot be ensured. Therefore, you need to call the refund order details API before any further processing.



Refund order or message synchronization

Message type: message_type=9

Scenario: If the status of a refund order is updated, such as the seller agrees to the refund/return, a message will be sent to the distributor. Similarly, if there is a new message (seller's message) or update (to the image in the message), a message will be sent to the distributor. Then, the distributor needs to synchronize the data to Taobao Global Distribution Platform.

Sample message:

{ "seller_id": "2100000927014", "message_type": 9, "data": { "sellerId": 2100000927014, "messageType": 2, "refundId": 110000312001, "businessTime": 1652266980661, "purchaseOrderId": 2608284132117736161 }, "timestamp": 1652266980, "site": "taobao_hk"}

Field description

Field	Type	Description	Sample Value
sellerId	Number	Distributor ID.	2100000927014
messageType	Number	The type of the refund message, which is different from message_type.	1: refund order synchronization; 2: message synchronization.
refundId	Number	Refund order ID.	110000312001
businessTime	Number	Message sending timestamp.	1652266980
purchaseOrderId	Number	The ID of the order on Taobao Global Distribution Platform.	2608284132117736161





Fulfillment
You don't need to subscribe to fulfillment messages for Chinese delivery addresses.



Common messages for international fulfillment (messages regarding prohibited and restricted items)

Message type: message_type=23

Scenario: If some items are considered restricted or prohibited to ship (for example, liquids and batteries) and affect fulfillment, a message regarding prohibited and restricted items will be sent to the distributor, who needs to go through the refund process to end the order.

Sample message:

{"seller_id":"2100000927014","message_type":23,"data":{"outerPurchaseId":"xxxx","purchaseId":200020416005,"purchaseLines":[{"logisticNumbers":[{"consignTime":1690968022000,"lpNumber":"LP00590951846613","trackingNumber":"4201111192612909900774583257396847"}],"purchaseLineId":200020416006,"supplyChainServiceOrderIds":[{"detailErrorCode":"COSMETICS","detailErrorMessage":"Cosmetics","errorCode":"B-12-10-110","errorMessage":" prohibited and restricted. ","price":{"amount":1,"currency":"CNY"},"serviceId":354,"serviceName":"###Test product for Panama logistics-Test product, no order placement-2","serviceType":"LOGISTICS","ssoOrderItemId":3459590786750736161,"status":"CANCELLED"},{"detailErrorCode":"COSMETICS","detailErrorMessage":"Cosmetics","errorCode":"B-12-10-110","errorMessage":" prohibited and restricted. ","price":{"amount":1,"currency":"CNY"},"serviceId":356,"serviceName":"[Warehouse] Test product for Panama logistics, no order placement. ","serviceType":"QUALITY_INSPECTION","ssoOrderItemId":3459590786751736161,"status":"CANCELLED"},{"detailErrorCode":"COSMETICS","detailErrorMessage":"Cosmetics","errorCode":"B-12-10-110","errorMessage":" prohibited and restricted. ","price":{"amount":1,"currency":"CNY"},"serviceId":357,"serviceName":"[Advanced quality inspection] Test product for Panama logistics, no order placement.","serviceType":"ADVANCED_QUALITY_INSPECTION","ssoOrderItemId":3459590786752736161,"status":"CANCELLED"}]}],"sellerId":2100000927014,"fulfillmentType":"order.fulfil.logistics.blocked"},"timestamp":1693380050,"site":"taobao_hk"}



The data field in the message body is as structured below:

Field	Type	Description
sellerId	Number	Distributor ID.
purchaseId	Number	Purchase order ID.
outerPurchaseId	Number	The purchase order number of the ISV.
purchaseLines	List<PurchaseLine>	The list of purchase sub-orders.
fulfillmentType	String	International fulfillment message types (For more information, see the enumerations in the Appendix.)


The PurchaseLine field is as structured below:

Field	Type	Description
purchaseLineId	Number	The number of the purchase sub-order.
supplyChainServiceOrderIds	List<SupplyChainServiceOrder>	The list of orders of the logistics service.
logisticNumbers	List<PackageInfo>	International tracking number.


The SupplyChainServiceOrder field is as structured below:

Field	Type	Description
ssoOrderItemId	Number	The ID of the logistics service sub-order.
serviceType	String	The type of the logistics service.
status	String	The status of the logistics service order.
serviceId	Long	Service ID.
serviceName	String	Service name.
price	Money	Price.
errorMessage	String	Error message.
errorCode	String	Error code.
detailErrorCode	String	The details of the error code.
detailErrorMessage	String	The details of the error message.


The PackageInfo field is as structured below:

Field	Type	Description
consignTime	Long	Delivery time.
trackingNumber	String	International tracking number.
lpNumber	String	Tracking number.


Common messages for international fulfillment (rerouting in the international logistics service: tracking number change)

Message type: message_type=23

Scenario: In international fulfillment, some products will be routed to another transport channel, in which case the international tracking number changes. Then, a rerouting message will be sent to the distributor, who needs to query the supply chain tracking number and update the international tracking number.

Sample message:

{"seller_id":"2100000927014","message_type":23,"data":{"outerPurchaseId":"xxxx","purchaseId":200020416005,"fulfillmentType":"order.fulfil.logistics.change","purchaseLines":[{"logisticNumbers":[{"consignTime":1690968022000,"lpNumber":"LP00590951846613","trackingNumber":"4201111192612909900774583257396847"}],"purchaseLineId":200020416006,"supplyChainServiceOrderIds":[{"price":{"amount":1,"currency":"CNY"},"serviceId":354,"serviceName":"###Test product for Panama logistics-Test product, no order placement-2","serviceType":"LOGISTICS","ssoOrderItemId":3459590786750736161,"status":"WAREHOUSE_OUTBOUND"},{"price":{"amount":1,"currency":"CNY"},"serviceId":356,"serviceName":"[Warehouse] Test product for Panama logistics, no order placement. ","serviceType":"QUALITY_INSPECTION","ssoOrderItemId":3459590786751736161,"status":"WAREHOUSE_OUTBOUND"},{"price":{"amount":1,"currency":"CNY"},"serviceId":357,"serviceName":"[Advanced quality inspection] Test product for Panama logistics, no order placement.","serviceType":"ADVANCED_QUALITY_INSPECTION","ssoOrderItemId":3459590786752736161,"status":"WAREHOUSE_OUTBOUND"}]}],"sellerId":2100000927014},"timestamp":1693380050,"site":"taobao_hk"}



The data field in the message body is as structured below:

Field	Type	Description
sellerId	Number	Distributor ID.
purchaseId	Number	Purchase order ID.
outerPurchaseId	Number	The purchase order number of the ISV.
purchaseLines	List<PurchaseLine>	The list of purchase sub-orders.
fulfillmentType	String	International fulfillment message types (For more information, see the enumerations in the Appendix.)
The PurchaseLine field is as structured below:

Field	Type	Description
purchaseLineId	Number	The number of the purchase sub-order.
supplyChainServiceOrderIds	List<SupplyChainServiceOrder>	The list of orders of the logistics service.
logisticNumbers	List<PackageInfo>	International tracking number.
The SupplyChainServiceOrder field is as structured below:

Field	Type	Description
ssoOrderItemId	Number	The ID of the logistics service sub-order.
serviceType	String	The type of the logistics service.
status	String	The status of the logistics service order.
serviceId	Long	Service ID.
serviceName	String	Service name.
price	Money	Price.
The PackageInfo field is as structured below:

Field	Type	Description
consignTime	Long	Delivery time.
trackingNumber	String	International tracking number.
lpNumber	String	Tracking number.


Common messages for international fulfillment (messages indicating the international tracking number)

Message type: message_type=23

Scenario: In international fulfillment, after the domestic merchant delivers, the international logistics service provider accepts the order. If there is no abnormality, an international tracking number is generated, and a corresponding message will be sent to the distributor, who needs to query the order and update the international tracking number.

Sample message:

{"seller_id":"2100000927014","message_type":23,"data":{"outerPurchaseId":"xxxx","purchaseId":200020416005,"fulfillmentType":"order.fulfil.order.mailno","purchaseLines":[{"logisticNumbers":[{"consignTime":1690968022000,"lpNumber":"LP00590951846613","trackingNumber":"4201111192612909900774583257396847"}],"purchaseLineId":200020416006,"supplyChainServiceOrderIds":[{"price":{"amount":1,"currency":"CNY"},"serviceId":354,"serviceName":"###Test product for Panama logistics-Test product, no order placement-2","serviceType":"LOGISTICS","ssoOrderItemId":3459590786750736161,"status":"WAREHOUSE_OUTBOUND"},{"price":{"amount":1,"currency":"CNY"},"serviceId":356,"serviceName":"[Warehouse] Test product for Panama logistics, no order placement. ","serviceType":"QUALITY_INSPECTION","ssoOrderItemId":3459590786751736161,"status":"WAREHOUSE_OUTBOUND"},{"price":{"amount":1,"currency":"CNY"},"serviceId":357,"serviceName":"[Advanced quality inspection] Test product for Panama logistics, no order placement.","serviceType":"ADVANCED_QUALITY_INSPECTION","ssoOrderItemId":3459590786752736161,"status":"WAREHOUSE_OUTBOUND"}]}],"sellerId":2100000927014},"timestamp":1693380050,"site":"taobao_hk"}

The data field in the message body is as structured below:

Field	Type	Description
sellerId	Number	Distributor ID.
purchaseId	Number	Purchase order ID.
outerPurchaseId	Number	The purchase order number of the ISV.
purchaseLines	List<PurchaseLine>	The list of purchase sub-orders.
fulfillmentType	String	International fulfillment message types (For more information, see the enumerations in the Appendix.)
The PurchaseLine field is as structured below:

Field	Type	Description
purchaseLineId	Number	The number of the purchase sub-order.
supplyChainServiceOrderIds	List<SupplyChainServiceOrder>	The list of orders of the logistics service.
logisticNumbers	List<PackageInfo>	International tracking number.
The SupplyChainServiceOrder field is as structured below:

Field	Type	Description
ssoOrderItemId	Number	The ID of the logistics service sub-order.
serviceType	String	The type of the logistics service.
status	String	The status of the logistics service order.
serviceId	Long	Service ID.
serviceName	String	Service name.
price	Money	Price.
The PackageInfo field is as structured below:

Field	Type	Description
consignTime	Long	Delivery time.
trackingNumber	String	International tracking number.
lpNumber	String	Tracking number.


Appendix

FulfillmentType Enumerations (International Fulfillment Messages)

Enumeration	Description
order.fulfil.logistics.blocked	Fulfillment anomaly.
order.fulfil.logistics.change	Rerouting.
order.fulfil.order.mailno	Sending the message indicating the international tracking number.






Offline Store Exhibition Product Change Notification
This message does not guarantee the order in which developers receive it. Therefore, upon receiving this message, please perform a reverse check using "Query Exhibition Products" and then proceed with related business processing.



Exhibition Product Status Change Notification

Message Type: message_type=25
Trigger Scenarios: A notification will be pushed to customers when the status of exhibition products changes. This includes the following scenarios: product creation, product title update, product SKU attribute change, product material update, product price change, product unavailable for sale, insufficient product stock, product removal from exhibition, and merchant exiting high commission.
Example Message:

 Product Removal from Exhibition Notification

{
    "seller_id": "2100008751433",
    "message_type": 25,
    "data": {
        "business_time": "1743160589070",
        "messageTag": "PRODUCT_DELETED",
        "product_code": "5601231341393"
    },
    "timestamp": 1743131790,
    "site": "taobao_hk"
}


Field Description

Type 

Description 

Example 

sellerId

Number

TaoWorld account ID

messageType

Number

Message type number

data

Object

Business data





Business Data Description
Type

Description

Example

business_time

Number

Push timestamp (milliseconds)

messageTag

String

Message subtype, see enumeration values below

product_code

String

Product code, used as an input parameter for querying exhibition products API



Message Subtype Enumeration
Enumeration Value

Description

PRODUCT_CREATED

Product Creation

PRODUCT_TITLE_UPDATED

Product Title Update

SKU_ATTRIBUTES_UPDATED

SKU Attributes Update

PRODUCT_MATERIAL_UPDATED

Material Update

PRODUCT_PRICE_UPDATED

Price Update

PRODUCT_UNLISTED

Product Unlisted (Possibly due to product being unsellable or store closure)

PRODUCT_RESTORED

The product has returned to normal (e.g., restored from being out of stock, restocked, etc.).

INSUFFICIENT_STOCK

Insufficient Stock

PRODUCT_DELETED

Product Removal from Exhibition

PRODUCT_HIGH_COMMISSION_REMOVED

Product Exiting High Commission Program







服务生成的所有内容均由人工智能模型生成，其生成内容的准确性和完整性无法保证，不代表我们的态度或观点






Solution for Shopping and Procuring Agents
1. Solution
This solution is primarily designed for purchasers (hereafter referred to as "you") registered on the Taobao Global Distribution Platform (hereafter referred to as "Distribution Platform"). Tailored to meet the demands of overseas customers for specific Taobao products, this solution provides you with functionalities including an extensive search within Taobao's product pool, fast order placement, and batch order management.

The Distribution Platform offers you a comprehensive suite of capabilities via the Taobao Global Open Platform (hereafter referred to as "Open Platform"). These include product search and information retrieval, order creation and query, payment processing, refund management, and IM communication. In collaboration with Integrated Software Vendors (ISVs), the platform enables functionalities such as easy discovery of products, confirmation of procurement information, automated ordering, batch payment, and synchronization of order information. These features are designed to enhance your procurement efficiency, reduce labor costs, and improve your business competitiveness. The Distribution Platform also offers essential native tools, such as order management, batch payment, and reconciliation, to help you improve business operations.







2. Business Process
This solution comprises four modules: product sourcing, order procurement, refund management, and reconciliation. Each module consists of several capabilities to support your operations across diverse scenarios. Moreover, you can integrate Instant Messaging (IM) tools into your operational workflow for additional support, thereby optimizing the execution of your business activities.

Here is a detailed introduction to each module:





2.1 Product Sourcing Module
1.When you receive a purchase request from a customer, it's crucial to evaluate if this solution is applicable based on the third-party e-commerce platform where the requested product is listed. Currently, the Distribution Platform supports purchases of Taobao products only (excluding Taobao Special Edition and Goofish items).

2.If the requested product is indeed from Taobao, you can use the ERP system to make API calls to the Open Platform, sourcing the product using public parameters like the Taobao product ID, and the Open Platform will return the relevant sourcing information. For precise and definitive information, please refer to the data as displayed on the original platform.

3.Currently, the ERP only shows the regular price, not any lower prices you might get with coupons or other discounts.

3.If the product is not found, it may indicate that the item has been delisted or is out of stock. In such cases, you can call the image search API on the Open Platform, invoked through your ERP system, to find similar products using an image.

4.If similar products are found, a list of these items will be generated. You can then review and filter this list within your ERP system to determine if there are any purchasable items. If suitable products are identified, you can use their IDs to retrieve more detailed product information.

5.Once you have confirmed the products and SKUs you wish to purchase, you can proceed with the procurement process (Order Procurement Module) in your ERP system.

a.If there are multiple products that require purchasing, you can collectively select and procure them in a consolidated manner.

2.1.1 Process Flowchart






2.1.2 System Interaction Flowchart


2.1.3 API references
T1:Single Taobao product ID sourcing API (QueryAllProduct)/Multiple Taobao product IDs sourcing API (BatchCheckProducts)

T2:Image search API (RecommendSimilarProduct)





2.2 Order Procurement Module
1.After sourcing all Taobao products required by the customer, you can perform a one-time purchase operation through ERP. Note that to ensure the price is consistent with what the customer sees, you must purchase these products in one transaction. If you aim to further reduce purchasing costs, you may consider consolidating orders from different customers for bulk purchasing. However, this typically requires stronger order processing capabilities.

2.To assist you with the purchases, in accordance with Clause 6.2 of the Taobao Global Distribution Platform Demand-Type User Entry Agreement you have signed, the Distribution Platform will provide technical support. This includes creating a Taobao buyer account based on the information you provide and assisting you in placing orders on the Taobao platform through this buyer account. Therefore, you must ensure that the provided information is legal and compliant. The Distribution Platform only offers technical support for purchasing through the Taobao buyer account and does not assume any guarantee or responsibility for the accuracy or compliance of the information you provide.

3.A procurement confirmation step is crucial to ensure success in purchasing. When using the ERP system to call the rendering API, the system will verify if the desired products can be procured and sent to the shipping address. It will also provide details like product price, shipping cost, and discounts for each item. You should compare this information with your expectations, and inform the customer for further action in case of any mismatches or unavailability;

4.Once all details are verified and align with expectations, call order creation API through ERP. Successful procurement will generate an order number from the Distribution Platform, which should be linked to your ERP order number for subsequent tracking and management. In case of failed procurement, investigate the cause in ERP and communicate with your customer to decide further actions.

a.Please be aware that procurement is an asynchronous process and may take some time to complete. Receiving an order ID from the Distribution Platform does not guarantee successful procurement. Final confirmation of procurement will be provided with an update on the order status.

b.Due to platform regulations, purchases exceeding 50 SKUs will be automatically segmented by the system into multiple purchase orders, each capped at 50 SKUs.

4.After successfully procuring products on the Distribution Platform, you can proceed with the payment on your ERP system by calling the payment API. Once the payment is successfully processed, the order status will be updated to "paid." In case of a payment failure, usually due to insufficient funds, you are required to investigate the cause and address it before re-attempting the payment.

a.Likewise, as payment processing is an asynchronous operation, a successful call of the API does not guarantee the success of the payment. Instead, payment success is confirmed by changes in the order status.

b.Since payment for purchase orders is processed individually for each Taobao seller, it is possible that parts of an order are successfully processed while others are not.

c.If you decide not to pay for a particular order, it must be canceled through the ERP by calling the relevant API. Additionally, according to Taobao rules, any orders that remain unpaid within a stipulated timeframe will be automatically canceled. This timeframe typically extends to 24 hours but may be reduced to as short as 30 minutes during certain promotional events. You must monitor the expected closure time based on the API response to avoid order timeouts.

5.Subsequently, you can directly manage purchase orders in the ERP, including checking order status and tracking information. However, as of now, the ERP system does not facilitate proactive confirmation of goods receipt.

a.Upon dispatch of a product, the ERP system receives a status update notification for the relevant sub-order. The ERP can then access the latest purchase order status through the purchase order API.

b.The Distribution Platform currently does not support updating the order status to "received". Therefore, once the Taobao seller has dispatched the goods, the order status will persist as "shipped".

6.If you wish to negotiate prices with Taobao sellers, you can contact them via IM before payment to discuss terms. Once the Taobao seller agrees and adjusts the price, the corresponding purchase order price will also change. After a price change, a notification will be sent, and the ERP system can obtain the updated purchase order status through the purchase order API.

7.If required functionalities are not available in your ERP system, you can use the Distribution Platform's native tools for order management. These enable payment processing, order cancellation, and order logistics tracking.





2.2.1 Process Flowchart






2.2.2 Interaction Flowchart






2.2.3 APIs and Messages
T3:Purchase order rendering API （purchaseOrderRender）

T4:Purchase order creation API (CreatePurchaseOrder)

T5:Purchase order query API (QueryPurchaseOrder)

T6:Purchase order payment API (BatchPayPurchaseOrder)

T7:Purchase order cancellation API (AsynCancelPurchaseOrder)

M1:Purchase order status update

M2:Order price modification update





2.3 Refund Management Module
1.When encountering some issues with the orders (such as incorrect items or logistics delays), you may face refund requests from your customers. At this time, you can apply for a refund, such as through ERP on the Distribution Platform to the Taobao seller.

2.First, find the order that requires a refund in ERP (usually a sub-order under a purchase order). Check if the refund is feasible according to the system prompt. If not, communicate with the Taobao seller via IM. Once the seller enables the refund operation, you can proceed with it. The default timeframe for initiating a refund on a purchase order, depending on its type, is within 20 or 25 days from the date of shipment. However, this period may be extended if special circumstances cause delays in order logistics.

3.When applying for a refund, depending on the current order status and business type, the order may support one or both of the after-sales types: refund only, or return and refund. You need to decide the refund type based on the actual order conditions displayed in ERP. Incorrect applications may lead to the Taobao seller's refusal.

a.If your warehouse has not received the goods, it's advisable to apply for a refund only. The goods will be processed for reversal after successful interception by the logistics service provider.

b.If your warehouse has received the goods, it's advisable to apply for a return and refund. In this case, you need to send the goods back to the Taobao seller's return address.

4.After initiating a refund request, you must wait for the Taobao seller's consent. If the seller withholds agreement, you need to communicate through the ERP messaging system or the Distribution Platform's IM tool. Based on the seller's response, you may then proceed to either modify or close the refund request within the ERP system.

5.Once you receive the seller's consent, the type of refund request you submitted will determine if a direct refund is issued:

a.Refund only: The total amount of the order will be credited back to your payment account initially used for the transaction.

b.Return and refund: The goods must be returned and confirmed as received by the Taobao seller before the processing of a refund can commence.

6.When processing a return, you should access the corresponding refund order in the ERP system to retrieve the Taobao seller's return address and ship the goods to this address. Upon dispatching the goods, you must update the ERP system with the shipping tracking number to notify the seller of the return.

7.After sending back the returned goods, you must await their receipt and inspection by the Taobao seller. The inspection results will determine the completion of the refund process. If the seller does not agree to a full refund (e.g., in cases of damaged goods), you can communicate through the ERP messaging system or the Distribution Platform's IM tool to negotiate the specific refund amount.

8.Once the Taobao seller confirms the completion of the return, the corresponding refund amount will automatically be credited back to your payment account.

9.If required functionalities are not available in your ERP system, you can use the Distribution Platform's native tools for order management. These enable payment processing, order cancellation, and order logistics tracking.





2.3.1 Process Flowchart






2.3.2 Interaction Flowchart






2.3.3 APIs and Messages
T8:Refund order rendering API (renderRefundOrder)

T9:Refund order submission API (submitRefundOrder)

T10: Refund order list query API (queryRefundOrderList)

T11:Refund order detail query API (queryRefundOrder)

T12:Refund message API (submitRefundMessage)

T13:Refund message query API (queryRefundMessage)

T14:Refund order modification API (modifyRefundOrder)

T15:Return rendering API (renderLogisticsOrder)

T16:Return information submission API (submitLogisticsOrder)

T17:Refund order cancellation API (cancelRefundOrder)

M3:After-sales service message





2.4 Reconciliation Module
1.During your business operations, it's essential for your financial team to ensure consistency between the transaction amounts on the Distribution Platform and the corresponding payment bills. To facilitate this, the ERP system can utilize the "forward purchase bill data API" to access data provided by the Distribution Platform. Note that the "payment channel transaction ID" corresponds to your transaction ID within your account of the respective third-party payment service provider.

a.For orders paid via Alipay, direct reconciliation can be performed using the Alipay transaction ID;

b.For orders processed with Alipay International, reconciliation can be performed using the International Alipay transaction ID;

c.Currently, for orders paid via WF, the transaction ID is not accessible. Therefore, reconciliation must be manually carried out using the supplier order number on the WF system.

2.In scenarios that involve refunds, the Distribution Platform will credit the appropriate funds back to your account. These transactions do not require active financial oversight. The ERP system may call the refund bill data API to retrieve relevant transaction data:

a.For orders paid via Alipay, the Alipay refund transaction ID can be used for reconciliation;

b.For refunds via Alipay International/WF, it is currently feasible to obtain only the RMB-denominated refund values. Foreign currency refund amounts and associated transaction IDs remain unobtainable;

3.If related functionalities are not available in your ERP system, you can use the Distribution Platform's bill management features to manage reconciliations.

a.Reconciliation Operational Manual





2.4.1 Interaction Flowchart






2.4.2 APIs and Messages
T18:Purchase bill API (PurchaseBill)

T19:Refund bill API (RefundBill)





2.5 IM Tool
IM Tool Operational Manual



FAQ
1 Inventory Matching FAQs
APIs: /product/get

Common QAs:

1. Inventory Matching Errors

Error Code

Error Description

Solution

SYSTEM_ERROR

Taobao products not found

This indicates that the Taobao product has been deleted or delisted. Please choose a different seller for your purchase.

SYSTEM_ERROR

This seller's products are not eligible for distribution. Choose a different seller.

Choose a different seller as suggested.

SYSTEM_ERROR

ltao products not supported

ltao products are currently not available for purchase.

SYSTEM_ERROR

Products not contracted with the Distribution Platform

Choose a different seller as suggested.

SYSTEM_ERROR

Failure in distribution

Reach out to the Distribution Platform's technical support for assistance.

SYSTEM_ERROR

No mpId found in batch inventory matching

Reach out to the Distribution Platform's technical support for assistance.


2 Order Creation FAQs
APIs: /purchase/order/create input parameter considerations:

1.    This API operates following an asynchronous logic. To track whether the operation is successful, you should subscribe to notifications about purchase order status updates. For more detailed information on the notifications, please refer to section 8.

2.    For the input parameter order_line_list, itemId and skuId must be respectively set to the values of mp_id and mp_sku_id returned from the product query API. Otherwise, the order creation fails.

3.    "outer_purchase_id" is an idempotent field; remember to ensure its uniqueness each time an order is created.

4.    For the market field, "channel_order_type" depends on your specific application scenario: For the shopping agent model, use "PANAMA_DG"; For the shopping guide model, use "PANAMA" (default).

API Common QAs:

Common Error Codes

Error Code

Error Description

Solution

GOODS_UN_BUILD_RELATION_OR_NOT_CORRECT

The merchant fails to build a valid relation with the products. Verify product accuracy using the Distribution Platform product ID before attempting to create an order again (600037765030623443).

(1) Check if "channel_order_type" ;is correctly specified in accordance with the API's application scenario;(2) If the above field is correct, re-examine the product parameters. Focus on the "mp_id" and "mp_sku_id" identifiers, making sure they align with the product model attributes of the Distribution Platform.(3) Check the status of the products.(4) If previous steps are accurately followed and the issue persists, escalate the matter to the responsible technical expert.

B-10-00-005

GSP order splitting error

(1) Check if "channel_order_type" is correctly specified in accordance with the application scenario;(2) If the above field is correct, re-examine the product parameters. Focus on the "mp_id" and "mp_sku_id" identifiers, making sure they align with the product model attributes of the Distribution Platform;(3) Check the status of the products;(4) Check if the authorized account is associated with the Distribution Platform rather than the Open Platform. It is important to note that accounts for each platform are distinct and not interchangeable;(5) If previous steps are accurately followed and the issue persists, escalate the matter to the responsible technical expert.

Input parameter description

Parameter

Description

outer_purchase_id

Ensure the order ID generated by the distributor’s system is uniquely maintained.

purchase_amount

Estimated purchase amount

seller_order_number

Order ID generated by distributor’s system

order_source

Source of order

order_line_list

Use the "mp_id" and "mp_sku_id" identifiers returned by the product API. Otherwise, orders cannot be created properly.

receiver

Recipient’s contact details

warehouse_address_info

Address of distributor’s in-country transit warehouse (typically the shipment destination)

channel_order_type

It depends on your specific application scenario.[For the shopping agent model: PANAMA_DG; for the shopping guide model: PANAMA]

support_partial_success

For default settings (false/empty), the online order creation follows a logic of "failure of any sub-order results in the failure of the entire order." With specific settings (true), the logic allows "success of the order despite partial sub-order failures."

order_remark

Supplier’s note or comment (up to 35 characters)

3.common error in order

CODE

Readable error code

error description

B-00903-10-15-010

无

bus ticket price is invalid

F-10006-03-16-004

BUY_QUANTITY_NOT_MATCH_MIN_LIMIT

The buy quantity not match the min limit: {0}

B-00118-00-15-001

ILLEGAL_TRANSPORTATION_METHOD

illegal transportation method

P-02306-11-16-011

HOT_ITEM_BLOCK

hot item block

P-02306-11-16-001

CAN_NOT_BUY_FROM_PC

can not buy from pc

F-10000-00-16-099

UNKOWN_SYSTEM_ERROR

Unkonwn system error.

F-00103-00-16-113

REDUCE_INVENTORY_FAIL

reduce inventory error.

F-10012-01-16-016

SUCCESS_RATE_OPTIMIZE_DOUBLE11

SUCCESS_RATE_OPTIMIZE_DOUBLE11

F-10012-01-16-001

BLOCK_BY_MTEE

blocked by mtee, error message:{0}

F-10001-01-16-001

ITEM_CANNOT_BUY

Item cannot buy2, item id: {0}, sku id: {1}

F-10001-01-16-011

AUCTION_ITEM_CANNOT_BUY

Auction item cannot buy, item id: {0}, sku id: {1}

B-00504-01-16-001

无

无

B-50018-00-01-001

无

The QrCode's mobile is not right. mobileNo: {0}

F-10003-11-16-001

MAX_BUY_QUANTITY_EXCEEDED

inventory not enough,quantity= {0}

F-10003-11-16-006

SIC_RESULT_FAIL

queryItemRegionalExt result is false . itemId

F-10003-11-16-007

REDUCE_INVENTORY_FAIL

reduce inventory fail

F-10003-11-16-002

INVENTORY_AREA_LIMIT_ERROR

area inventory not enough

F-10003-11-16-003

ITEM_OVER_SOLD

item or sku is oversold

P-01415-10-16-042

STORE_QUERY_HAS_EXCEPTION

STORE_QUERY_HAS_EXCEPTION

F-10000-01-16-000

SYSTEM_ERROR

System error.

P-10000-11-16-014

HOT_ITEM_CAN_NOT_BUY

hot item can't buy

P-02309-11-10-002

UNKNOWN_ERROR

Unknown system: {0}, {0}

F-10000-00-16-100

RESTART_RENDER_PROCESS

Restart the Render process..

P-01415-00-16-102

TOO_MANY_TIMES_TRY_RE_RENDER

Have re-render order more than 10 times, aborted.

F-10000-00-16-101

FAIL_RESTART_RENDER_PROCESS

Failed to re-start the render process, due to the temp OrderLine list is null or error code is not right. Temp OrderLine List size: {0}, errorCode: {1}

P-10000-11-17-019

CREATE_ORDER_FLOW_CONTROL_HOT_ITEM

hot item flow control for create order

P-10000-11-17-018

CONFIRM_SINGLE_ITEM_FLOW_CONTROL

single item flow control for confirm

F-10004-03-16-004

MISSING_ITEM_PRICE

missing item price

F-10001-01-16-023

SKU_IS_MISSING

Sku is missing from IC, itemId: {0}, skuId: {1}

F-10005-11-10-005

QUERY_PROMOTION_FAIL

query promotion ex interrupt error

F-10005-11-10-003

USING_PROMOTION_FAIL

call UsingPromotion error. code:{0}

F-10005-11-10-004

REDUCE_PROMOTION_INVETORY_FAIL

call dealAfterPromotion error. code:{0}

F-10005-11-10-002

USING_PROMOTION_FAIL

call UsingPromotion exception error.

P-02114-10-16-002

ITEM_WITH_AREAS_LIMITED

ITEM_WITH_AREAS_LIMITED

F-10002-11-10-001

CALL_DELIVERY_QUERY_ABILITY_SERVICE_ERROR

call delivery queryAbility service error

F-10002-11-10-002

CALL_DELIVERY_CONFIRM_ABILITY_SERVICE_ERROR

call delivery confirmAbility service error

F-10002-11-10-039

CONFIRM_ABILITY_RESULT_FALSE

the confirm result is false after call confirm ability

F-10002-01-16-019

SPLIT_SERVICE_ERROR

split error!

F-10002-03-16-013

无

item can't buy

F-10002-11-10-022

QUERY_ABILITY_RESULT_NULL

delivery ability result is null

F-10002-01-99-008

无

system error!

B-PNM-001

INVALID_PARAMETERS

INVALID_PARAMETERS

B-12-10-080

无

无

B-10-10-012

USER_BLOCK_STATUS

USER_BLOCK_STATUS

B-10-10-012

USER_DEEP_FREEZE

USER_DEEP_FREEZE

B-10-10-012

ACCOUNT_STATUS_ILEGA

ACCOUNT_STATUS_ILEGA

B-10-10-012

ILLEGAL_USER

ILLEGAL_USER

B-10-10-012

REASON_ILLEGAL_STATUS

REASON_ILLEGAL_STATUS

B-10-10-012

REASON_TRADE_IS_LOCKED

REASON_TRADE_IS_LOCKED

B-10-10-012

ERROR_TRADE_TOTAL_FEE_PERMIT

ERROR_TRADE_TOTAL_FEE_PERMIT

B-10-10-012

SELLER_NOT_EXIST

SELLER_NOT_EXIST

B-10-10-012

BUYER_SELLER_EQUAL

BUYER_SELLER_EQUAL

B-10-10-012

SELLER_NOT_BINDING

SELLER_NOT_BINDING

B-10-10-012

USER_BALANCE_NOT_ENOUGH

USER_BALANCE_NOT_ENOUGH

B-10-10-012

ADJUST_OUT_AMOUNT_BLOCKED

ADJUST_OUT_AMOUNT_BLOCKED

B-10-10-012

TOTAL_FEE_EXCEED

TOTAL_FEE_EXCEED

B-10-10-012

TRADE_FEE_GREAT_THAN_UNFREZZE

TRADE_FEE_GREAT_THAN_UNFREZZE

B-10-10-012

UNFREEZE_GREATER_THAN_FREEZED

UNFREEZE_GREATER_THAN_FREEZED

B-10-10-012

USER_BLOCKED

USER_BLOCKED

B-10-10-012

PAYMENT_REQUEST_HAS_RISK

PAYMENT_REQUEST_HAS_RISK

B-10-10-012

AGREEMENT_ERROR

AGREEMENT_ERROR

B-10-10-012

PERM_LIMIT_CHECK_FAIL

PERM_LIMIT_CHECK_FAIL

B-10-10-012

ERROR_RECEIVE_AMOUNT_THAN_RESTRICTED_BUYER_PAY

ERROR_RECEIVE_AMOUNT_THAN_RESTRICTED_BUYER_PAY

B-10-10-012

ERROR_SELLER_CERTIFY_LEVEL_LIMIT

ERROR_SELLER_CERTIFY_LEVEL_LIMIT

T-00001-01-16-000

system error, might be npe.

order create fail

F-10002-10-16-050

call adp confirm failed! reason=blockCode:delivery_template_not_exist

order create fail

F-10001-01-16-817

can't buy item from test seller contents:

order create fail

B-10-00-012





无

CUSTOM_REASON_CANNOT_BUY

quantity exceed max limit




3 Payment FAQs
APIs: /purchase/order/batch/pay

Description: The input for this API is the purchase order ID from the Distribution Platform. Following an asynchronous logic, its primary role is to facilitate payment submissions and to exclude any purchase orders ineligible for payment.

The feedback provided by this API is indicative only. For data consistency, it's imperative to perform final synchronization using the purchase order query API.

Output Parameters:

Note: "will_pay_purchase_order_ids" does not indicate successful payment. It represents the submission of payment orders.

"pay_failure_purchase_order_ids" indicates the inability to submit for payment, signifying that the payment validation has failed.

Output parameters:

{
"error_msg": "",
"code": "0",
"data": {
"will_pay_purchase_order_ids": "200001911633",// Payment orders submitted
"pay_failure_purchase_order_ids": "200000229005" // Failed payment orders
},
"success": "true",
"error_code": "BATCH_PAY_ERROR",
"request_id": "0ba2887315178178017221014"
}
API&Message list
API list
类别

接口名称

APIName

接口文档

账号

获取授权token

Generate access_token

查看链接

刷新授权token

AccessToken

查看链接

采购商品信息获取

单商品寻源

QueryAllProduct

查看链接

批量商品寻源

BatchCheckProducts

查看链接

图片找同款

RecommendSimilarProduct

查看链接

采购

创建订单前预览数据接口

purchaseOrderRender

查看链接

订单创建

CreatePurchaseOrder

查看链接

订单详情查看(买家视角)

QueryPurchaseOrders

查看链接

取消交易

AsynCancelPurchaseOrder

查看链接

发起免密支付

BatchPayPurchaseOrder

查看链接

获取物流信息

getLogisticsDetail

查看链接

逆向退货

创建逆向前预览数据接口

renderRefundOrder

查看链接

发起逆向申请

submitRefundOrder

查看链接

查询逆向单

queryRefundOrder

查看链接

查询逆向单列表

queryRefundOrderList

查看链接

修改逆向单

modifyRefundOrder

查看链接

取消逆向单

cancelRefundOrder

查看链接

提交逆向单留言

submitRefundMessage

查看链接

查询逆向单留言

queryRefundMessage

查看链接

提交逆向物流前预览数据接口

renderLogisticsOrder

查看链接

提交逆向物流数据

submitLogisticsOrder

查看链接

对账

支付账单

PurchaseBill

查看链接

退款账单

RefundBill

查看链接

开放工具

获取平台开放工具页面

getPageLink

查看链接



Message list
类别

消息名称

消息区分方式

消息文档

交易相关

订单状态变更

message_type=3

查看链接

订单改价

message_type=8

查看链接

退款相关

逆向单留言新增

message_type=9

查看链接

履约相关

跨境物流信息更新

message_type=23

查看链接


Solution for Global Sellers and Suppliers
1. Background Information
Taobao, a Chinese e-commerce platform known for its vast product offerings, enjoys global popularity. With the rise of cross-border e-commerce, Chinese suppliers are expanding worldwide through channels like e-commerce platforms, online shopping agents, and independent sites. However, these channels mainly focus on front-end operations, and often leave the supply chain organization in the Chinese mainland stretched thin. To address this, Taobao Global Distribution Platform (hereinafter referred to as "Distribution Platform") offers tailored supply chain solutions, as shown below, to help Taobao sellers efficiently manage their product distribution and operations. This will enhance the global reach of Taobao products, and cater to a broader global customer base through diverse business models.

A significant number of Taobao sellers have become suppliers on the Distribution Platform. As a buyer, you can purchase a wide variety of products using tools like ERP and create orders on the Distribution Platform. The sellers will then handle the delivery of your ordered goods within China through third-party logistics. Afterward, you may independently proceed with the sales and operations of these goods outside of China.







2. Solution
This solution primarily targets global sellers engaged in the cross-border distribution of goods on channels such as Amazon, eBay, and Shopify. To leverage this solution, such sellers must join the Distribution Platform as buyers (hereinafter referred to as "you"). The solution allows for a fast selection of products from Taobao sellers already contracted with the Distribution Platform, and facilitates front-end distribution, order-based procurement, and batch order management, based on your specific marketing scenarios and operational needs.

For those aiming to source products from Taobao sellers who are part of the Distribution Platform, the Taobao Global Open Platform (hereafter referred to as "Open Platform") offers ERP tools for product search and selection, distribution operations, order creation and tracking, payment processing, refund management, and IM communication. Developed in collaboration with Integrated Software Vendors (ISVs), these tools can simplify the discovery of trending products and key front-end merchants, streamline order confirmation, automate order placement, and synchronize batch payment systems. These enhancements are designed to reduce the time global sellers spend in identifying market trends, thereby increasing procurement efficiency, reducing labor costs, and ultimately enhancing business competitiveness. The Distribution Platform also offers essential native tools for global sellers exploring cross-border trade, ensuring that they have a comprehensive business cycle. These functionalities include smart product selection, order management, batch payment, and reconciliation.







3. Business Process
This solution comprises four modules: product selection and distribution, order procurement, refund management, and reconciliation. Each module consists of several capabilities that support global sellers in managing the entire operational cycle of distributed products. Additionally, this solution aids global sellers in their distribution operations where ERP functions have not been fully developed. They can use native tools on the Distribution Platform for product selection, distribution, and IM for daily operations.

Here is a detailed introduction to each module:





3.1 Product Selection and Distribution Module
1. First, specify required products by keyword, category, or general image based on your understanding of the target market (local market). Note that if you cannot provide logistics services to the local market, third-party logistics service providers cooperating with the Distribution Platform can offer cross-border logistics solutions for certain countries/regions.

2. Once you have definite product information, use ERP to find products in various ways: Filter by specific category or theme; use keywords to execute an API call on the Open Platform to query a matching list; or upload an image to initiate an image search query for similar products on the Open Platform.

3. After identifying the desired products, you can check out their specifics more closely in the ERP system. If you're on the lookout for lower-priced options, try calling the image search API again.

a. Currently, the ERP only shows the regular price, not any lower prices you might get with coupons or other discounts.

b. In addition, the inventory data is approximate. You'll get the exact count if there are 200 or fewer; any amount over 200 is shown as 200.

4. Once your selection is finalized, proceed to distribute the products to your sales channels via the ERP system. This system will execute an API call on the Open Platform to fetch detailed product information and synchronize data with your channels.

5. Note that, before distribution, the ERP allows you to modify product details to better align with buyer preferences and enhance the likelihood of sales.

6. If you opt for logistic services from third-party service providers contracted with the Distribution Platform, the related costs will be incorporated into the overall technical service fee. The ERP system will perform an API call to retrieve these logistics service quotations from the Open Platform. It's important to note that the final cost is set by the third-party logistics providers, and as such, the quotations presented on the Distribution Platform are indicative and should be considered only as guidelines for your reference.

7. For functionalities not currently offered by your ERP system, the native tools of the Distribution Platform can be utilized for product search, selection, and distribution. Be aware, though, that this process will only list products within your specific ERP account. Any subsequent actions, including the management and distribution of these products across your front-end channels, must be carried out through your ERP system.





3.1.1 Process Flowchart






3.1.2 Interaction Flowchart






3.1.3 API references 
T1:Product synchronization API (QueryProductSpuList)

T2: Product search API (to be provided)

T3:Image search API (QuerySimilarProduct)

T4:Product details query API (QueryProductsDetails)

T5:Promotion query API (QueryPromotion)

T6:Address library access API (getAddress)

T7:Supply chain quotation access API (supplychainPriceGet)

M1:Product selection and distribution

M2:Inventory updates

M3:Product listing and delisting

M4:Product price updates





3.2 Order Procurement Module
1. Upon receiving a customer's order for goods, you can promptly execute the purchase via ERP and deliver the products to the customer. It's essential to purchase all ordered goods in one transaction to ensure the purchasing price aligns with the expected budget;

a. To further reduce costs, consider consolidating orders from various customers for bulk purchasing, though this requires enhanced order handling and processing skills.

2. A procurement confirmation step is crucial to ensure accuracy and success in purchasing. When using the ERP system to call the rendering API, the system will verify if the desired products can be procured and sent to the shipping address. It will also provide details like product price, shipping cost, and discounts for each item. You should compare this information with your expectations, and inform the customer for further action in case of any mismatches or unavailability;

a. If you need a third-party logistics partner for the Distribution Platform (hereinafter referred to as a "third-party logistics partner"), be aware that shipping costs will include both domestic (within China) and international fees.

b. If you don't need a third-party logistics partner, the products will be delivered to an address within the Chinese mainland.

3. Once all details are verified and align with expectations, call order creation API through ERP. Successful procurement will generate an order number from the Distribution Platform, which should be linked to your ERP order number for subsequent tracking and management. In case of failed procurement, investigate the cause in ERP and communicate with your customer to decide further actions.

a. Please be aware that procurement is an asynchronous process and may take some time to complete. Receiving an order number from the Distribution Platform does not guarantee successful procurement. Final confirmation of procurement will be provided with an update on the order status.

4. To ensure smooth operations, when placing an order, you can simultaneously input the customer's delivery address and your transit warehouse address in China, or another specified delivery address within China, into the ERP system. If third-party logistics services are not required, the Taobao seller will ship the goods to the aforementioned address in China. If third-party logistics services are needed, you can authorize the Distribution Platform to share the customer's delivery address with the related third-party logistics provider. However, according to Clause 6.1 of the Taobao Global Distribution Platform Demand-Type User Entry Agreement that you've signed, the goods are deemed delivered once they reach and are signed for at the transit warehouse in the Chinese mainland. If you wish to find identical goods at a lower price, you can call the image search API to find similar items and proceed with the procurement.

5. The final pricing is set upon successful procurement. After procuring on the Distribution Platform, you are advised to re-confirm the details of the procurement to ensure they align with your expectations prior to making a payment decision. Should payment be required, it can be facilitated through the ERP system by executing the payment API. Upon successful payment, the order status will be updated to "paid." If the payment fails, typically due to insufficient funds, the global seller is responsible for resolving the issue and re-initiating the payment process.

a. Likewise, as payment processing is an asynchronous operation, a successful call of the API does not guarantee the success of the payment. Instead, payment success is confirmed by changes in the order status.

b. Since payment for purchase orders is processed individually for each supplier or Taobao seller, it is possible that parts of an order are successfully processed while others are not.

c. If you decide not to pay for a particular order, it must be canceled through the ERP by calling the relevant API. Additionally, according to Taobao rules, any orders that remain unpaid within a stipulated timeframe will be automatically canceled. This timeframe typically extends to 24 hours but may be reduced to as short as 30 minutes during certain promotional events.

6. Subsequently, you can directly manage purchase orders in the ERP, including checking order status and tracking information. However, as of now, the ERP system does not facilitate proactive confirmation of goods receipt.

a. When the Taobao seller/supplier ships the goods, a notification will be sent to the ERP, allowing you to be aware of the event.

b. The Distribution Platform currently does not have the option to update the order status to "received." Therefore, once the Taobao seller has dispatched the goods, the order status will persist as "shipped".

7. If you choose to use logistics services from a third-party provider partnered with the Distribution Platform, you can track the order's logistics status by calling the Open Platform API through the ERP. This access allows you to retrieve detailed supply chain information related to your order. Currently, the details available include quality assurance results and specific logistics information.

8. If you wish to negotiate prices with Taobao sellers, you can contact them via IM before payment to discuss terms. Once the Taobao seller agrees and adjusts the price, the corresponding purchase order price will also change.

a. If required functionalities are not available in your ERP system, you can use the Distribution Platform's native tools for order management. These enable payment processing, order cancellation, and order logistics tracking. 





3.2.1 Process Flowchart






3.2.2 Interaction Flowchart






3.2.3 APIs and Messages
T8:Purchase order rendering API （purchaseOrderRender）

T9:Purchase order creation API (CreatePurchaseOrder)

T10:Purchase order query API (QueryPurchaseOrder)

T11:Purchase order payment API (BatchPayPurchaseOrder)

T12:Purchase order cancellation API (AsynCancelPurchaseOrder)

T13:Supply chain service detail query API (QuerySupplychainServiceDetail)

M5:Purchase order status update

M6: Shipping tracking number update (to be provided)

M7:Order price modification update





3.3 Refund Management Module
1. When encountering some issues with orders during quality inspection or customer service (such as incorrect items or logistics delays), you may face refund requests from your customers. At this time, you can apply for a refund through ERP on the Distribution Platform to the Taobao seller.

2. First, find the order that requires a refund in ERP (usually a sub-order under a purchase order). Check if the refund is possible according to the system prompt. If not, communicate with the Taobao seller through the IM tool. Once the seller enables the refund operation, you can proceed with it. The default period for applying for a refund is within 25 days from the date of shipment. However, if there are special reasons causing order logistics delays, this period can be extended.

3. When applying for a refund, depending on the current order status and business type, the order may support one or both of the after-sales types: refund only, or return and refund. You need to decide the refund type based on the actual order conditions displayed in ERP. Incorrect applications may lead to the Taobao seller's refusal.

a. If your warehouse has not received the goods, it's advisable to apply for a refund only. The goods will be returned through Taobao logistics interception.

b. If your warehouse has received the goods, it's advisable to apply for a return and refund. In this case, you need to send the goods back to the Taobao seller's return address.

Note that if the cross-border logistics service is provided by a third-party logistics provider contracted with the Distribution Platform, the goods are considered delivered upon their arrival at your domestic transit warehouse. Following their dispatch from this transit warehouse, returns are not permitted, if any. Consequently, any requests for returns and refunds made after this point will not be processed.

4. After initiating a refund request, you must wait for the Taobao seller's consent. If the Taobao seller withholds the agreement, you need to communicate through the ERP messaging system or the Distribution Platform's IM tool to obtain the seller's consent. Based on the seller's response, you may then proceed to either modify or close the refund request within the ERP system.

5. Once you receive the Taobao seller's consent, the type of refund request you submitted as a global seller will determine if a direct refund is issued:

a. Refund only: The total amount of the order will be credited back to your payment account initially used for the transaction.

b. Return and refund: The goods must be returned and confirmed as received by the Taobao seller before the processing of a refund can commence.

6. When processing a return, you should access the corresponding refund order in the ERP system to retrieve the Taobao seller's return address and ship the goods to this address. Upon dispatching the goods, you must update the ERP system with the shipping tracking number to notify the seller of the return.

7. After sending back the returned goods, you must await their receipt and inspection by the Taobao seller. The inspection results will determine the completion of the refund process. If the seller does not agree to a full refund (e.g., in cases of damaged goods), you can communicate through the ERP messaging system or the Distribution Platform's IM tool to negotiate the specific refund amount.

8. Once the Taobao seller confirms the completion of the return, the corresponding refund amount will automatically be credited to your payment account.

9. If required functionalities are not available in your ERP system, you can use the Distribution Platform's native tools for order management. These enable payment processing, order cancellation, and order logistics tracking.





3.3.1 Process Flowchart






3.3.2 Interaction Flowchart






3.3.3 APIs and Messages
T14:Refund order rendering API (renderRefundOrder)

T15:Refund order submission API (submitRefundOrder)

T16:Refund order list query API (queryRefundOrderList)

T17:Refund order detail query API (queryRefundOrder)

T18:Refund message API (submitRefundMessage)

T19:Refund message query API (queryRefundMessage)

T20:Refund order modification API (modifyRefundOrder)

T21: Refund logistics rendering API (renderLogisticsOrder)

T22: Refund logistics submission API (submitLogisticsOrder)

T23: Refund order cancellation API (cancelRefundOrder)

M8:After-sales service message





3.4 Reconciliation Module
1.During your business operations, it's essential for your financial team to ensure consistency between the transaction amounts on the Distribution Platform and the corresponding payment bills. To facilitate this, the ERP system can utilize the "forward purchase bill data API" to access data provided by the Distribution Platform. Note that the "payment channel transaction ID" corresponds to your transaction ID within the account of the respective third-party payment service provider.

a. For orders paid via Alipay, direct reconciliation can be performed using the Alipay transaction ID;

b. For orders processed with Alipay International, reconciliation can be performed using the International Alipay transaction ID;

c. Currently, for orders paid via WF, the transaction ID is not accessible. Therefore, reconciliation must be manually carried out using the supplier order number on the WF system.

2. In scenarios that involve refunds, the Distribution Platform will credit the appropriate funds back to your account. These transactions also require active financial oversight. The ERP system may call the refund bill data API to retrieve relevant transaction data:

a. For orders paid via Alipay, the Alipay refund transaction ID can be used for reconciliation;

b. For refunds via Alipay International/WF, it is currently feasible to obtain only the RMB-denominated refund values. Foreign currency refund amounts and associated transaction IDs remain unobtainable;

3. If related functionalities are not available in your ERP system, you can use the Distribution Platform's bill management features to manage reconciliations.

a. Reconciliation Operational Manual





3.4.1 Interaction Flowchart






3.4.2 APIs and Messages
T24: Purchase bill API (PurchaseBill)

T25:Refund bill API (RefundBill)





3.5 IM Tool
IM Tool Operational Manual

FAQ
1 Order Creation FAQs
APIs: /purchase/order/create 

input parameter considerations:

1.    This API operates following an asynchronous logic. To track whether the operation is successful, you should subscribe to notifications about purchase order status updates. For more detailed information on the notifications, please refer to section 8.

2.    For the input parameter order_line_list, itemId and skuId must be respectively set to the values of mp_id and mp_sku_id returned from the product query API. Otherwise, the order creation fails.

3.    "outer_purchase_id" is an idempotent field; remember to ensure its uniqueness each time an order is created.

4.    For the market field, "channel_order_type" depends on your specific application scenario: For the shopping agent model, use "PANAMA_DG"; For the shopping guide model, use "PANAMA" (default).

API Common QAs:

Common Error Codes

Error Code

Error Description

Solution

GOODS_UN_BUILD_RELATION_OR_NOT_CORRECT

The merchant fails to build a valid relation with the products. Verify product accuracy using the Distribution Platform product ID before attempting to create an order again (600037765030623443).

(1) Check if "channel_order_type" is correctly specified in accordance with the API's application scenario.(2) If the above field is correct, re-examine the product parameters. Focus on the "mp_id" and "mp_sku_id" identifiers, making sure they align with the product model attributes of the Distribution Platform.(3) Check the status of the products.(4) If previous steps are accurately followed and the issue persists, escalate the matter to the responsible technical expert.

B-10-00-005

GSP order splitting error

(1) Check if "channel_order_type" is correctly specified in accordance with the application scenario.(2) If the above field is correct, re-examine the product parameters. Focus on the "mp_id" and "mp_sku_id" identifiers, making sure they align with the product model attributes of the Distribution Platform.(3) Check the status of the products.(4) Check if the authorized account is associated with the Distribution Platform rather than the Open Platform. It is important to note that accounts for each platform are distinct and not interchangeable.(5) If previous steps are accurately followed and the issue persists, escalate the matter to the responsible technical expert.

Input parameter description

Parameter

Description

outer_purchase_id

Ensure the order ID generated by the distributor’s system is uniquely maintained.

purchase_amount

Estimated purchase amount

seller_order_number

Order ID generated by distributor’s system

order_source

Source of order

order_line_list

Use the "mp_id" and "mp_sku_id" identifiers returned by the product API. Otherwise, orders cannot be created properly.

receiver

Recipient’s contact details

warehouse_address_info

Address of distributor’s in-country transit warehouse (typically the shipment destination)

channel_order_type

It depends on your specific application scenario.[For the shopping agent model: PANAMA_DG; for the shopping guide model: PANAMA]

support_partial_success

For default settings (false/empty), the online order creation follows a logic of "failure of any sub-order results in the failure of the entire order." With specific settings (true), the logic allows "success of the order despite partial sub-order failures."

order_remark

Supplier’s note or comment (up to 35 characters)

3.common error in order

CODE

Readable error code

error description

B-00903-10-15-010

无

bus ticket price is invalid

F-10006-03-16-004

BUY_QUANTITY_NOT_MATCH_MIN_LIMIT

The buy quantity not match the min limit: {0}

B-00118-00-15-001

ILLEGAL_TRANSPORTATION_METHOD

illegal transportation method

P-02306-11-16-011

HOT_ITEM_BLOCK

hot item block

P-02306-11-16-001

CAN_NOT_BUY_FROM_PC

can not buy from pc

F-10000-00-16-099

UNKOWN_SYSTEM_ERROR

Unkonwn system error.

F-00103-00-16-113

REDUCE_INVENTORY_FAIL

reduce inventory error.

F-10012-01-16-016

SUCCESS_RATE_OPTIMIZE_DOUBLE11

SUCCESS_RATE_OPTIMIZE_DOUBLE11

F-10012-01-16-001

BLOCK_BY_MTEE

blocked by mtee, error message:{0}

F-10001-01-16-001

ITEM_CANNOT_BUY

Item cannot buy2, item id: {0}, sku id: {1}

F-10001-01-16-011

AUCTION_ITEM_CANNOT_BUY

Auction item cannot buy, item id: {0}, sku id: {1}

B-00504-01-16-001

无

无

B-50018-00-01-001

无

The QrCode's mobile is not right. mobileNo: {0}

F-10003-11-16-001

MAX_BUY_QUANTITY_EXCEEDED

inventory not enough,quantity= {0}

F-10003-11-16-006

SIC_RESULT_FAIL

queryItemRegionalExt result is false . itemId

F-10003-11-16-007

REDUCE_INVENTORY_FAIL

reduce inventory fail

F-10003-11-16-002

INVENTORY_AREA_LIMIT_ERROR

area inventory not enough

F-10003-11-16-003

ITEM_OVER_SOLD

item or sku is oversold

P-01415-10-16-042

STORE_QUERY_HAS_EXCEPTION

STORE_QUERY_HAS_EXCEPTION

F-10000-01-16-000

SYSTEM_ERROR

System error.

P-10000-11-16-014

HOT_ITEM_CAN_NOT_BUY

hot item can't buy

P-02309-11-10-002

UNKNOWN_ERROR

Unknown system: {0}, {0}

F-10000-00-16-100

RESTART_RENDER_PROCESS

Restart the Render process..

P-01415-00-16-102

TOO_MANY_TIMES_TRY_RE_RENDER

Have re-render order more than 10 times, aborted.

F-10000-00-16-101

FAIL_RESTART_RENDER_PROCESS

Failed to re-start the render process, due to the temp OrderLine list is null or error code is not right. Temp OrderLine List size: {0}, errorCode: {1}

P-10000-11-17-019

CREATE_ORDER_FLOW_CONTROL_HOT_ITEM

hot item flow control for create order

P-10000-11-17-018

CONFIRM_SINGLE_ITEM_FLOW_CONTROL

single item flow control for confirm

F-10004-03-16-004

MISSING_ITEM_PRICE

missing item price

F-10001-01-16-023

SKU_IS_MISSING

Sku is missing from IC, itemId: {0}, skuId: {1}

F-10005-11-10-005

QUERY_PROMOTION_FAIL

query promotion ex interrupt error

F-10005-11-10-003

USING_PROMOTION_FAIL

call UsingPromotion error. code:{0}

F-10005-11-10-004

REDUCE_PROMOTION_INVETORY_FAIL

call dealAfterPromotion error. code:{0}

F-10005-11-10-002

USING_PROMOTION_FAIL

call UsingPromotion exception error.

P-02114-10-16-002

ITEM_WITH_AREAS_LIMITED

ITEM_WITH_AREAS_LIMITED

F-10002-11-10-001

CALL_DELIVERY_QUERY_ABILITY_SERVICE_ERROR

call delivery queryAbility service error

F-10002-11-10-002

CALL_DELIVERY_CONFIRM_ABILITY_SERVICE_ERROR

call delivery confirmAbility service error

F-10002-11-10-039

CONFIRM_ABILITY_RESULT_FALSE

the confirm result is false after call confirm ability

F-10002-01-16-019

SPLIT_SERVICE_ERROR

split error!

F-10002-03-16-013

无

item can't buy

F-10002-11-10-022

QUERY_ABILITY_RESULT_NULL

delivery ability result is null

F-10002-01-99-008

无

system error!

B-PNM-001

INVALID_PARAMETERS

INVALID_PARAMETERS

B-12-10-080

无

无

B-10-10-012

USER_BLOCK_STATUS

USER_BLOCK_STATUS

B-10-10-012

USER_DEEP_FREEZE

USER_DEEP_FREEZE

B-10-10-012

ACCOUNT_STATUS_ILEGA

ACCOUNT_STATUS_ILEGA

B-10-10-012

ILLEGAL_USER

ILLEGAL_USER

B-10-10-012

REASON_ILLEGAL_STATUS

REASON_ILLEGAL_STATUS

B-10-10-012

REASON_TRADE_IS_LOCKED

REASON_TRADE_IS_LOCKED

B-10-10-012

ERROR_TRADE_TOTAL_FEE_PERMIT

ERROR_TRADE_TOTAL_FEE_PERMIT

B-10-10-012

SELLER_NOT_EXIST

SELLER_NOT_EXIST

B-10-10-012

BUYER_SELLER_EQUAL

BUYER_SELLER_EQUAL

B-10-10-012

SELLER_NOT_BINDING

SELLER_NOT_BINDING

B-10-10-012

USER_BALANCE_NOT_ENOUGH

USER_BALANCE_NOT_ENOUGH

B-10-10-012

ADJUST_OUT_AMOUNT_BLOCKED

ADJUST_OUT_AMOUNT_BLOCKED

B-10-10-012

TOTAL_FEE_EXCEED

TOTAL_FEE_EXCEED

B-10-10-012

TRADE_FEE_GREAT_THAN_UNFREZZE

TRADE_FEE_GREAT_THAN_UNFREZZE

B-10-10-012

UNFREEZE_GREATER_THAN_FREEZED

UNFREEZE_GREATER_THAN_FREEZED

B-10-10-012

USER_BLOCKED

USER_BLOCKED

B-10-10-012

PAYMENT_REQUEST_HAS_RISK

PAYMENT_REQUEST_HAS_RISK

B-10-10-012

AGREEMENT_ERROR

AGREEMENT_ERROR

B-10-10-012

PERM_LIMIT_CHECK_FAIL

PERM_LIMIT_CHECK_FAIL

B-10-10-012

ERROR_RECEIVE_AMOUNT_THAN_RESTRICTED_BUYER_PAY

ERROR_RECEIVE_AMOUNT_THAN_RESTRICTED_BUYER_PAY

B-10-10-012

ERROR_SELLER_CERTIFY_LEVEL_LIMIT

ERROR_SELLER_CERTIFY_LEVEL_LIMIT

T-00001-01-16-000

system error, might be npe.

order create fail

F-10002-10-16-050

call adp confirm failed! reason=blockCode:delivery_template_not_exist

order create fail

F-10001-01-16-817

can't buy item from test seller contents:

order create fail

B-10-00-012





无

CUSTOM_REASON_CANNOT_BUY

quantity exceed max limit



2 Payment FAQs
APIs: /purchase/order/batch/pay

Description: The input for this API is the purchase order ID from the Distribution Platform. Following an asynchronous logic, its primary role is to facilitate payment submissions and to exclude any purchase orders ineligible for payment.

 The feedback provided by this API is indicative only. For data consistency, it's imperative to perform final synchronization using the purchase order query API.

Output Parameters:

Note: "will_pay_purchase_order_ids" does not indicate successful payment. It represents the submission of payment orders.

"pay_failure_purchase_order_ids" indicates the inability to submit for payment, signifying that the payment validation has failed.

Output parameters: 

{
"error_msg": "",
"code": "0",
"data": {
"will_pay_purchase_order_ids": "200001911633",// Payment orders submitted
"pay_failure_purchase_order_ids": "200000229005" // Failed payment orders
},
"success": "true",
"error_code": "BATCH_PAY_ERROR",
"request_id": "0ba2887315178178017221014"
}




API&Message list
API list
类别

接口名称

APIName

接口文档

账号

获取授权token

Generate access_token

查看链接

刷新授权token

AccessToken

查看链接

选品铺货

获取铺货商品列表

QueryProductSpuList

查看链接

获取铺货商品详情

QueryProductsDetails

查看链接

查询相似商品

QuerySimilarProduct

查看链接

商品搜索（面向选品员工）

SearchItem

查看链接

采购

创建订单前预览数据接口

purchaseOrderRender

查看链接

订单创建

CreatePurchaseOrder

查看链接

订单详情查看(买家视角)

QueryPurchaseOrders

查看链接

取消交易

AsynCancelPurchaseOrder

查看链接

发起免密支付

BatchPayPurchaseOrder

查看链接

获取物流信息

getLogisticsDetail

查看链接

逆向退货

创建逆向前预览数据接口

renderRefundOrder

查看链接

发起逆向申请

submitRefundOrder

查看链接

查询逆向单

queryRefundOrder

查看链接

查询逆向单列表

queryRefundOrderList

查看链接

修改逆向单

modifyRefundOrder

查看链接

取消逆向单

cancelRefundOrder

查看链接

提交逆向单留言

submitRefundMessage

查看链接

查询逆向单留言

queryRefundMessage

查看链接

提交逆向物流前预览数据接口

renderLogisticsOrder

查看链接

提交逆向物流数据

submitLogisticsOrder

查看链接

对账

支付账单

PurchaseBill

查看链接

退款账单

RefundBill

查看链接

履约

获取可支持的地址

getAddress

查看链接

获取跨境物流报价

supplychainPriceGet

查看链接

获取跨境物流详情

QuerySupplychainServiceDetail

查看链接

开放工具

获取平台开放工具页面

getPageLink

查看链接





Message list
类别

消息名称

消息区分方式

消息文档

商品相关

新商品铺货

message_type=18

查看链接

商品状态变更

message_type=11

查看链接

商品信息变更

message_type=13

查看链接

商品价格变更

message_type=15

查看链接

商品库存变更

message_type=16

查看链接

SKU状态变更

message_type=14

查看链接

SKU信息变更

message_type=17

查看链接

交易相关

订单状态变更

message_type=3

查看链接

订单改价

message_type=8

查看链接

退款相关

逆向单留言新增

message_type=9

查看链接

履约相关

跨境物流信息更新

message_type=23

查看链接



Solution for Service Partner
1. Solution
This solution is primarily designed for purchasers (hereafter referred to as "you") registered on the Taobao Global Distribution Platform (hereafter referred to as "Distribution Platform"). Tailored to meet the demands of overseas customers for specific Taobao products, this solution provides you with functionalities including an extensive search within Taobao's product pool, fast order placement, and batch order management.

The Distribution Platform offers you a comprehensive suite of capabilities via the Taobao Global Open Platform (hereafter referred to as "Open Platform"). These include product search and information retrieval, order creation and query, payment processing, refund management, and IM communication. In collaboration with Integrated Software Vendors (ISVs), the platform enables functionalities such as easy discovery of products, confirmation of procurement information, automated ordering, batch payment, and synchronization of order information. These features are designed to enhance your procurement efficiency, reduce labor costs, and improve your business competitiveness. The Distribution Platform also offers essential native tools, such as order management, batch payment, and reconciliation, to help you improve business operations.







2. Business Process
This solution comprises four modules: product sourcing, order procurement, refund management, and reconciliation. Each module consists of several capabilities to support your operations across diverse scenarios. Moreover, you can integrate Instant Messaging (IM) tools into your operational workflow for additional support, thereby optimizing the execution of your business activities.

Here is a detailed introduction to each module:





2.1 Product Sourcing Module
1.When you receive a purchase request from a customer, it's crucial to evaluate if this solution is applicable based on the third-party e-commerce platform where the requested product is listed. Currently, the Distribution Platform supports purchases of Taobao products only (excluding Taobao Special Edition and Goofish items).

2.If the requested product is indeed from Taobao, you can use the ERP system to make API calls to the Open Platform, sourcing the product using public parameters like the Taobao product ID, and the Open Platform will return the relevant sourcing information. For precise and definitive information, please refer to the data as displayed on the original platform.

3.Currently, the ERP only shows the regular price, not any lower prices you might get with coupons or other discounts.

3.If the product is not found, it may indicate that the item has been delisted or is out of stock. In such cases, you can call the image search API on the Open Platform, invoked through your ERP system, to find similar products using an image.

4.If similar products are found, a list of these items will be generated. You can then review and filter this list within your ERP system to determine if there are any purchasable items. If suitable products are identified, you can use their IDs to retrieve more detailed product information.

5.Once you have confirmed the products and SKUs you wish to purchase, you can proceed with the procurement process (Order Procurement Module) in your ERP system.

a.If there are multiple products that require purchasing, you can collectively select and procure them in a consolidated manner.

2.1.1 Process Flowchart






2.1.2 System Interaction Flowchart


2.1.3 API references
T1:Single Taobao product ID sourcing API (QueryAllProduct)/Multiple Taobao product IDs sourcing API (BatchCheckProducts)

T2:Image search API (RecommendSimilarProduct)





2.2 Order Procurement Module
1.After sourcing all Taobao products required by the customer, you can perform a one-time purchase operation through ERP. Note that to ensure the price is consistent with what the customer sees, you must purchase these products in one transaction. If you aim to further reduce purchasing costs, you may consider consolidating orders from different customers for bulk purchasing. However, this typically requires stronger order processing capabilities.

2.To assist you with the purchases, in accordance with Clause 6.2 of the Taobao Global Distribution Platform Demand-Type User Entry Agreement you have signed, the Distribution Platform will provide technical support. This includes creating a Taobao buyer account based on the information you provide and assisting you in placing orders on the Taobao platform through this buyer account. Therefore, you must ensure that the provided information is legal and compliant. The Distribution Platform only offers technical support for purchasing through the Taobao buyer account and does not assume any guarantee or responsibility for the accuracy or compliance of the information you provide.

3.A procurement confirmation step is crucial to ensure success in purchasing. When using the ERP system to call the rendering API, the system will verify if the desired products can be procured and sent to the shipping address. It will also provide details like product price, shipping cost, and discounts for each item. You should compare this information with your expectations, and inform the customer for further action in case of any mismatches or unavailability;

4.Once all details are verified and align with expectations, call order creation API through ERP. Successful procurement will generate an order number from the Distribution Platform, which should be linked to your ERP order number for subsequent tracking and management. In case of failed procurement, investigate the cause in ERP and communicate with your customer to decide further actions.

a.Please be aware that procurement is an asynchronous process and may take some time to complete. Receiving an order ID from the Distribution Platform does not guarantee successful procurement. Final confirmation of procurement will be provided with an update on the order status.

b.Due to platform regulations, purchases exceeding 50 SKUs will be automatically segmented by the system into multiple purchase orders, each capped at 50 SKUs.

4.After successfully procuring products on the Distribution Platform, you can proceed with the payment on your ERP system by calling the payment API. Once the payment is successfully processed, the order status will be updated to "paid." In case of a payment failure, usually due to insufficient funds, you are required to investigate the cause and address it before re-attempting the payment.

a.Likewise, as payment processing is an asynchronous operation, a successful call of the API does not guarantee the success of the payment. Instead, payment success is confirmed by changes in the order status.

b.Since payment for purchase orders is processed individually for each Taobao seller, it is possible that parts of an order are successfully processed while others are not.

c.If you decide not to pay for a particular order, it must be canceled through the ERP by calling the relevant API. Additionally, according to Taobao rules, any orders that remain unpaid within a stipulated timeframe will be automatically canceled. This timeframe typically extends to 24 hours but may be reduced to as short as 30 minutes during certain promotional events. You must monitor the expected closure time based on the API response to avoid order timeouts.

5.Subsequently, you can directly manage purchase orders in the ERP, including checking order status and tracking information. However, as of now, the ERP system does not facilitate proactive confirmation of goods receipt.

a.Upon dispatch of a product, the ERP system receives a status update notification for the relevant sub-order. The ERP can then access the latest purchase order status through the purchase order API.

b.The Distribution Platform currently does not support updating the order status to "received". Therefore, once the Taobao seller has dispatched the goods, the order status will persist as "shipped".

6.If you wish to negotiate prices with Taobao sellers, you can contact them via IM before payment to discuss terms. Once the Taobao seller agrees and adjusts the price, the corresponding purchase order price will also change. After a price change, a notification will be sent, and the ERP system can obtain the updated purchase order status through the purchase order API.

7.If required functionalities are not available in your ERP system, you can use the Distribution Platform's native tools for order management. These enable payment processing, order cancellation, and order logistics tracking.





2.2.1 Process Flowchart






2.2.2 Interaction Flowchart






2.2.3 APIs and Messages
T3:Purchase order rendering API （purchaseOrderRender）

T4:Purchase order creation API (CreatePurchaseOrder)

T5:Purchase order query API (QueryPurchaseOrder)

T6:Purchase order payment API (BatchPayPurchaseOrder)

T7:Purchase order cancellation API (AsynCancelPurchaseOrder)

M1:Purchase order status update

M2:Order price modification update





2.3 Refund Management Module
1.When encountering some issues with the orders (such as incorrect items or logistics delays), you may face refund requests from your customers. At this time, you can apply for a refund, such as through ERP on the Distribution Platform to the Taobao seller.

2.First, find the order that requires a refund in ERP (usually a sub-order under a purchase order). Check if the refund is feasible according to the system prompt. If not, communicate with the Taobao seller via IM. Once the seller enables the refund operation, you can proceed with it. The default timeframe for initiating a refund on a purchase order, depending on its type, is within 20 or 25 days from the date of shipment. However, this period may be extended if special circumstances cause delays in order logistics.

3.When applying for a refund, depending on the current order status and business type, the order may support one or both of the after-sales types: refund only, or return and refund. You need to decide the refund type based on the actual order conditions displayed in ERP. Incorrect applications may lead to the Taobao seller's refusal.

a.If your warehouse has not received the goods, it's advisable to apply for a refund only. The goods will be processed for reversal after successful interception by the logistics service provider.

b.If your warehouse has received the goods, it's advisable to apply for a return and refund. In this case, you need to send the goods back to the Taobao seller's return address.

4.After initiating a refund request, you must wait for the Taobao seller's consent. If the seller withholds agreement, you need to communicate through the ERP messaging system or the Distribution Platform's IM tool. Based on the seller's response, you may then proceed to either modify or close the refund request within the ERP system.

5.Once you receive the seller's consent, the type of refund request you submitted will determine if a direct refund is issued:

a.Refund only: The total amount of the order will be credited back to your payment account initially used for the transaction.

b.Return and refund: The goods must be returned and confirmed as received by the Taobao seller before the processing of a refund can commence.

6.When processing a return, you should access the corresponding refund order in the ERP system to retrieve the Taobao seller's return address and ship the goods to this address. Upon dispatching the goods, you must update the ERP system with the shipping tracking number to notify the seller of the return.

7.After sending back the returned goods, you must await their receipt and inspection by the Taobao seller. The inspection results will determine the completion of the refund process. If the seller does not agree to a full refund (e.g., in cases of damaged goods), you can communicate through the ERP messaging system or the Distribution Platform's IM tool to negotiate the specific refund amount.

8.Once the Taobao seller confirms the completion of the return, the corresponding refund amount will automatically be credited back to your payment account.

9.If required functionalities are not available in your ERP system, you can use the Distribution Platform's native tools for order management. These enable payment processing, order cancellation, and order logistics tracking.





2.3.1 Process Flowchart






2.3.2 Interaction Flowchart






2.3.3 APIs and Messages
T8:Refund order rendering API (renderRefundOrder)

T9:Refund order submission API (submitRefundOrder)

T10: Refund order list query API (queryRefundOrderList)

T11:Refund order detail query API (queryRefundOrder)

T12:Refund message API (submitRefundMessage)

T13:Refund message query API (queryRefundMessage)

T14:Refund order modification API (modifyRefundOrder)

T15:Return rendering API (renderLogisticsOrder)

T16:Return information submission API (submitLogisticsOrder)

T17:Refund order cancellation API (cancelRefundOrder)

M3:After-sales service message





2.4 Reconciliation Module
1.During your business operations, it's essential for your financial team to ensure consistency between the transaction amounts on the Distribution Platform and the corresponding payment bills. To facilitate this, the ERP system can utilize the "forward purchase bill data API" to access data provided by the Distribution Platform. Note that the "payment channel transaction ID" corresponds to your transaction ID within your account of the respective third-party payment service provider.

a.For orders paid via Alipay, direct reconciliation can be performed using the Alipay transaction ID;

b.For orders processed with Alipay International, reconciliation can be performed using the International Alipay transaction ID;

c.Currently, for orders paid via WF, the transaction ID is not accessible. Therefore, reconciliation must be manually carried out using the supplier order number on the WF system.

2.In scenarios that involve refunds, the Distribution Platform will credit the appropriate funds back to your account. These transactions do not require active financial oversight. The ERP system may call the refund bill data API to retrieve relevant transaction data:

a.For orders paid via Alipay, the Alipay refund transaction ID can be used for reconciliation;

b.For refunds via Alipay International/WF, it is currently feasible to obtain only the RMB-denominated refund values. Foreign currency refund amounts and associated transaction IDs remain unobtainable;

3.If related functionalities are not available in your ERP system, you can use the Distribution Platform's bill management features to manage reconciliations.

a.Reconciliation Operational Manual





2.4.1 Interaction Flowchart






2.4.2 APIs and Messages
T18:Purchase bill API (PurchaseBill)

T19:Refund bill API (RefundBill)





2.5 IM Tool
IM Tool Operational Manual





FAQ
1 Inventory Matching FAQs
APIs: /product/get

Common QAs:

1. Inventory Matching Errors

Error Code

Error Description

Solution

SYSTEM_ERROR

Taobao products not found

This indicates that the Taobao product has been deleted or delisted. Please choose a different seller for your purchase.

SYSTEM_ERROR

This seller's products are not eligible for distribution. Choose a different seller.

Choose a different seller as suggested.

SYSTEM_ERROR

ltao products not supported

ltao products are currently not available for purchase.

SYSTEM_ERROR

Products not contracted with the Distribution Platform

Choose a different seller as suggested.

SYSTEM_ERROR

Failure in distribution

Reach out to the Distribution Platform's technical support for assistance.

SYSTEM_ERROR

No mpId found in batch inventory matching

Reach out to the Distribution Platform's technical support for assistance.


2 Order Creation FAQs
APIs: /purchase/order/create input parameter considerations:

1.    This API operates following an asynchronous logic. To track whether the operation is successful, you should subscribe to notifications about purchase order status updates. For more detailed information on the notifications, please refer to section 8.

2.    For the input parameter order_line_list, itemId and skuId must be respectively set to the values of mp_id and mp_sku_id returned from the product query API. Otherwise, the order creation fails.

3.    "outer_purchase_id" is an idempotent field; remember to ensure its uniqueness each time an order is created.

4.    For the market field, "channel_order_type" depends on your specific application scenario: For the shopping agent model, use "PANAMA_DG"; For the shopping guide model, use "PANAMA" (default).

API Common QAs:

Common Error Codes

Error Code

Error Description

Solution

GOODS_UN_BUILD_RELATION_OR_NOT_CORRECT

The merchant fails to build a valid relation with the products. Verify product accuracy using the Distribution Platform product ID before attempting to create an order again (600037765030623443).

(1) Check if "channel_order_type" ;is correctly specified in accordance with the API's application scenario;(2) If the above field is correct, re-examine the product parameters. Focus on the "mp_id" and "mp_sku_id" identifiers, making sure they align with the product model attributes of the Distribution Platform.(3) Check the status of the products.(4) If previous steps are accurately followed and the issue persists, escalate the matter to the responsible technical expert.

B-10-00-005

GSP order splitting error

(1) Check if "channel_order_type" is correctly specified in accordance with the application scenario;(2) If the above field is correct, re-examine the product parameters. Focus on the "mp_id" and "mp_sku_id" identifiers, making sure they align with the product model attributes of the Distribution Platform;(3) Check the status of the products;(4) Check if the authorized account is associated with the Distribution Platform rather than the Open Platform. It is important to note that accounts for each platform are distinct and not interchangeable;(5) If previous steps are accurately followed and the issue persists, escalate the matter to the responsible technical expert.

Input parameter description

Parameter

Description

outer_purchase_id

Ensure the order ID generated by the distributor’s system is uniquely maintained.

purchase_amount

Estimated purchase amount

seller_order_number

Order ID generated by distributor’s system

order_source

Source of order

order_line_list

Use the "mp_id" and "mp_sku_id" identifiers returned by the product API. Otherwise, orders cannot be created properly.

receiver

Recipient’s contact details

warehouse_address_info

Address of distributor’s in-country transit warehouse (typically the shipment destination)

channel_order_type

It depends on your specific application scenario.[For the shopping agent model: PANAMA_DG; for the shopping guide model: PANAMA]

support_partial_success

For default settings (false/empty), the online order creation follows a logic of "failure of any sub-order results in the failure of the entire order." With specific settings (true), the logic allows "success of the order despite partial sub-order failures."

order_remark

Supplier’s note or comment (up to 35 characters)

3.common error in order

CODE

Readable error code

error description

B-00903-10-15-010

无

bus ticket price is invalid

F-10006-03-16-004

BUY_QUANTITY_NOT_MATCH_MIN_LIMIT

The buy quantity not match the min limit: {0}

B-00118-00-15-001

ILLEGAL_TRANSPORTATION_METHOD

illegal transportation method

P-02306-11-16-011

HOT_ITEM_BLOCK

hot item block

P-02306-11-16-001

CAN_NOT_BUY_FROM_PC

can not buy from pc

F-10000-00-16-099

UNKOWN_SYSTEM_ERROR

Unkonwn system error.

F-00103-00-16-113

REDUCE_INVENTORY_FAIL

reduce inventory error.

F-10012-01-16-016

SUCCESS_RATE_OPTIMIZE_DOUBLE11

SUCCESS_RATE_OPTIMIZE_DOUBLE11

F-10012-01-16-001

BLOCK_BY_MTEE

blocked by mtee, error message:{0}

F-10001-01-16-001

ITEM_CANNOT_BUY

Item cannot buy2, item id: {0}, sku id: {1}

F-10001-01-16-011

AUCTION_ITEM_CANNOT_BUY

Auction item cannot buy, item id: {0}, sku id: {1}

B-00504-01-16-001

无

无

B-50018-00-01-001

无

The QrCode's mobile is not right. mobileNo: {0}

F-10003-11-16-001

MAX_BUY_QUANTITY_EXCEEDED

inventory not enough,quantity= {0}

F-10003-11-16-006

SIC_RESULT_FAIL

queryItemRegionalExt result is false . itemId

F-10003-11-16-007

REDUCE_INVENTORY_FAIL

reduce inventory fail

F-10003-11-16-002

INVENTORY_AREA_LIMIT_ERROR

area inventory not enough

F-10003-11-16-003

ITEM_OVER_SOLD

item or sku is oversold

P-01415-10-16-042

STORE_QUERY_HAS_EXCEPTION

STORE_QUERY_HAS_EXCEPTION

F-10000-01-16-000

SYSTEM_ERROR

System error.

P-10000-11-16-014

HOT_ITEM_CAN_NOT_BUY

hot item can't buy

P-02309-11-10-002

UNKNOWN_ERROR

Unknown system: {0}, {0}

F-10000-00-16-100

RESTART_RENDER_PROCESS

Restart the Render process..

P-01415-00-16-102

TOO_MANY_TIMES_TRY_RE_RENDER

Have re-render order more than 10 times, aborted.

F-10000-00-16-101

FAIL_RESTART_RENDER_PROCESS

Failed to re-start the render process, due to the temp OrderLine list is null or error code is not right. Temp OrderLine List size: {0}, errorCode: {1}

P-10000-11-17-019

CREATE_ORDER_FLOW_CONTROL_HOT_ITEM

hot item flow control for create order

P-10000-11-17-018

CONFIRM_SINGLE_ITEM_FLOW_CONTROL

single item flow control for confirm

F-10004-03-16-004

MISSING_ITEM_PRICE

missing item price

F-10001-01-16-023

SKU_IS_MISSING

Sku is missing from IC, itemId: {0}, skuId: {1}

F-10005-11-10-005

QUERY_PROMOTION_FAIL

query promotion ex interrupt error

F-10005-11-10-003

USING_PROMOTION_FAIL

call UsingPromotion error. code:{0}

F-10005-11-10-004

REDUCE_PROMOTION_INVETORY_FAIL

call dealAfterPromotion error. code:{0}

F-10005-11-10-002

USING_PROMOTION_FAIL

call UsingPromotion exception error.

P-02114-10-16-002

ITEM_WITH_AREAS_LIMITED

ITEM_WITH_AREAS_LIMITED

F-10002-11-10-001

CALL_DELIVERY_QUERY_ABILITY_SERVICE_ERROR

call delivery queryAbility service error

F-10002-11-10-002

CALL_DELIVERY_CONFIRM_ABILITY_SERVICE_ERROR

call delivery confirmAbility service error

F-10002-11-10-039

CONFIRM_ABILITY_RESULT_FALSE

the confirm result is false after call confirm ability

F-10002-01-16-019

SPLIT_SERVICE_ERROR

split error!

F-10002-03-16-013

无

item can't buy

F-10002-11-10-022

QUERY_ABILITY_RESULT_NULL

delivery ability result is null

F-10002-01-99-008

无

system error!

B-PNM-001

INVALID_PARAMETERS

INVALID_PARAMETERS

B-12-10-080

无

无

B-10-10-012

USER_BLOCK_STATUS

USER_BLOCK_STATUS

B-10-10-012

USER_DEEP_FREEZE

USER_DEEP_FREEZE

B-10-10-012

ACCOUNT_STATUS_ILEGA

ACCOUNT_STATUS_ILEGA

B-10-10-012

ILLEGAL_USER

ILLEGAL_USER

B-10-10-012

REASON_ILLEGAL_STATUS

REASON_ILLEGAL_STATUS

B-10-10-012

REASON_TRADE_IS_LOCKED

REASON_TRADE_IS_LOCKED

B-10-10-012

ERROR_TRADE_TOTAL_FEE_PERMIT

ERROR_TRADE_TOTAL_FEE_PERMIT

B-10-10-012

SELLER_NOT_EXIST

SELLER_NOT_EXIST

B-10-10-012

BUYER_SELLER_EQUAL

BUYER_SELLER_EQUAL

B-10-10-012

SELLER_NOT_BINDING

SELLER_NOT_BINDING

B-10-10-012

USER_BALANCE_NOT_ENOUGH

USER_BALANCE_NOT_ENOUGH

B-10-10-012

ADJUST_OUT_AMOUNT_BLOCKED

ADJUST_OUT_AMOUNT_BLOCKED

B-10-10-012

TOTAL_FEE_EXCEED

TOTAL_FEE_EXCEED

B-10-10-012

TRADE_FEE_GREAT_THAN_UNFREZZE

TRADE_FEE_GREAT_THAN_UNFREZZE

B-10-10-012

UNFREEZE_GREATER_THAN_FREEZED

UNFREEZE_GREATER_THAN_FREEZED

B-10-10-012

USER_BLOCKED

USER_BLOCKED

B-10-10-012

PAYMENT_REQUEST_HAS_RISK

PAYMENT_REQUEST_HAS_RISK

B-10-10-012

AGREEMENT_ERROR

AGREEMENT_ERROR

B-10-10-012

PERM_LIMIT_CHECK_FAIL

PERM_LIMIT_CHECK_FAIL

B-10-10-012

ERROR_RECEIVE_AMOUNT_THAN_RESTRICTED_BUYER_PAY

ERROR_RECEIVE_AMOUNT_THAN_RESTRICTED_BUYER_PAY

B-10-10-012

ERROR_SELLER_CERTIFY_LEVEL_LIMIT

ERROR_SELLER_CERTIFY_LEVEL_LIMIT

T-00001-01-16-000

system error, might be npe.

order create fail

F-10002-10-16-050

call adp confirm failed! reason=blockCode:delivery_template_not_exist

order create fail

F-10001-01-16-817

can't buy item from test seller contents:

order create fail

B-10-00-012





无

CUSTOM_REASON_CANNOT_BUY

quantity exceed max limit




3 Payment FAQs
APIs: /purchase/order/batch/pay

Description: The input for this API is the purchase order ID from the Distribution Platform. Following an asynchronous logic, its primary role is to facilitate payment submissions and to exclude any purchase orders ineligible for payment.

The feedback provided by this API is indicative only. For data consistency, it's imperative to perform final synchronization using the purchase order query API.

Output Parameters:

Note: "will_pay_purchase_order_ids" does not indicate successful payment. It represents the submission of payment orders.

"pay_failure_purchase_order_ids" indicates the inability to submit for payment, signifying that the payment validation has failed.

Output parameters:

{
"error_msg": "",
"code": "0",
"data": {
"will_pay_purchase_order_ids": "200001911633",// Payment orders submitted
"pay_failure_purchase_order_ids": "200000229005" // Failed payment orders
},
"success": "true",
"error_code": "BATCH_PAY_ERROR",
"request_id": "0ba2887315178178017221014"
}







API&Message list
API list
类别

接口名称

APIName

接口文档

账号

获取授权token

Generate access_token

查看链接

刷新授权token

AccessToken

查看链接

采购商品信息获取

单商品寻源

QueryAllProduct

查看链接

批量商品寻源

BatchCheckProducts

查看链接

图片找同款

RecommendSimilarProduct

查看链接

采购

创建订单前预览数据接口

purchaseOrderRender

查看链接

订单创建

CreatePurchaseOrder

查看链接

订单详情查看(买家视角)

QueryPurchaseOrders

查看链接

取消交易

AsynCancelPurchaseOrder

查看链接

发起免密支付

BatchPayPurchaseOrder

查看链接

获取物流信息

getLogisticsDetail

查看链接

逆向退货

创建逆向前预览数据接口

renderRefundOrder

查看链接

发起逆向申请

submitRefundOrder

查看链接

查询逆向单

queryRefundOrder

查看链接

查询逆向单列表

queryRefundOrderList

查看链接

修改逆向单

modifyRefundOrder

查看链接

取消逆向单

cancelRefundOrder

查看链接

提交逆向单留言

submitRefundMessage

查看链接

查询逆向单留言

queryRefundMessage

查看链接

提交逆向物流前预览数据接口

renderLogisticsOrder

查看链接

提交逆向物流数据

submitLogisticsOrder

查看链接

对账

支付账单

PurchaseBill

查看链接

退款账单

RefundBill

查看链接

开放工具

获取平台开放工具页面

getPageLink

查看链接





Message list
类别

消息名称

消息区分方式

消息文档

交易相关

订单状态变更

message_type=3

查看链接

订单改价

message_type=8

查看链接

退款相关

逆向单留言新增

message_type=9

查看链接

履约相关

跨境物流信息更新

message_type=23

查看链接


Obtain Item
本文档旨在指导您将商家在跨境供销平台选中铺货的商品获取到您的管理系统。

完成该业务，主要分为以下几个步骤：

平台商品铺货
获取商家已铺品列表（接口：/product/spus/get）或 消息订阅接收 参考：消息文档-选品铺货消息
通过列表中的商品头信息，逐个获取商品的详情
获取商品详情后，您可以：

在您的管理系统编辑商品，并铺货至外部平台
获取已铺货商品的更新消息
创建跨境供销订单
获取列表
透过 /product/spus/get 接口获取当前商家已经铺品的商品清单。可获取到如下的数据。

{
  "error_msg": "system error ",
  "code": "0",
  "data": {
    "surplus_total": "6000",
    "results_total": "2",
    "product_list": {
      "tb_category_path": "女装/女士精品\u003e毛针织衫",
      "created_time": "1608804934772",
      "images": "[\"http://picture/test\"]",
      "category_name": "cloth",
      "item_id": "600042833131056800",
      "is_new": "false",
      "shipping_48_rate_2m": "1.0",
      "weight": "12.0",
      "title": "Bakery Birthday Cake Flag Black and White with Pattern Inserts Gentleman Fragrant Wind Marriage Double C Perfume Beard B",
      "inventory": "60307",
      "image_quality": "7",
      "modified_time": "1608804934772",
      "category_id": "34424555",
      "material_quality_score": "78.95",
      "price": "24",
      "cn_title": "新款春季短袖T恤1",
      "tb_category_id": "50000697",
      "currency": "USD",
      "status": "NORMAL"
    },
    "scroll_id": "eJxdUctyhCAQ/Bq85IK46nrwYHaTY36BonRcSXgYGFNxvz6DrlVJgCroobsZZqRREWW/hOhDK3iT0yxFmdfinMnYByPhe5aoLbR5VXHBq6Ysa8GzEbCf5KjBDLENYBRq76QeWPF8s+QYQCE8gPWDHtcHWOZhv4lgDIRdYud9R40Gjl3ep0RDhUukg3Zf4NCHZDQH3W/ucZY92ZFazgqn3yGnLBxBqzQlZ29yCYagD4PsHcrCerfdH4H8f6Ae1Joep+9E77LRB6uwfU/nzwXC2vbejfrGiuukkRVdzsRlJxFINMIBgnIfrHyN+k5Jd4JzJipamwNJmTjvxSBOKkPHRC1yvo2i4fxEmIlmF43aIDGLKxWT+EdtX1J7eF2LJOBP3dv16S/hkgg5NbbOixPPIlDmg0yZSVxnaKnPAWKkLv4AzHqw0A\u003d\u003d"
  },
  "success": "true",
  "error_code": "200",
  "request_id": "0ba2887315178178017221014"
}
获取商品详情
透过接口获取到的「item_id」组合成的列表，请求 /product/details/query 接口。获得商品的详情。

在返回的

{
   "code":"0",
   "data":{
      "goods_info_list":[
         {
            "attributes":[
               {
                  "pTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"\u54c1\u724c"
                        },
                        "US_en":{
                           "value":"trans2EnText"
                        }
                     },
                     "notEmpty":true
                  },
                  "pid":20000,
                  "vTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"EARISE/\u96c5\u5170\u4ed5"
                        },
                        "US_en":{
                           "value":"earise"
                        }
                     },
                     "notEmpty":true
                  },
                  "vid":107806
               },
               {
                  "pTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"\u578b\u53f7"
                        },
                        "US_en":{
                           "value":"trans2EnText"
                        }
                     },
                     "notEmpty":true
                  },
                  "pid":4775707,
                  "vTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"\u534e\u4e3amatexs\u624b\u673a\u58f3\u76ae\u5957"
                        },
                        "US_en":{
                           "value":"Huawei matexs phone case leather case"
                        }
                     },
                     "notEmpty":true
                  },
                  "vid":-1
               },
               {
                  "pTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"\u4fdd\u62a4\u5957\u8d28\u5730"
                        },
                        "US_en":{
                           "value":"trans2EnText"
                        }
                     },
                     "notEmpty":true
                  },
                  "pid":20021,
                  "vTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"\u771f\u76ae"
                        },
                        "US_en":{
                           "value":"Genuine leather"
                        }
                     },
                     "notEmpty":true
                  },
                  "vid":-1
               },
               {
                  "pTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"\u98ce\u683c"
                        },
                        "US_en":{
                           "value":"trans2EnText"
                        }
                     },
                     "notEmpty":true
                  },
                  "pid":20608,
                  "vTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"\u5546\u52a1"
                        },
                        "US_en":{
                           "value":"Commerce"
                        }
                     },
                     "notEmpty":true
                  },
                  "vid":-1
               },
               {
                  "pTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"\u9002\u7528\u624b\u673a\u673a\u578b"
                        },
                        "US_en":{
                           "value":"trans2EnText"
                        }
                     },
                     "notEmpty":true
                  },
                  "pid":28102,
                  "vTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"\u534e\u4e3a"
                        },
                        "US_en":{
                           "value":"Huawei"
                        }
                     },
                     "notEmpty":true
                  },
                  "vid":-1
               },
               {
                  "pTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"\u578b\u53f7"
                        },
                        "US_en":{
                           "value":"trans2EnText"
                        }
                     },
                     "notEmpty":true
                  },
                  "pid":26138623,
                  "vTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"matex matexs"
                        },
                        "US_en":{
                           "value":"matex matexs"
                        }
                     },
                     "notEmpty":true
                  },
                  "vid":-1
               },
               {
                  "pTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"\u751f\u4ea7\u4f01\u4e1a"
                        },
                        "US_en":{
                           "value":"trans2EnText"
                        }
                     },
                     "notEmpty":true
                  },
                  "pid":12060095,
                  "vTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"\u7eff\u91ce"
                        },
                        "US_en":{
                           "value":"Green Field"
                        }
                     },
                     "notEmpty":true
                  },
                  "vid":-1
               },
               {
                  "pTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"\u6b3e\u5f0f"
                        },
                        "US_en":{
                           "value":"trans2EnText"
                        }
                     },
                     "notEmpty":true
                  },
                  "pid":122276315,
                  "vTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"\u4fdd\u62a4\u58f3"
                        },
                        "US_en":{
                           "value":"Protective shell"
                        }
                     },
                     "notEmpty":true
                  },
                  "vid":-1
               },
               {
                  "pTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"\u6d41\u884c\u5143\u7d20"
                        },
                        "US_en":{
                           "value":"trans2EnText"
                        }
                     },
                     "notEmpty":true
                  },
                  "pid":231100582,
                  "vTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"\u6298\u53e0\u4fdd\u62a4"
                        },
                        "US_en":{
                           "value":"Folding protection"
                        }
                     },
                     "notEmpty":true
                  },
                  "vid":-1
               }
            ],
            "category_id":201242498,
            "currency":"CNY",
            "images":[
               "https://img.alicdn.com/bao/uploaded/i1/3218158982/O1CN01rnO8kd2GDo68uNumk_!!0-item_pic.jpg",
               "https://img.alicdn.com/bao/uploaded/i2/3218158982/O1CN01O2Jdp32GDo66GOnt5_!!0-item_pic.jpg",
               "https://img.alicdn.com/bao/uploaded/i4/3218158982/O1CN01wab9612GDo656B8dm_!!3218158982.jpg",
               "https://img.alicdn.com/bao/uploaded/i2/3218158982/O1CN01avjsJp2GDo6CeUBwh_!!3218158982.jpg",
               "https://img.alicdn.com/bao/uploaded/i3/3218158982/O1CN01xehZhv2GDo66GKqBX_!!3218158982.jpg"
            ],
            "inventory":29584,
            "item_id":600069234047766362,
            "price":19900,
            "rich_text":"<p><img src=\"https://img.alicdn.com/imgextra/i1/3218158982/O1CN010mnLsN2GDo66iogHn_!!3218158982.jpg\" align=\"absmiddle\"><img src=\"https://img.alicdn.com/imgextra/i2/3218158982/O1CN01SZrcba2GDo6BQKlEY_!!3218158982.jpg\" align=\"absmiddle\"><img src=\"https://img.alicdn.com/imgextra/i1/3218158982/O1CN01sNcoip2GDo6AiRCCJ_!!3218158982.jpg\" align=\"absmiddle\"><img src=\"https://img.alicdn.com/imgextra/i1/3218158982/O1CN01b2zKNl2GDo68qKINW_!!3218158982.jpg\" align=\"absmiddle\"><img src=\"https://img.alicdn.com/imgextra/i2/3218158982/O1CN01OH5BGl2GDo6E9u5UL_!!3218158982.jpg\" align=\"absmiddle\"><img src=\"https://img.alicdn.com/imgextra/i4/3218158982/O1CN01NeT8uR2GDo69c6PJF_!!3218158982.jpg\" align=\"absmiddle\"><img src=\"https://img.alicdn.com/imgextra/i3/3218158982/O1CN01ruI3t92GDo6BlsKu1_!!3218158982.jpg\" align=\"absmiddle\"><img src=\"https://img.alicdn.com/imgextra/i1/3218158982/O1CN01Ka1S1I2GDo6DIBLJ4_!!3218158982.jpg\" align=\"absmiddle\"><img src=\"https://img.alicdn.com/imgextra/i2/3218158982/O1CN01Aw4MYm2GDo6BQM6Pa_!!3218158982.jpg\" align=\"absmiddle\"><img src=\"https://img.alicdn.com/imgextra/i1/3218158982/O1CN01GFPDPw2GDo6AiV9cd_!!3218158982.jpg\" align=\"absmiddle\"><img src=\"https://img.alicdn.com/imgextra/i3/3218158982/O1CN01u97lpK2GDo6Cei1Up_!!3218158982.jpg\" align=\"absmiddle\"><img src=\"https://img.alicdn.com/imgextra/i2/3218158982/O1CN01oxLy2p2GDo6Blrvxz_!!3218158982.jpg\" align=\"absmiddle\"><img src=\"https://img.alicdn.com/imgextra/i1/3218158982/O1CN01vEe8wI2GDo68qIkqC_!!3218158982.jpg\" align=\"absmiddle\"></p>",
            "short_title":"All-Inclusive Drop-Resistant Foldable Screen Smart Window",
            "skus":[
               {
                  "attributes":[
                     {
                        "pTextMulti":{
                           "anyValue":{
                              "present":true
                           },
                           "default":{
                              "present":false
                           },
                           "empty":false,
                           "langAndValueMap":{
                              "CN_zh":{
                                 "value":"\u989c\u8272\u5206\u7c7b"
                              },
                              "US_en":{
                                 "value":"Color classification"
                              }
                           },
                           "notEmpty":true
                        },
                        "pid":1627207,
                        "vTextMulti":{
                           "anyValue":{
                              "present":true
                           },
                           "default":{
                              "present":false
                           },
                           "empty":false,
                           "langAndValueMap":{
                              "CN_zh":{
                                 "value":"matex/xs\u3010\u7eaf\u8272\u9ed1\u8272\u3011"
                              },
                              "US_en":{
                                 "value":"matex/xs [solid color black]]"
                              }
                           },
                           "notEmpty":true
                        },
                        "vid":10832985470
                     }
                  ],
                  "currency":"CNY",
                  "images":[
                     "https://img.alicdn.com/bao/uploaded/i4/3218158982/O1CN01QiINgo2GDo6BPweus_!!3218158982.jpg"
                  ],
                  "inventory":9951,
                  "price":19900,
                  "sku_id":4695947207504
               },
               {
                  "attributes":[
                     {
                        "pTextMulti":{
                           "anyValue":{
                              "present":true
                           },
                           "default":{
                              "present":false
                           },
                           "empty":false,
                           "langAndValueMap":{
                              "CN_zh":{
                                 "value":"\u989c\u8272\u5206\u7c7b"
                              },
                              "US_en":{
                                 "value":"Color classification"
                              }
                           },
                           "notEmpty":true
                        },
                        "pid":1627207,
                        "vTextMulti":{
                           "anyValue":{
                              "present":true
                           },
                           "default":{
                              "present":false
                           },
                           "empty":false,
                           "langAndValueMap":{
                              "CN_zh":{
                                 "value":"matex/xs\u3010\u7eaf\u8272\u7ea2\u8272\u3011"
                              },
                              "US_en":{
                                 "value":"Matex/xs [solid color red]]"
                              }
                           },
                           "notEmpty":true
                        },
                        "vid":10832985471
                     }
                  ],
                  "currency":"CNY",
                  "images":[
                     "https://img.alicdn.com/bao/uploaded/i1/3218158982/O1CN01PYu8s12GDo6CeKK70_!!3218158982.jpg"
                  ],
                  "inventory":9989,
                  "price":19900,
                  "sku_id":4695947207505
               },
               {
                  "attributes":[
                     {
                        "pTextMulti":{
                           "anyValue":{
                              "present":true
                           },
                           "default":{
                              "present":false
                           },
                           "empty":false,
                           "langAndValueMap":{
                              "CN_zh":{
                                 "value":"\u989c\u8272\u5206\u7c7b"
                              },
                              "US_en":{
                                 "value":"Color classification"
                              }
                           },
                           "notEmpty":true
                        },
                        "pid":1627207,
                        "vTextMulti":{
                           "anyValue":{
                              "present":true
                           },
                           "default":{
                              "present":false
                           },
                           "empty":false,
                           "langAndValueMap":{
                              "CN_zh":{
                                 "value":"matex/xs\u3010\u5370\u82b1\u9ed1\u8272\u3011"
                              },
                              "US_en":{
                                 "value":"matex/xs [printed black]]"
                              }
                           },
                           "notEmpty":true
                        },
                        "vid":10832985468
                     }
                  ],
                  "currency":"CNY",
                  "images":[
                     "https://img.alicdn.com/bao/uploaded/i4/3218158982/O1CN01Bxaxi32GDo6DHm6IE_!!3218158982.jpg"
                  ],
                  "inventory":9644,
                  "price":19900,
                  "sku_id":4695947207502
               },
               {
                  "attributes":[
                     {
                        "pTextMulti":{
                           "anyValue":{
                              "present":true
                           },
                           "default":{
                              "present":false
                           },
                           "empty":false,
                           "langAndValueMap":{
                              "CN_zh":{
                                 "value":"\u989c\u8272\u5206\u7c7b"
                              },
                              "US_en":{
                                 "value":"Color classification"
                              }
                           },
                           "notEmpty":true
                        },
                        "pid":1627207,
                        "vTextMulti":{
                           "anyValue":{
                              "present":true
                           },
                           "default":{
                              "present":false
                           },
                           "empty":false,
                           "langAndValueMap":{
                              "CN_zh":{
                                 "value":"matex/xs\u3010\u5370\u82b1\u7ea2\u8272\u3011"
                              },
                              "US_en":{
                                 "value":"matex/xs [printed red]]"
                              }
                           },
                           "notEmpty":true
                        },
                        "vid":10832985469
                     }
                  ],
                  "currency":"CNY",
                  "images":[
                     "https://img.alicdn.com/bao/uploaded/i2/3218158982/O1CN01moVulL2GDo6BlWRrq_!!3218158982.jpg"
                  ],
                  "inventory":0,
                  "price":19900,
                  "sku_id":4695947207503
               }
            ],
            "spu_attributes":[
               {
                  "pTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"\u54c1\u724c"
                        },
                        "US_en":{
                           "value":"trans2EnText"
                        }
                     },
                     "notEmpty":true
                  },
                  "pid":20000,
                  "vTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"EARISE/\u96c5\u5170\u4ed5"
                        },
                        "US_en":{
                           "value":"earise"
                        }
                     },
                     "notEmpty":true
                  },
                  "vid":107806
               },
               {
                  "pTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"\u578b\u53f7"
                        },
                        "US_en":{
                           "value":"trans2EnText"
                        }
                     },
                     "notEmpty":true
                  },
                  "pid":4775707,
                  "vTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"\u534e\u4e3amatexs\u624b\u673a\u58f3\u76ae\u5957"
                        },
                        "US_en":{
                           "value":"Huawei matexs phone case leather case"
                        }
                     },
                     "notEmpty":true
                  },
                  "vid":-1
               },
               {
                  "pTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"\u4fdd\u62a4\u5957\u8d28\u5730"
                        },
                        "US_en":{
                           "value":"trans2EnText"
                        }
                     },
                     "notEmpty":true
                  },
                  "pid":20021,
                  "vTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"\u771f\u76ae"
                        },
                        "US_en":{
                           "value":"Genuine leather"
                        }
                     },
                     "notEmpty":true
                  },
                  "vid":-1
               },
               {
                  "pTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"\u98ce\u683c"
                        },
                        "US_en":{
                           "value":"trans2EnText"
                        }
                     },
                     "notEmpty":true
                  },
                  "pid":20608,
                  "vTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"\u5546\u52a1"
                        },
                        "US_en":{
                           "value":"Commerce"
                        }
                     },
                     "notEmpty":true
                  },
                  "vid":-1
               },
               {
                  "pTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"\u9002\u7528\u624b\u673a\u673a\u578b"
                        },
                        "US_en":{
                           "value":"trans2EnText"
                        }
                     },
                     "notEmpty":true
                  },
                  "pid":28102,
                  "vTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"\u534e\u4e3a"
                        },
                        "US_en":{
                           "value":"Huawei"
                        }
                     },
                     "notEmpty":true
                  },
                  "vid":-1
               },
               {
                  "pTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"\u578b\u53f7"
                        },
                        "US_en":{
                           "value":"trans2EnText"
                        }
                     },
                     "notEmpty":true
                  },
                  "pid":26138623,
                  "vTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"matex matexs"
                        },
                        "US_en":{
                           "value":"matex matexs"
                        }
                     },
                     "notEmpty":true
                  },
                  "vid":-1
               },
               {
                  "pTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"\u751f\u4ea7\u4f01\u4e1a"
                        },
                        "US_en":{
                           "value":"trans2EnText"
                        }
                     },
                     "notEmpty":true
                  },
                  "pid":12060095,
                  "vTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"\u7eff\u91ce"
                        },
                        "US_en":{
                           "value":"Green Field"
                        }
                     },
                     "notEmpty":true
                  },
                  "vid":-1
               },
               {
                  "pTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"\u6b3e\u5f0f"
                        },
                        "US_en":{
                           "value":"trans2EnText"
                        }
                     },
                     "notEmpty":true
                  },
                  "pid":122276315,
                  "vTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"\u4fdd\u62a4\u58f3"
                        },
                        "US_en":{
                           "value":"Protective shell"
                        }
                     },
                     "notEmpty":true
                  },
                  "vid":-1
               },
               {
                  "pTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"\u6d41\u884c\u5143\u7d20"
                        },
                        "US_en":{
                           "value":"trans2EnText"
                        }
                     },
                     "notEmpty":true
                  },
                  "pid":231100582,
                  "vTextMulti":{
                     "anyValue":{
                        "present":true
                     },
                     "default":{
                        "present":false
                     },
                     "empty":false,
                     "langAndValueMap":{
                        "CN_zh":{
                           "value":"\u6298\u53e0\u4fdd\u62a4"
                        },
                        "US_en":{
                           "value":"Folding protection"
                        }
                     },
                     "notEmpty":true
                  },
                  "vid":-1
               }
            ],
            "status":"NORMAL",
            "title":"Huawei Matexs Phone Case Matex Protective Case Leather Sheath All-Inclusive Drop-Resistant Foldable Screen Smart Window 5G Men"
         }
      ]
   },
   "request_id":"0b5fbf9e16139849363022532",
   "success":true
}






Create order
本文档旨在指导您创建跨境供销订单。

完成该业务，主要分为以下几个步骤：

请求创建跨境供销订单
支付订单
跟踪订单状态
请求创建跨境供销订单
透过 /purchase/order/create 常见跨境供销订单。

需要创建的商品资料包含在 orderLineList 中，创建的商品将根据平台规则自动拆单订单。

请求示例

{
   "orderLineList":"[{\"itemId\":600068435000185140,\"orderLineNo\":\"1\",\"quantity\":\"3\",\"price\":23,\"currency\":\"USD\",\"title\":\"PRODUCT FOR YOU \",\"skuId\":4683815098027}]", //订单商品信息
   "orderSource":"lazada", //销售平台
   "outerPurchaseId":"CG255345322484732", //外部销售平台订单编码
   "purchaseAmount":443,
   "receiver":{
      "address":"No36 FX road", //卖家境外收货地址 - 地址
      "city":"Klaeng", //卖家境外收货地址 - 城市
      "country":"Thailand", //卖家境外收货地址 - 国家
      "district":"Mueang Rayong District", //卖家境外收货地址 - 区
      "name":"John T", //卖家境外收货地址 - 姓名
      "phone":"00102836456", //卖家境外收货地址 - 电话
      "state":"Rayong", //卖家境外收货地址 - 省份、州
      "zip":"21160" //卖家境外收货地址 - 邮编
   },
   "sellerOrderNumber":"-", //卖家系统订单编码
   "warehouseAddressInfo":{
      "address":"文一西路999号", //中国集运仓收货地址 - 地址
      "city":"杭州市",//中国集运仓收货地址 - 城市
      "country":"中国",//中国集运仓收货地址 - 国家
      "district":"余杭区",//中国集运仓收货地址 - 区域
      "name":"张三",//中国集运仓收货地址 - 姓名
      "phone":"13888888888",//中国集运仓收货地址 - 电话
      "state":"浙江省",//中国集运仓收货地址 - 省份
      "zip":"310000"//中国集运仓收货地址 - 邮编
   }
}
响应示例

{
    "data": {
        "payment_url": "https://distributor.taobao.global/apps/purchasenote",
        "success": true,
        "outer_purchase_id": "CG2553453224324201",
        "order_list": [
            {
                "purchase_id": 200000241003,
                "order_line_list": [
                    {
                        "quantity": 3,
                        "order_line_no": "1",
                        "item_id": 600068435000185100,
                        "estimate_amount": 3,
                        "sku_id": 4683815098027,
                        "estimate_currency": "CNY",
                        "sub_purchase_order_id": 200000241004
                    }
                ],
                "estimate_amount": 3,
                "estimate_currency": "CNY"
            }
        ]
    },
    "success": true,
    "code": "0",
    "request_id": "0000000000000000000000000"
}
支付订单
订单创建完成后，需要尽快前往跨境供销平台完成订单支付。支付页面的地址可使用创建跨境供销订单返回的 payment_url 。未完成支付的订单将会根据平台规则自动关闭。

跟踪订单状态
可透过 /purchase/orders/query 可查询订单信息。

若需要及时订单状态（如当商品发货后，希望可以收到订单通知），可订阅消息服务。







Find similar items
本文档旨在指导您快速查询一批商品是否存在于跨境供销平台（找同款），并根据查询结果批量建立商家的铺品关系。

完成该业务，主要分为以下几个步骤：

查询商品是否存在于供销平台
批量建立选品关系
创建订单后，您可以：

创建订单


查询商品是否存在于供销平台
透过 /product/same/query 接口查询商品是否存在于供销平台。

item_ids 为商品 id 列表，type 为当前商品存在的渠道。目前仅支持 type=TAOBAO 的商品查询。

返回结果中的 data 体中商品为存在于跨境分销平台的商品，可透过 /product/relation/build 接口进行铺货。

fail_items 体中的商品为不存在于跨境分销平台的商品。

{
   "code":"0",
   "data":[
      {
         "detail_url":"https://distributor.taobao.global/apps/product/detail?mpId=600084670918432591",
         "images":[
            "https://gd2.alicdn.com/imgextra/i1/1912652759/O1CN01CYrUWe1WFfLdfgysQ_!!0-item_pic.jpg"
         ],
         "item_id":600084670918432591,
         "leaf_cate_id":201243089,
         "leaf_cate_name":"Cushions & Mounts",
         "supply_item_id":619093432591,
         "title":"\u6c7d\u8f66\u5750\u57ab\u56db\u5b63\u901a\u7528\u5168\u5305\u5ea7\u5957\u4e13\u7528\u5ea7\u6905\u59572020\u65b0\u6b3e\u5c0f\u8f66\u5ea7\u57ab\u5957\u590f\u5b63\u51b0\u4e1d"
      }
   ],
   "fail_items":[
      {
         "error_message":"10001::NOT_FOUND",
         "item_id":"577677932079"
      },
      {
         "error_message":"10001::NOT_FOUND",
         "item_id":"600069234047766362"
      }
   ],
   "request_id":"0b5fbf9e16142377744363614",
   "success":true
}
批量建立选品关系
透过 /product/relation/build 接口查询商品是否存在于供销平台。根据 data 体内的商品为铺品成功，和 fail_items 内的商品为铺品失败，可以参考每个商品的 error_message 判断失败原因。

如下述「Failed to publish the dest market item for Market Merchant Product query failed」即商品不存在。

{
   "code":"0",
   "data":[
      "600069234047766362",
      "600082404577235676"
   ],
   "fail_items":[
      {
         "error_message":Failed to publish the dest market item for Market Merchant Product query failed",
         "item_id":"600069234042766362"
      },
      {
         "error_message":"Failed to publish the dest market item for Market Merchant Product query failed",
         "item_id":"600069254047766362"
      }
   ],
   "request_id":"0b17f2b816142355105313491",
   "success":true
}





Notice status of items
本文档旨在指导您如何通知天猫淘宝全球供销平台该商品的终端展示状态。

完成该业务，主要分为以下几个步骤：

在外部电商（如：LAZADA）上架商品时，通知淘宝全球供销平台该商品的上架状态
当商品下架时，通知淘宝全球供销平台该商品的下架状态
同步销售渠道上下架状态
当商品在外部销售渠道发品或上下架，需要透过 /product/on/off/shelve 将该商品的展示状态通知淘宝全球供销平台。

参数说明



请求示例

[
   {
      "salesPlatItemId":"1005002589519696",  // 销售平台的 itemId
      "salesPlatName":"AliExpress",  // 销售平台的名称
      "itemId":"600078450364649290",  // 天猫淘宝供销平台 itemId
      "status":"1", // 销售平台的 item 上下架状态
      "salesPlatShopName":"cn1528816669ouww",  // 销售平台的店铺名称
      "skuList":[
         {
            "salesPlatSkuId":"14:193;5:100014066",  // 销售平台的 SKUId
            "salesPlatPrice":"26.91",  // 销售平台价格
            "salesPlatCurrency":"USD",  // 销售平台币种
            "status":"1",  // 销售平台的 SKU 上下架状态
            "skuId":"4735914930617"   // 天猫淘宝供销平台 SKUId
         },
         {
            "salesPlatSkuId":"14:193;5:100014064",
            "salesPlatPrice":"26.91",
            "salesPlatCurrency":"USD",
            "status":"1",
            "skuId":"4735914930618"
         }
      ]
   }
]
返回示例

{
   "data":[
      {
         "item_id":600078450364649290,
         "sales_plat_item_id":"1005002589519696",
         "sales_plat_name":"AliExpress",
         "success":true,
         "error_msg":""
      }
   ],
   "success":true,
   "error_code":"",
   "error_msg":""
}





Find similar items of platform
本文档旨在指导您将自己平台已经产生订单的其他电商渠道商品，去跨境供销平台查询同款，以获取更优势的渠道价格和成交返点。

 

完成该任务，主要分为以下几个步骤

一、 导购场景：
查询一个电商平台商品在是否在供销平台存在同款。
获取该电商平台商品在供销平台的同款商品ID（mpid）。
采购分销商需要和该mpid创建签约关系。
使用该mpid进行下单。
二、 批量查询场景：
批量传入其他电商平台的商品list，并获取这些商品在跨境供销平台上的同款商品关联信息
采购分销商需要和这些mpid创建签约关系。
使用这些mpid在供销平台上下单。
 

三：单品查询场景
1.1）查询供销平台同款商品
透过/product/get接口查询同款商品清单。你可以在这个接口下查询哪些商品在供销平台有同款，以及有同款商品的详情。

接口文档：https://open.taobao.global/doc/api.htm#/api?cid=4&path=/product/get

 

1.2）获取同款商品在供销平台的商品ID
透过/mpId/get接口获得供销平台的商品ID（mpid）。建议您在距离上一步操作完成间隔5秒后，再进行该接口的调用。

接口文档：https://open.taobao.global/doc/api.htm#/api?cid=4&path=/mpId/get

 

1.3）批量建立选品关系
请查阅《批量查询商品及建立铺品关系 - 批量建立选品关系》部分
注：如果您的mpid是通过/mpId/get接口获得的，您需要在创建品上关系时，在“channel type”字段使用“PANAMA_DG”这个值。

接口文档：https://open.taobao.global/doc/api.htm#/api?cid=4&path=/product/relation/build

 
请求创建跨境供销订单、支付订单、查询订单

请查阅《创建跨境供销订单》部分

注：如果您的mpid是通过/mpId/get接口获得的，您需要在创建采购单时，入参“channel_order_type”字段使用“PANAMA_DG” 这个值。

 

 

四：批量查询场景
2.1）批量查询供销平台同款商品
透过batch/src/products/check接口批量查询同款商品。你可以在接口中指定查询SKU同款。

接口文档：https://open.taobao.global/doc/api.htm#/api?cid=4&path=/batch/src/products/check

 

2.2）批量建立选品关系
请查阅《批量查询商品及建立铺品关系 - 批量建立选品关系》部分
注：如果您的mpid是通过/batch/src/products/check接口获得的，您需要在创建品上关系时，在“channel type”字段使用“PANAMA_DG”字段。

接口文档：https://open.taobao.global/doc/api.htm#/api?cid=4&path=/product/relation/build

 

请求创建跨境供销订单、支付订单、查询订单

请查阅《创建跨境供销订单》部分

注：如果您的mpid是通过/batch/src/products/check接口获得的，您需要在创建采购单时，入参字段“channel_order_type”字段使用“PANAMA_DG”这个值。

 

订单流程
其中创建采购单接口文档：https://open.taobao.global/doc/api.htm#/api?cid=5&path=/purchase/order/create

查询采购单接口文档：

https://open.taobao.global/doc/api.htm#/api?cid=5&path=/purchase/orders/query





Open Platform Development Manual
1 Platform Guidelines
1.1 Overview
Taobao Global Open Platform is an end-to-end API development and operation integration platform that provides developers with programmatic access to data on products, orders, shipments, logistics and settlements of platform sellers and resellers, and provides a development environment for users to integrate applications through the API system to provide more diverse seller needs and share your applications to more Taobao global sellers.

The open platform has the following features and advantages.

Open API library：it can cover rich API interfaces in the e-commerce sector, including product, order, user, marketing and logistics management, and can support up to 10 million calls per day.
Stable performance：High parallelism and excellent API call success rates ensure your application's performance.
Security framework：A reliable security framework for protecting the seller's business data.
Data Board：Statistics on the success and failure rates of API calls initiated by the application.
 

2 Newbie guide
2.1 Access to the process
If you are new to the Taobao Global Open Platform, this guide will help you quickly understand how to start developing your application using the API, deploying it live and sharing your application to users of the Taobao Global Business.



 

2.2 Join the cross-border supply platforms
To enter the cross-border supply platform, note that you need to register in advance, to go for approval (about 1 to 2 people days), generally find their own business classmates to register. After registration, through the open platform of the authorization address link, looking for business students to log in cross-border supply platform for the corresponding authorization, and through the callback address to obtain the authorization code code, with code can call the creation of Token interface to generate a token!

https://distributor.taobao.global/apps/register/registration

Cross-border supply platform help document：

https://helpcenter-globalsupply.taobao.global/page/knowledge?pageId=216&category=1000005768&knowledge=1000056110&language=zh

2.3 Join the Open Platform
If you are a third-party developer who wishes to develop applications that integrate with the Taobao Global Open Platform business through APIs, then you can register as a developer on the Taobao Global Open Platform. Firstly, you can ask your business peers to register a developer account and sign the platform's developer agreement.

Register a developer account on the Taobao Global Open Platform by following these steps.

1) Open the Taobao Global Open Platform homepage at https://open.taobao.global and click on "Join Now".

2) Enter your email address and verification code on the page that opens, then click on "Send Email" to verify.

3) Open the verification email from your email address and click on the verification link, the account registration page will open again. Note: The verification email may be in a spam folder.

4) On the account registration page, set your password, read and check the box to accept the Taobao Global Open Platform Developer Agreement.

5) Click "Finish" to complete your account registration.

2.4 Create a developer application
Description: Once your Open Platform developer account has been added, you can start registering your app on the Taobao Global Open Platform.

Go to the Create Application page


Apply for the application type "Global Supply and Marketing Platform/全球供销平台" category
Description: The application type is used to initialise the data configuration when an application is added. It is a template that defines information about the application's licensing policy, licence duration, API licence rights group, API call restriction policy, etc. An application can only belong to one application type. The Supply and Sales Platform application type is "Global supply and marketing platform/全球供销平台".



Specific step-by-step details.：

A. Log in to the Taobao Global Open Platform and open the APP Console;

B. Click on "Add" to display a list of application types that can be applied for;

C. Read the app type description, find the app type you want to apply for and click "Apply';

D. Enter the business requirement for requesting the application type in the "Reason" field of the application window;

E. (Optional) Attach documentation to the request if required. The documentation can be a market analysis, a business plan or the design of the application;

F. Click 'OK' to submit the request;

G. The status of the application type will be displayed as 'Pending' and your request will be reviewed by the platform administrator (approximately 2-3 working days). If you are unable to find a suitable category for your application, please contact the Taobao Global Open Platform Operations team；



Create a developer application
Description: Once the application type request is approved, the status of the application type will change to "valid", after which you can submit detailed information about your application. The steps are as follows:



Create application details:

A. On the request type page, click "Add APP ";

B. Enter information about the application, including: Application name, callback address (redirect URL for seller authorization), application LOGO；

C. Click on "Submit";

D. Once the app has been successfully added, click on "APP Overview" to view the list of apps, including the app name, app key, type and status of each application；



 

2.5 Application Management
2.5.1 Get AppKey and AppSecret
AppKey: It is the unique identifier of the application on the Taobao Global Open Platform. The App Key is one of the parameters that must be included when making an API call request and the application will be identified by the Taobao Global Open Platform through the App Key.

AppSecret: It is the password assigned to the app by Taobao Global Open Platform to ensure the security and reliability of the app source. You must keep the app key safe and do not share it with other third parties.

Once your app registration is complete, the App Key and App Secret will be generated automatically. You can view or reset the App Key from the App Console/App Preview page.

From the list of apps, click 'Manage' to go to the App Preview page.
The App Key will be displayed directly on the App Preview page.
In App Secret click 'View' to view your App Key.
Click 'Reset' to reset the App Key of your app. If there is an "App Key Expired" field, please select the expiry time (in hours) of your old APP key.
After resetting the App key, you must update the information about your application.
As shown in the picture:



2.5.2 Apply for an API license
On the Taobao Global Open Platform, an API Permission Group defines a set of API groups with specific permission bindings. Without an API permission, API calls initiated by an application will be rejected.

An application type can contain multiple API permission groups. When the application is added, it will be granted some API permission groups, but other permission groups need to apply separately. The status of the API permission group is as follows:

Valid: API permission groups are available by default or have been requested and approved as available.
Invalid: API permission groups require a separate application or an unsuccessful application.


2.6 Seller's authorization
2.6.1 Authorisation notes
Configure Seller Authorization If your application needs to access the seller's business data, your application needs to be authorized by the seller. You need to guide them to complete the "Authorization with Taobao Global Account" process. After registering your application on Taobao Global Open Platform, you can start your application development. API reference-A complete reference document for each API.



2.6.2 Delegation Strategy
Taobao Global Open Platform uses OAuth 2.0 protocol for user authentication and provides different authorization policies for different application categories, which are predefined for the application category your application belongs to. You can view the detailed authorisation policies for your application on the Authorisation Management page, including the following:

Licensing Policy: The overall policy of the application
"Access Token' cycle: the period of validity of the application's Access Token
"Refresh Token" period: the period for which the Refresh Token is valid (see the OAuth documentation for more information)
Authorisation page: whether to display the authorisation page (the authorisation page is preset to be displayed)
Authorisation protocol: OAuth 2.0 authorisation type
Authorised user limit: maximum number of sellers for the authorised application
Important to note that the following two authorisation policies apply to different app categories:

Allow tied user authorisation: This authorisation policy applies to categories that interface directly with the big seller's internal app or "customer service". This policy allows only sellers who have been set up in the 'Authorised Seller Whitelist' to authorise your app.
Allow logged-in users: This policy applies to applications related to ERP systems such as "Product Management", "Order Management" and "Logistics Management".
2.6.3 Designated whitelist authorisation
If you have developed an app for a specific seller, you can limit the scope of authorisation by specifying a whitelist of sellers on the Taobao Global Open Platform, so that only these sellers can authorise your app to access their business data on the Taobao Marketplace. After your app has been deployed online, you will need to provide your sellers with the authorisation URL and when they log into your app for the first time, they will be prompted to complete the authorisation process.

Take the following steps to specify the short code of the seller who can authorise your application to access their business data:

Take the following steps to specify a shortcode for sellers who can authorize your application to access their business data:

Open APP Console, click APP Management -> Authentication Management.
In the Authorization Information section, view the description of the app authorization policy.
In the Authorised Seller Whitelist section, enter the seller account number in the Authorisation field. Multiple seller accounts can be separated by a semicolon.
Click "Submit ".
Note: If you are a third party developer and your app is available to all users of the Taobao Global Open Platform business, then you only need to provide the URL of your app to the seller when the app is deployed online and the seller can follow the URL to complete the authorisation process. Please refer to the Seller Authorisation section for the authorisation process.
2.6.4 Seller's authorization steps
Description: If your application needs to access a seller's business data (e.g. product and order information) via the Taobao Global Open Platform, you will need to obtain the seller's authorisation, i.e. the 'Access Token' required to access the seller's information. You will need to guide the seller through the 'Application for Authorisation to Login using the Cross Border Supply Platform' process. This process uses the international OAuth 2.0 standard protocol for user authentication and authorisation.

The Taobao Global Open Platform uses the "Code for token" model, described as follows:

Server Address: https://api.taobao.global/oauth/authorize

Authorisation steps (as shown in the diagram):



2.6.4.1 Splicing Authorization URL
Spell out the authorised URLs and direct access to them by business students according to the following rules:

https://api.taobao.global/oauth/authorize?response_type=code&redirect_uri=${redirect_uri}&force_auth=true&client_id=${appkey}

Note: Please replace "appkey" and "redirect_url" with your developer application configuration.

The list of authorization URL parameters is described below:

parameter	Is it necessary?	value	describe
client_id	 	xxx	The App Key of your application assigned by the open platform.
redirect_url	 	The file back URL provided when the application is created.	Redirect_url is the receiving code returned to you by the seller upon completion of authorization, which must be the same as the file URL provided when creating the application on taobao Global Open Platform.
response_type	 	code	The authorization type whose value is code.
force_auth	 	true	Refresh the Web browser Cookie to obtain the new authorization process.
state	 	It can be customized, for example, 1212.	The state of the application is the same as that of input and response.
uuid	 	uuid283118319	The identity assigned to the seller protects the returned authorization code.
2.6.4.2 Guide seller authorization
Guide the distributor to open the above authorization URL through the web browser, and the authorization login page as shown in the following figure will appear. The left side shows the permissions granted by the seller to the application after Authorization. You need to enter the cross-border supply platform account and password registered in step 2.2 (note that it is not an open platform account! Otherwise, it cannot be purchased normally), click "Log in and Authorize" to complete the authorization of the application.



2.6.4.3 Obtain the authorization code
After the seller completes the authorization, Taobao Global Open Platform returns the authorization code to the return URL address. Your application uses the authorization code to obtain the AccessToken. The URL will be the APP callback address you set + authorization code (code)

For example:



Note:

this authorization code will expire within 30 minutes. You need to use this code to obtain the Access token before it expires.
2.6.4.4 Get AccessToken according to code
Description: Use the API "/auth/token/create" to get AccessToken

Note: The Access Token is valid within a certain time range. The seller does not need to re-authorize the application before it expires. You need to be properly Keep the latest token.

IopClient client = new IopClientImpl("https://api.taobao.global/rest", appkey, appSecret);
IopRequest request = new IopRequest("/auth/token/create");
request.addApiParameter("code", "0_TryzT8Vd9T1pwS7VWZ2qlMOS5");
IopResponse response = client.execute(request);
System.out.println(response.getBody());
Output parameters (for reference only):

{

   "code": "0",

  "access_token": "50000601c30atpedfgu3LVvik87Ixlsvle3mSoB7701ceb156fPunYZ43GBg",

   "refresh_token": "500016000300bwa2WteaQyfwBMnPxurcA0mXGhQdTt18356663CfcDTYpWoi",

   "account_id": "7063844",

   "user_Id": "1001",

   "account_platform": "seller_center",

   "refresh_expires_in": "60",

   "error_code": "error_code",

   "expires_in": "10",

   "request_id": "0ba2887315178178017221014",

   "seller_Id": "10011",

   "account": "xxx@126.com",

   "short_code": "HK001"

}

The following table lists the token parameters and descriptions:

Key	Type	Sample	Description
access_token	string	50000601c30atpedfgu3LVvik87Ixlsvle3mSoB7701ceb156fPunYZ43GBg	Access token.
refresh_token	string	500016000300bwa2WteaQyfwBMnPxurcA0mXGhQdTt18356663CfcDTYpWoi	Refresh token, used to Refresh when refresh_expires_in >0.
expires_in	number	25920 (expires in 25920 seconds)	The Access token expires in seconds: 7 days for "test" applications, 30 days for "online" applications.
refresh_expires_in	number	25920 (expires in 25920 seconds)	Refresh Token expiration time 30 days for applications in test state 180 days for applications in online state refresh Token expiration time 30 days for applications in test state 180 days for applications in online state
account_id	string	706388888	User ID, which can be ignored when account_platform = seller_center.
account	string	xxx@126.com	User account.
account_platform	string	seller_center	User platform, supporting multiple platforms.
View the actual validity period:

Note: The application of the developer who has not been released and launched (in the test phase) will be shorter than the application that has been launched. Therefore, the developer must apply for the application to be released and launched after the docking is completed! You can adjust the refresh token policy accordingly. If your business needs to extend the token or refresh token validity time, you can find the owner of the open platform to adjust it.

Example (test phase):



2.6.4.5 Token refresh policy
Description: Use the API "/auth/token/refresh" to update the AccessToken.

IopClient client = new IopClientImpl(UrlConstants.API_GATEWAY_URL_TW, appkey, appSecret);
LazopRequest request = new LazopRequest();
request.setApiName("/auth/token/refresh");
request.addApiParameter("refresh_token", "50001600212wcwiOabwyjtEH11acc19aBOvQr9ZYkYDlr987D8BB88LIB8bj");
LazopResponse response = client.execute(request);
System.out.println(response.getBody());
Output parameters (for reference only):

{

   "code": "0",

  "access_token": "50000601c30atpedfgu3LVvik87Ixlsvle3mSoB7701ceb156fPunYZ43GBg",

   "refresh_token": "500016000300bwa2WteaQyfwBMnPxurcA0mXGhQdTt18356663CfcDTYpWoi",

   "account_id": "7063844",

   "user_Id": "1001",

   "account_platform": "seller_center",

   "refresh_expires_in": "60",

   "error_code": "error_code",

   "expires_in": "10",

   "request_id": "0ba2887315178178017221014",

   "seller_Id": "10011",

   "account": "xxx@126.com",

   "short_code": "HK001"

}

With API "/auth/token/refresh", the data structure returned is the same as the data structure returned by obtaining access rights through the authorization code. You will get new access_token and refresh_token . You must save the latest refresh_token to get a new access_token . Note that the access_token duration is reset, but the refresh_token duration is not reset. After the refresh_token expires, the seller will need to reauthorize your app to generate new access_token and refresh_token.

2.6.4.6 Token aging description
Note:

The seller does not need to authorize again before the RefreshToken expires.
If refresh_expires_in = 0, Access Token cannot be refreshed. Call/auth/token/refresh API to refresh access only if refresh_expires_in> 0
If you need to update the AccessToken, it is recommended to refresh within one week before the AccessToken expires.
If the validity period of the current token has a greater impact on your business, the person in charge of the supply platform can be extended.
field	Application Status: Test (aging)	Application Status: Online (aging)
code	30 minutes	30 minutes
access_token	30 days	30 days
refresh_token	60 days	180 days
3 Development documentation
3.1 Usage 1: Use SDK request (recommended)
Description: The SDK is automatically generated for your application, including combining requests, generating encryption, response interpretation, and information monitoring. Use the SDK Call API operations are easy to understand. We recommend that you use the official SDK to call API operations.

Environmental requirements:

JAVA SDK requires JAVA SE/EE 1.5 or newer version;
Net SDK requires. Net Framework 2.0 or newer (Windows Phone is not supported);
PHP SDK requires PHP 5 or an updated version;
Python requires Python 3.0 or later;
for Ruby, you can install it directly.
3.1.1 SDK download
Before downloading the SDK, you must register as a developer and log on. The downloaded SDK is directly associated with the application.

To download the SDK for an application, you can take the following steps:

log in and open the APP console page.
click "Manage" in the APP list to open the APP overview page.
on the APP management navigation page, click "SDK download"
click "Download" to complete the download of the SDK that meets a specific programming language.
JAVA SDK requires JAVA SE/EE 1.5 or newer version;
Address: https://open.taobao.global/app/index.htm#/sdk/download, as shown in the following figure:



3.1.2 Call request address
Description: Before using the SDK, modify the request server

Call request address: https://api.taobao.global/rest

3.1.3 Call example


3.2 Usage 2: Use HTTP request API
3.2.1 API call process
Call the API of Taobao Global Open Platform by using HTTP requests. You can use the SDK provided by the platform to call an API (recommended), or assemble the request according to the custom format of the Taobao Global Open Platform protocol (only if the official SDK is not provided in this programming language). This topic describes how to assemble HTTP requests to call.

API calls require input data and return data as output responses. The general steps for calling an API by generating an HTTP request are as follows:

fill in the parameters and values
signature encryption algorithm
assemble HTTP requests
start the HTTP request
get the HTTP response
explain the JSON/SML response
For more information on open platform API calls, see API tutorials.

3.2.2 Call request address
Taobao Global Open Platform provides an online production environment. The data generated in this environment is real and valid online data, and provides a limited number of calls and permissions. The production environment shares data with the online system. The real data of online stores is directly affected by API operations. Be sure to operate with caution.

The call request address is: https://api.taobao.global/rest

3.2.3 Request and response
Taobao Global Open Platform API supports both HTTP and HTTPS communication protocols. To ensure data security, we recommend that you use the HTTPS protocol to send API requests. Although most APIs are called through GET, and some calls for additional request information are sent through POST, sometimes more information needs to be provided than the data that can be transmitted in the request parameters. In many cases, additional data is sent to the server through a POST request. The body of the request must be in XML format, and all data (including parameter names and values) must be utf8 encoded.

Each HTTP request URL must contain the API path. For example, a request to the/order/get API should be https://api.taobao.global/rest/order/get 。 Common parameters and business data are included in the request or sent through POST.

All API calls return a response document that shows the status of the operation (success or error) and may provide results and/or details related to the specified operation. The response format is JSON.

3.2.4 Request for input
In addition to the parameters associated with the application, the call to the API must also contain system parameters. Different APIs require different application-specific parameters.

System parameters

System parameters are required for HTTP requests for each API call, as shown in the following table:

Name	Type	Whether or not mandatory	Description
app_key	String	Yes	The app key assigned to the application.
access_token	String	Conditional	For APIs that require seller authorization, the seller authorization token is required.
timestamp	String	Yes	The time when the request is sent, in UTC or digital format, such as "2018-11-11 T12:00:00Z or 1517886554000". Note that the difference between the timestamp and the UTC time should not exceed 7200 seconds.
sign_method	String	Yes	The algorithm used for signature encryption.
sign	String	Yes	The password signature used to verify the request.
Business parameters

In addition to the system parameters that must be included in the API call request, the request service parameters are also required. For more information about the business parameters of each API, see the API documentation.

3.2.5 Parameter signature
Taobao Global Open Platform verifies the identity of each API request, and the server also verifies whether the call parameters are valid. Therefore, each HTTP request must contain signature information, and requests with invalid signatures will be rejected.

Taobao Global Open Platform uses the App Key and the key assigned to the application to verify the identity of the request. The App key is used to generate a signature string when requesting a URL and a server-side signature string. Please keep your key strictly confidential.

If you manually write HTTP requests without using the official SDK, you need to understand the following signature algorithms.

The process of generating a signature is as follows:

sort all request parameters (including system and application parameters, except for "symbol" and byte array type parameters) according to the parameter name in the ASCII table.
3.2.6 HTTP request example
Taking the GetOrder (/order/get) API request as an example, the steps to form an HTTP request are as follows:

Step 1: Fill the basic parameters

app_key = “123456”
access_token = “test”
timestamp = “1517820392000”
sign_method = “sha256”
Business parameters:

order_id = “1234”
 

Step 2: Sort all parameters and values according to the parameter names in the ASCII table

access_token = “test”
app_key = “123456”
order_id = “1234”
sign_method = “sha256”
timestamp = “1517820392000”
Step 3: Connect the sorted parameters and their values to a string

access_tokentestapp_key123456order_id1234sign_methodsha256timestamp1517820392000

Step 4: Add the API name in front of the connected string

/order/getaccess_tokentestapp_key123456order_id1234sign_methodsha256timestamp1517820392000

Step 5: Signature encryption algorithm

Assuming that App Secret 为「helloworld」，The signature：

hex(sha256(/order/getaccess_tokentestapp_key123456order_id1234sign_methodsha256timestamp1517820392000))=4190D32361CFB9581350222F345CB77F3B19F0E31D162316848A2C1FFD5FAB4A

Step 6: Assemble the HTTP request and encode all parameters and values using the UTF-8 format (the order of the parameters can be arbitrary) (using "sign" parameters).

http://api.taobao.global/rest/order/get?app_key=123456&access_token=test&timestamp=1517820392000&sign_method=sha256&order_id=1234&sign=4190D32361CFB9581350222F345CB77F3B19F0E31D162316848A2C1FFD5FAB4A

3.3 Error Code
All API calls return a value that shows the status of the operation (success or error) and may provide results and/or details related to the specified operation.

When an API call fails, the system also returns a request ID and an error code. There are three common API call errors:

SYSTEM:API platform error
ISV: Business data error
ISP: Back-end service error
 

API platform error (ISV errors)

The API platform errors usually occur because the request from a user does not fulfill the basic verification. When encountering such errors, check the authority, frequency and other conditions of the applications. Then, check the uploaded parameters for completeness and validity based on the API documentation.

 

Business data error (ISP errors)

These errors are the result of a business logic error, these errors are caused if you do not follow the certain business rules set out by the Lazada Platform (e.g. product creation rules, platform policy rules, etc).

When encountering such errors, check whether the corresponding information is uploaded based on the error information. It is recommended to try again after correcting such errors. Should you still receive the error messages, please reach out to the Lazada Partner Seller Support to find out the business

 

Backend service error

The backend service errors are usually caused by the availability of API service. Please try again after some time, if the issue persists, please contact our technical support team.

For example

ErrorCode	ErrorMsg	Description
ServiceTimeout	The request has failed due to RPC timeout.	an error message that describes the timeout of an API call
502 Bad Gateway	The proxy server received an invalid response from an upstream server. Sorry for the inconvenience.	If the Qps is too high, the request fails to reach the gateway. We recommend that the distributor retry the request.
InternalError	The request processing has failed due to some unknown error, exception or failure.	The API call failed. Check whether the input parameters and API documents are correct.
4 Commissioning and maintenance
4.1 API testing tools
Taobao Global Open Platform provides you with an API testing tool to test APIs on the platform. The steps to start the API testing tool are as follows:

Open the application console and click the "Manage" button of the application;
On the APP management page, find and click "API Testing Tools" from the left-side navigation bar;
In the API test tool, enter the API name and click to obtain the parameters. The system will automatically bring out the API parameters.
Note: The API testing tool uses online data from the production environment.
Parameter description. The API test tool parameter is described as follows:

Name	Description	Sample values
API Path	which describes the path of the API that you want to test.	/brands/get
HTTP Method	Most APIs are called through GET, and some calls that get additional request data are sent via POST.	GET or POST
App Key	The unique identity of your application on the open platform is generated when the application is created.	100126
Access Token	The token required for your application to access seller sensitivity data.	 
Business parameters	The business parameters of the API to be tested.	According to the selected API, different parameter fields can be filled in.
Request	When the parameters are specified, click the "Start Test" |button, and the request URL will be generated and displayed in the request field.	 
Response	The API response body of the specified parameter.	 
4.2 Test Application (Pending)
After completing the configuration of the application, you can start testing the application using the Taobao Global Unified Account. You need a seller account to complete the vendor authorization process for interface debugging. If you don't have a test account, Taobao Global Open will provide you with some test accounts to test your application. To obtain a test account, follow these steps:

interface debugging. If you don't have a test account, Taobao Global Open will provide you with some test accounts to test your application. To obtain a test account, follow these steps:

Open the APP console and click Test Account-> Borrow Account.
On the test account application page, enter the business requirements for the test account, click Submit, and a test account will be assigned.
Check the test account information, especially the password rules of the test account.
Important information:

The password for the test account consists of (your developer account) and (password).

For example, if your developer account on the open platform is test@mail.com, and your developer account password is ABC, then the password for the test account is test@mail.com | ABC.

Note: In order to successfully test the application, you should issue 1000 + calls to the Open Platform every day for two weeks with a success rate of at least 95%. If you do not have enough test API call records, you will not be able to respond to your application.

4.3 Deploy the application
Deploy applications When your application is developed and tested, you can deploy your application online to a hosting environment.

Do these steps to complete the deployment process:

In the application list, click Manage to open the overview page of the application.
On the APP overview page, you can find the "APP Status" field in the Basic Information section.
Click Online Application.
Enter a description of the application to be deployed online in the "Reason" field in the application box.
(Optional) Attach a document to the application as needed, which can be a test report for the application.
Click "OK".
Once the online deployment request is approved, the status of the application will be changed to online. The application can then be deployed to the requested or planned hosting environment.

4.4 Monitor application data
After the application is published online, you can monitor the statistics of API calls initiated by the application through the Data Dashboard page.

The data dashboard provides the following categories of statistics:

APP statistics-Statistics based on API calls over a period of time

date
the total number of APIs called by the application.
total number of successful calls
total number of failed calls
verage QPS (query per second)
Seller Statistics-Seller's API call statistics over a period of time

date
Seller
the total number of APIs called by the seller.
average QPS (query per second)
Error code statistics-API error code statistics over a period of time

API name
Error type
Error code
Error message
the total number of each error
5 Main API scenarios
5.1 Forward Transaction Scenario
5.1.1 Purchasing mode
Fast procurement process (recommended) 1: commodity collision-transaction

Scenario description: According to the Taobao product ID, you can obtain the product model of the cross-border supply platform by using the product ID of the Taobao product, and purchase the product that has successfully collided with the database.

 



 

Fast procurement process (recommended) 2: Taobao similar recommendations-transactions.

Scenario description: The entry parameter is the Taobao product ID. You can obtain a batch of similar products in the Taobao product pool and have low prices (from low to high). You can place orders from the returned batch of products according to their own needs. (When similar users shop on Taobao, they search through a picture of the target product, and then Taobao retrieves the corresponding similar product and shows it to you from low to high according to the price).

 



5.1.2 Shopping Guide Mode
Rapid procurement process (recommended) 1: Distribution-transaction

Scenario description: The platform selects a batch of goods from the product pool to the distributor according to the user's needs, or the distributor manually selects the required goods on the cross-border supply platform for distribution. After the product is successfully distributed, the supply and marketing platform system sends a successful delivery message to the distributor. The distributor can subscribe to the distribution message in the open platform developer application and analyze the message accordingly. Obtain product information (the message body mainly includes the channel product ID, distributor ID, etc.), call the cross-border supply platform product details interface based on the channel product ID to obtain the product details such as SKU, and persist to its own system platform, and then place orders for the product.

 



 

Quick procurement process (recommended) 2: Search (Post URL format)-transaction

Scenario: You can search for the same product in the cross-border supply platform based on the image of the purchased product or the channel product ID, and then obtain the returned product ID. You can call the cross-border supply platform to obtain the product details such as SKU, and then purchase the product.

 



 

Fast procurement process 3: cross-border supply platform with the same payment-transaction

 



 

5.2 Reverse Trading Scenario
5.2.1 After-sales process
Business description: distribution through the supply and marketing platform to initiate the purchase order, through the supply and marketing platform interface for the relevant after-sales operation, secondly, can also use the scene as shown in the following figure, through its own distribution platform after-sales capacity building, access to cross-border supply and marketing platform external OpenAPI to complete the after-sales purchase order. Before accessing the OpenAPI, it is necessary to go to the cross-border supply and marketing platform to experience the after-sales process to ensure that the overall process is familiar with the convenience of after-sales interface docking. (The following figure only shows the overall process. For other Reverse order queries, message queries, etc., you can consult the relevant interfaces, and don't forget the synchronization of reverse messages.)



 

 

6 API interface details
6.1 Related APIs
API document address:

https://open.taobao.global/doc/api.htm#/api?cid=8&path=/auth/token/refresh&methodType=GET/POST

 

6.1.1 System services
API name	Description	Version (must see)
/auth/token/create	When the seller and distributor complete the authorization, you can obtain the authorization code from the Call Back URL and use this API to further obtain the access token.	 
/auth/token/refresh	When the Access Token expires, use this API to obtain a new Access Token.	 
 

6.1.2 Goods and services
API name	Description	Version (must see)	

/batch/src/products/check	 	Batch collision (you can understand batch query products)	Note: The entry is Taobao product ID, which is the same as the single product collision Library.	 
/product/on/off/shelve	 	The status of the goods on the selling e-commerce platform.	 	
/product/get	 	Single product collision Library (understandable query product)	Note: The entry parameter is the product ID of Taobao.	upgrade -2022-05-23
/product/categories/get	 	Category tree query	 	
/item/get	 	Taobao product query	Note: The entry is Taobao product ID.	 
/mpId/get	 	Obtain the channel product ID based on Taobao product ID	Note: For the time being, the product ID of Taobao is not available.	 
/product/spus/get	 	Query the list of products that have been sold or canceled by the distributor.	Note: This interface only supports Shopping Guide scenarios! The purchasing scene is not used.	 
/product/details/query	 	Supply and marketing platform product details.	Note: The input parameter is the mp_Id of the product on the supply and marketing platform, and the ID of the non-Taobao product.	 
/promotion/query	 	Big promotion commodity discount inquiry.	Note: You can only participate in the price query of the product.	 
/product/similar/get	 	Search for product images.	Note: Search for the same product in the cross-border supply platform based on the picture or the product ID of the supply and marketing platform market.	 
/product/recommend	 	Similar recommended queries.	Note: The entry parameter is the Taobao product ID. You can obtain a batch of similar products in the Taobao product pool, and the price is low (the price is low to high).	upgrade -2022-05-23
/product/relation/build	 	Distributor distribution (establishing a commodity relationship), before purchasing the distributor must establish a binding relationship with the product.	Note: At present, the order will be automatically laid out (the relationship between goods and merchants) can be discarded.	 
/product/same/query	 	Supply and marketing platform products with the same amount of query.	 	
 

6.1.3 Order service
API name	Description	Version (must see)	





/purchase/order/asyn/cancel	 	Cancel the purchase order.	Note: After the merchant delivers goods, it will not be able to cancel it through this interface, and it needs to go to the cross-border supply platform to initiate after-sales reverse. (It is recommended that all paid purchase orders go through the after-sales interface).	 	



/purchase/order/batch/pay	 	Purchase order bulk payment	Note: The input parameter is the purchase order ID of the cross-border supply platform. This interface is executed asynchronously. It is only submitted for payment and the purchase order that cannot be paid is filtered out. The returned results are for reference only. In the end, information synchronization must be performed through the purchase query interface. Otherwise, data consistency problems will occur.	 	



/purchase/order/create	 	Create a purchase order.	Note:	1. The asynchronous logic used behind this interface allows you to synchronize data by subscribing to the purchase order status change message.	2. Product details in the entry (commodity ID must check the mp_id returned by the commodity interface, sku_id is also taken mp_sku_id, otherwise it cannot create a single normally! Because of the post-distribution data model)	3.outer_purchase_id is an idempotent field, remember that each order must be unique.	4. Market channel_order_type mainly depends on your specific application scenario: purchasing scene fill in: PANAMA_DG, shopping guide scenario: PANAMA (default)	 
/purchase/orders/query	 	Query the purchase order.	Note: Pay attention to the input of this interface, and the shipped orders will have corresponding logistics.	2022-07-14 - purchase orders query	



 

6.1.4 After-sales service
(1) Overall business process



（2) After-sales interface details

API name	Description	Version (must see)	

/order/refund/render	Reverse order rendering interface	Description: The distributor initiates a refund and calls this interface to obtain the reason for the refund and the maximum amount of the refund. Provide the reverse interface certainty information (refund type + cargo status) to determine the refund reason list, (refund type, cargo status, refund reason) to determine the maximum refund amount.	 	
/order/refund/submit	 	Reverse order submission	Description: The distributor initiates a refund. After filling in the information (the information can be obtained from the rendering interface), submit a reverse order.	 
/order/refund/modify	 	Reverse single modification interface	Description: The distributor modified the reverse order information.	 
/order/refund/query	 	Reverse order details interface	Description: The distributor can view the details of the reverse order.	 
/order/refund/queryList	 	Reverse single list query interface	Description: Distributor Reverse order list query.	 
/order/refund/render/logistics	 	Return logistics rendering interface	Description: The distributor initiates a refund of the return, and the seller agrees to obtain the logistics information.	 
/order/refund/submit/logistics	 	Return logistics submission interface	Description: The distributor initiates a return refund. After the seller agrees, fill in the logistics information and submit the return logistics.	 
/order/refund/cancel	 	Reverse undo interface	Description: The distributor cancels the reverse application.	 
/order/refund/submit/message	submit reverse Message Interface	Description: The distributor submits a Reverse order message.	 	
/order/refund/query/message	 	Message list query interface	Description: Query the list of reverse messages, including paging.	 
 

（3) Reverse state enumeration

refundType

code	Description
1	Only Return Money
2	Return All （Return Money and Return goods）
goodsStatus

code	Description
1	Not to deliver goods
2	Has been shipped
3	Not received the goods
4	Have received the goods
5	Has been sent back
6	Seller confirms receipt of goods
Description: When applying for a refund, the refund type and the status of the goods can be transferred according to the specific scenario.

 



Description of refund types and good status



 

refund status

code	Description
0	Not applying for a refund
10	The buyer has applied for a refund and is awaiting approval from the seller
20	The seller has agreed to refund and wait for the buyer to return goods
30	The buyer has returned the goods and is waiting for the seller to confirm receipt
100	Refund success
-10	The seller refused to refund
-20	Refund close
7 Scenario issues
Solution ideas:



7.1 Distribution FAQ
API:/product/get

Common QA:

Common questions about failed distribution
ErrorCode	ErrorDescription	Solution
SYSTEM_ERROR	未查到淘宝商品	Did not find Taobao goods, indicating that the Taobao products have been deleted or off the shelves, please replace other sellers to buy
SYSTEM_ERROR	此商家商品不能通过分销方式售卖，请更换商家	This merchant goods can not be sold through distribution, please change the merchant, according to the prompt to change a merchant to purchase goods
SYSTEM_ERROR	暂不支持购买淘特商品	Does not support the purchase of tamote goods, currently does not support taote goods
SYSTEM_ERROR	撞库不是供销平台签约商品	Distribution is not a supply and marketing platform contracted goods, according to the prompt to replace a merchant for commodity procurement
SYSTEM_ERROR	铺货失败	Delivery failure, contact relevant supply and marketing platform technical person in charge to assist
SYSTEM_ERROR	批量撞库未查询到该商品的mpId	Batch collision Library did not find the mpId of the product contact the relevant supply and marketing platform technical director for assistance
7.2 Create Order FAQ
API:/purchase/order/create

Note:

The asynchronous logic used behind this interface allows you to synchronize data by subscribing to the purchase order status change message (see point 8 for details).
The product details in the entry parameter (the product ID must be checked for the mp_id returned by the product interface, and the sku_id is also taken.mp_sku_id, otherwise it is not normal to create a single.).
outer_purchase_id is an idempotent field, remember that each order must be unique.
The market channel_order_type mainly depends on your specific application scenario: purchasing mode to fill in: PANAMA_DG, shopping guide.
Mode: PANAMA (default)
Common QA:

ErrorCode	ErrorDescription	Solution	



GOODS_UN_BUILD_RELATION_OR_NOT_CORRECT	商家未和该商品建立关系，请检查商品的正确性（用跨境供货平台商品ID）后重试创单600037765030623443	(1) Check the channel channel_order_type Whether to fill in the error, according to the specific application scenario of the API.	(2) the channel is correct, check whether the commodity parameters are correct; focus on itemI(mp_id), skuId (mp_sku_id), whether all are cross-border supply platform Channel commodity model attributes.	(3) Check whether the product status is normal.	(4) If there is no problem in the first few steps, find the technical person in charge to solve it.	
B-10-00-005	GSP拆单异常	(1) Check whether the channel channel_order_type is wrong, the specific application scenario.	(2) the channel is correct, check whether the commodity parameters are correct; focus on itemId(mp_id), skuId (mp_sku_id), whether all are cross-border supply platform commodity model attributes.	(3) Check whether the goods are normal.	(4) Check whether the authorized account is a cross-border supply platform account (rather than an open platform account). The two platform accounts are separate and not the same.	(5) If there is no problem in the first few steps, find the technical person in charge to solve it.
7.3 Purchase order entry problem
API:/purchase/order/create

Field_name	Description	
outer_purchase_id	IDs generated by the distributor's own system must be unique.	
purchase_amount	estimated purchase amount	
seller_order_number	order number generated by the distributor's own system	
order_source	order source	
order_line_list	order details [commodity ID must check the mp_id returned by the commodity interface, sku_id is also the mp_sku_id, otherwise the order cannot be created normally. ]	
receiver	recipient information	
warehouse_address_info	Distributor domestic warehouse address (generally sent to this)	
channel_order_type	mainly depends on your specific application scenario:	[PANAMA_DG | shopping guide mode: PANAMA]
support_partial_success	if the customer fills in the default parameter (false/empty), the online order creation logic goes "one sub-order fails, the whole main order fails", if the customer fills in the specified parameter (true), the online order logic goes "one sub-order fails, part of the sub-order succeeds, the main order returns success"	
order_remark	supplier comments (limited to 35 words)	
7.4 FAQ about Taobao product details
API:/item/get

Common QA:

ErrorCode	ErrorDescription	Solution
SYSTEM_ERROR	商品详情未查到淘宝商品	product details did not find Taobao goods, indicating that the Taobao products were deleted or off the shelves
SYSTEM_ERROR	商品详情暂不支持购买淘特商品	commodity details do not support the purchase of tamote goods, currently do not support taote goods
7.5 Payment FAQ
API:/purchase/order/batch/pay

Description: The input parameter is the purchase order ID of the cross-border supply platform. This interface is executed asynchronously. It is only submitted for payment and filters out purchases that cannot be paid.The returned results are for reference only. In the end, you must synchronize information through the purchase query interface. Otherwise, data consistency questions will occur.

The ginseng:

Note:

will_pay_purchase_order_ids does not indicate payment success! Instead, a payment order was submitted.

pay_failure_purchase_order_ids indicates payment cannot be submitted! The payment verification failed.

Detailed parameters:

{

"error_msg": "",

"code": "0",

"data": {

"will_pay_purchase_order_ids": "200001911633",// a payment order has been submitted

"pay_failure_purchase_order_ids": "200000229005" // Submit failed orders

},

"success": "true",

"error_code": "BATCH_PAY_ERROR",

"request_id": "0ba2887315178178017221014"

}

8 Message interface documentation
8.1 Configure Message Service
Developers can configure a callback URL on the open platform to receive message requests. This method can reduce the developer's attempts to obtain order updates through the polling mechanism.

Log in to Taobao Global Open Platform as a developer;
Select the APP console(APP console);
Select Manage on the right side of the application list;
Select Message service (Message Service);
Enter the callback address and select Verify. If the HTTP 200 status code is returned, the verification is successful;
Select the messages to be subscribed from the list;
Select Save;
For example:



For the design of the message receiving channel, see:

use HTTP to receive messages
For more information about the message structure, see:

cross-border supply platform
8.2 Receive messages using HTTP
Note: You need to provide a message receiving Channel in the form of HTTPS POST requests.

8.2.1 Callback address
To use Message Service, you must prepare a callback interface for receiving messages. Follow the following requirements:

Use the HTTPS protocol callback address;
Please use the certificate issued by CA, which requires OV/EV level;
After receiving the message, please return the HTTP 200 status code to confirm the signing message.
8.2.2 Message processing
Do not perform business processing while receiving the message;
Please receive the message, store it to the pending queue, and return the HTTP 200 status. After that, the message is consumed asynchronously;
The order contains only the necessary identification information. Please use the corresponding query interface to query the business details.
 

Message Example #1. Example of positive transaction information (generated by forward transaction behaviors such as placing orders, paying, shipping, and receiving goods)

POST /example/uri HTTP/1.1

Host: www.example.com

Content-Type: application/json

Content-Length: 1238

Authorization: 34f7b258df045d4ed9341850ca85b866f34828fd7d51862f11137216294a894c

#Message body

{

"seller_id":"1234567", #Seller ID

"message_type":0,

   "data":{

      "order_status":"unpaid", #Order status

      "trade_order_id":"260422900198363", #Primary ID

      "trade_order_line_id":"260422900298363", #Sub-ID

      "status_update_time":1603698638 #The timestamp when the order status is updated.

   },

   "timestamp":1603766859530, #Push timestamp

   "site":"lazada_vn" # Site information

}

 

Message Example #2. Examples of reverse transaction information (cancellation, return refund, and other reverse transaction behavior)

POST /example/uri HTTP/1.1

Host: www.example.com

Content-Type: application/json

Content-Length: 1238

Authorization: 34f7b258df045d4ed9341850ca85b866f34828fd7d51862f11137216294a894c

#Message body

{

   "seller_id":"1000114855",

   "message_type":0,

   "data":{

      "order_status":"canceled",

      "reverse_order_id":"501977696648153",    #Reverse master ID

      "reverse_order_line_id":"502491640048153", #Reverse sub-single ID

      "status_update_time":1603703663,

      "trade_order_id":"252883361348153", #Associate forward single ID

      "trade_order_line_id":"252883361948153" #Associate reverse single ID

   },

   "timestamp":1603715010436,

   "site":"lazada_vn"

}

 

8.2.3 Retry and compensation
the server for more than 500ms did not receive the 200 confirmation, and the server considered that the message push failed.
After the failure, the message will be pushed again after half an hour. The maximum number of retries is 12 times.
If the system interrupts more than 12 retries, please retrieve the data through the relevant query interface.
8.2.4 Signature
We recommend that you verify the validity of the received message.

Special note: Do not convert and modify the message body after receiving the message! Otherwise, signing again will not be inconsistent.

The request body is used as the message body, the AppSecret is the key, and the signature encryption algorithm is the HMAC-SHA256.

Signature to generate Sample Code

/*

Base = {your_app_key} + "{message_body_you_receieved}"

Secret = {your_app_Secret};

*/

Authorization = HEX_ENCODE(HMAC-SHA256(Base, Secret));

Use the following code to generate a signature to compare with the Authorization in the Header.

The data will be transmitted in clear text. For security reasons, please sign and compare the received messages!

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import javax.crypto.Mac;
import javax.crypto.spec.SecretKeySpec;

/**
 * Signature tool class
 * @author jianyan
 * @date 2020/12/01
 */
public class SignatureUtil {
private static final String HMAC_SHA256 = "HmacSHA256";

private static final Logger LOGGER = LoggerFactory.getLogger(SignatureUtil.class);

/**
 * Generates a Hmac-SHA256-based, 16-decimal encoded signature. 
 * @param base {AppKey} + {messageBody}
 * @param secret {AppSecret}
 * E.g.: AppKey = 123456, AppSecret = 3412gyo124goi3124
 * The body of the received message JSON ：{"seller_id":"1234567", "message_type":0, "data":{...}..}
 *
 * base = "123456" + "{\"seller_id\":\"1234567\", \"message_type\":0, "data":{...}..}"
 * secret = 3412gyo124goi3124
 * signature = getSignature(base, secret);
 * signature = f3d2ca947f16a50b577c036adecd18bec126ea19cadedd59816e255d3b6104ab
 * @return signature
 */
public static String getSignature(String base, String secret) {
try {
Mac sha256Hmac = Mac.getInstance(HMAC_SHA256);
SecretKeySpec secretKey = new SecretKeySpec(secret.getBytes(), HMAC_SHA256);
sha256Hmac.init(secretKey);
return byteArraytoHexString(sha256Hmac.doFinal(base.getBytes()));
} catch (Exception e) {
LOGGER.error("Failed to generate signature");
}
return null;

}

/**
 * Hexadecimal Encode
 * @param bytes
 * @return
 */
private static String byteArraytoHexString(byte[] bytes) {
if(bytes == null) {
return null;
}
StringBuilder sb = new StringBuilder();
String stmp;
for (byte aByte : bytes) {
stmp = Integer.toHexString(aByte & 0XFF);
if (stmp.length() == 1) {
sb.append('0');
}
sb.append(stmp);
}
return sb.toString().toLowerCase();
}
}
8.3 Message Service Subscription
Description: When a distributor calls an open platform API, it needs to use it with a messaging service. The main core is to synchronize data from the platform to its own system platform to maintain data consistency between the two sides.



8.3.1 Goods and Services messages
Note that only scenarios are supported: Shopping Guide Mode

Distributor selection
message_type:2

Trigger node: Distributor to/undistribute goods on cross-border supply platform (PANAMA Channel)

{
"seller_id":"12345", // "seller_id" can be obtained when the distributor is authorized. For more information, see: Interface AccessToken 
"message_type":2,
"data":{
"seller_id":"12345",
"spu_ids_list":[
"223244",
"54543342"
]
},
"timestamp":123456789
}
 

Critical inventory change
message_type:1

Trigger Node: Each time an inventory update is triggered. Sending at "100", "20", and "0" (PANAMA Channel)

{

   "seller_id":"12345",

   "message_type":1,

   "data":{

      "seller_id":"12345",

      "item_id":"323434",

      "sku_list":[

         {

            "sku_id":"123422"

         }

      ],

      "status":"STOCK_CHANGED"

   },

   "timestamp":123456787

}

 

Commodity upper and lower shelves
message_type:0

Trigger node: The merchant or platform triggers the product to go up and down.

{

   "seller_id":"12345",

   "message_type":0,

   "data":{

      "seller_id":"12345",

      "item_id":32242,

      "sku_list":[

         "223244",

         "54543342"

      ]

   },

   "timestamp":123456789

}

Among them, commodity messages, because the data is pushed to developers through the API, the order of the messages received by developers cannot be guaranteed. Therefore, please check the API after receiving the commodity messages and then do relevant business processing.

When the merchant is authorized, you can obtain the seller_id of the merchant. For more information, see API AccessToken.

 

Commodity price changes
message_type:7

Trigger node: changes in supplier commodity prices

{

   "seller_id":"12345",

   "message_type":7,

   "data":{

      "item_id":600027239042390035,

      "seller_id":2100000978004,

      "sku_list":[

         4511721254067,

         5466335674566

      ]

   },

   "timestamp":123456789

}

8.3.2 Order service messages
Order status change
message_type:3

Trigger node: The status of the purchase order has changed.

Message body:

{

        "seller_id": "2100000927014",

        "message_type": 3,

        "data": {

               "business_time": 1650939687564,

               "outer_purchase_id": "FY20220426002",

               "purchase_id": 200002638011,

               "seller_id": 2100000927014,

               "sku_list": [{

                       "item_id": 600123256363335043,

                       "logistic_company_name": "顺丰速运",

                       "logistic_number": "SF4548527307631",

                       "order_line_no": "1",

                       "sku_id": 4808332513272,

                       "status": "WAIT_BUYER_CONFIRM_GOODS"

               }],

               "status": "WAIT_SELLER_SEND_GOODS"

        },

        "timestamp": 1650939687,

        "site": "taobao_hk"

}

The order-related message will be given to the specific status, and developers can trust to use it directly, provided that the following processing has been done:

-The message is out of order. You must use the reverse check API(/purchase/orders/query) to obtain the purchase order for synchronization.

The value of the purchase order status:

Purchase order status	Description
BULIDING	BULIDING purchase order creation
WAIT_BUYER_P	WAIT_BUYER_P waiting for payment
WAIT_SELLER_SEND_GOODS	WAIT_SELLER_SEND_GOODS paid, to be shipped
WAIT_BUYER_CONFIRM_GOODS	WAIT_BUYER_CONFIRM_GOODS paid, shipped
TRADE_CLOSED	TRADE_CLOSED trading closed
 

Order price change message
message_type:8

Note: Messages are out of order. Finally, you need to reverse the API(/purchase/orders/query) to obtain the purchase order for synchronization.

Trigger node: Create an order and contact the Taobao seller to change the price of the order!

{

        "seller_id": "2100000927014",

        "message_type": 8,

        "data": {

               "features": {},

               "salesOrderId": "500000-GSP2021031415594",

               "salesSellerId": 2100000927014,

               "purchaseMarket": "PANAMA",

               "purchaseOrderId": 200002372069,

               "purchaseOrderPriceDTO": {

                       "purchaseCurrency": "CNY",

                       "purchaseTotalFee": 1,

                       "purchaseProductFee": 1,

                       "purchaseShippingFee": 0

               },

               "purchaseOrderLinePriceChangeMessageDTOList": [{

                       "features": {},

                       "salesOrderLineIdList": ["1"],

                       "purchaseOrderLineId": 200002372070,

                       "purchaseOrderItemPriceDTO": {

                               "purchaseCurrency": "CNY",

                               "purchaseTotalFee": 1,

                               "purchaseProductFee": 1,

                               "purchaseProductUnitFee": 1,

                               "purchaseShippingFee": 0

                       },

                       "bizFeatures": {}

               }],

               "actionTime": 1647306796326,

               "bizFeatures": {

                       "appKey": "500000",

                       "orderSource": "taobao",

                       "purchase_warehouse_address": "{\"city\":\"广州市\",\"country\":\"中国\",\"detailAddress\":\"落潭镇长腰岭村第三经济合作社长兴工业路3号派亚物流\",\"district\":\"白云区\",\"divisionId\":\"440111108\",\"mobile\":\"18500176747\",\"name\":\"李澳洲\",\"phone\":\"\",\"state\":\"广东省\"}",

                       "sellerOrderNumber": "-"

               }

        },

        "timestamp": 1647306796,

        "site": "taobao_hk"

}

Precautions for price change

the order price is applicable to the order created after the number 3.15, the order created before does not support the price change, please know.
when the order is created and feels that it is possible to change the price, contact the Taobao seller to change the order price, and the order after payment does not support the order to change the price. There are some commodities that have business-specific rules, so not all commodities support price changes.
some orders Taobao close the order time is very short (e. g. 30 minutes), if the time is not paid, the system will conduct risk control interception when placing the order (the order has been closed after the price change, and a new order has been re-generated). At this time, you need to contact Taobao sellers to change the price of the new order. If you have any other questions during the operation, you can directly consult the relevant technical director.
8.3.3 After-sales service news
Refund order/message synchronization message
Description: When the status of the reverse order is changed, if the seller agrees to refund or return the goods, it will trigger a message to notify the distributor. Secondly, if the message is added (the seller's message) or update (the message is overwritten by the message), the distributor needs to get the corresponding message, synchronize the reverse order, or leave the message to maintain data consistency with the supply and marketing platform.

message_type:9

{

        "seller_id": "2100000927014",

        "message_type": 9,

        "data": {

              "sellerId": 2100000927014, // Distributor ID

              "messageType": 2, // 1 Refund order synchronization | 2 Message synchronization

              "refundId": 110000312001,

              "businessTime": 1652266980661, // Message sending timestamp

              "purchaseOrderId": 2608284132117736161 // Purchase order ID

        },

        "timestamp": 1652266980,

        "site": "taobao_hk"

}

9 Version update instructions
2022-05-23-Distribution
API (/product/get) to upgrade the full product

(1) Full commodity promotion

Background
In order to help distributors in the cross-border supply platform can find more goods, avoid because the goods are not on the cross-border supply platform can not make orders, for this reason, the supply and marketing platform will be online in 2022-05-22 online "Tmall Taobao full quantity of goods" query, improve the success rate of commodity query. However, due to Tmall Taobao full access to goods need to follow

Taobao Compliance Regulations, non-cross-border goods will not provide product material information (pictures, descriptions, etc.). The original contracted goods are not affected by this. Before docking, Please query the document completely and understand the updated content of the interface to determine whether you need to adjust your own system to avoid affecting your business.

Affect (needs to be developed according to rules)
（1）Distribution（/product/get）

（2）Recommended API for similar models（/product/recommend）

Rule change point (parameter rule)


Rule table
Item_type	Field Description	Response model	







HAVE_MATERIAL	"HAVE_MATERIAL" means that this is a supply and marketing product, will contain the full product material.	All fields in response to the data are returned normally	







WITHOUT_MATERIAL	"WITHOUT_MATERIAL" means that this is a full Taobao product, which only contains some product information (not including product pictures, descriptions, etc.)	 	Full product promotion and compliance: The response data is reduced by some SPU fields, and the SKU remains unchanged.	6 less SPU fields:：	1.category_path	2.category_id	3.product_unit	4.pic_urls	5.begin_amount	6.description
Risk points
Instructions for distributors: Development must be carried out according to the above rule points, otherwise it will affect the rendering of materials in its own system, and there will be missing pictures, details and other content, which will affect the user experience and single volume.

 

 

 

2022-07-14 - purchase orders query
purchase orders query (/purchase/orders/query) adds a list of logistics to the suborder information

Background
In order to be compatible with merchants shipping from domestic merchants, Handao currently supports merchants in fulfillment to split packages for shipping in the sub-order dimension, i.e. a sub-order can be sent out in multiple packages, and multiple order numbers can be backfilled when backfilling in the system.
However, when transmissions are given to distributors (either on the page or in the API), only the first parcel number is taken and displayed, resulting in the undisplayed parcels being treated as no-ownership in the case of multi-package shipments, which affects normal fulfilment.
Affecting interfaces
(1) purchase orders query (/purchase/orders/query)

Rule change points (out of reference rules)
Add logistic_orders field for returning a list of multiple logistics



There is a discrepancy between what is shown in the development platform documentation and the real return type, which is an array as shown below:



Risk point
The original logistic information fields logistic_number, logistic_company_name, rts_time in /purchase/orders/query are obsolete and will not be maintained in the future. It is recommended to use the logistic_orders field to obtain logistics information.









